import{u as E,r as v,o as A,c as b,a as s,b as n,h as V,w as a,d as e,e as D,f as c,t as o,g as _,F as N,i as g}from"./app-BiSPCPuo.js";import{q as y,r as x,b as h,_ as S}from"./AuthenticatedLayout-57Q77M7z.js";import{_ as F}from"./AdvancedTable-5fi55ECo.js";import{_ as M}from"./Button-cwC7HEN4.js";import{_ as f}from"./Card-B0sMFwFC.js";import{_ as d}from"./Badge-DAiRCop6.js";import{a as k}from"./api-BtR7IrG5.js";import{r as T}from"./PlusIcon-BOqTvPvA.js";import{r as q}from"./EyeIcon-BomQU5Ge.js";import{r as z}from"./PencilIcon-B9iUmX0Q.js";import{r as I}from"./TrashIcon-DlbRnS0G.js";import"./ArrowDownTrayIcon-DICVMDSG.js";import"./ArrowUpIcon-IEJdmouC.js";const L={class:"space-y-6 pb-8"},O={class:"flex items-center justify-between"},P={class:"grid grid-cols-1 gap-6 sm:grid-cols-3"},U={class:"flex items-center justify-between"},G={class:"mt-2 text-3xl font-semibold text-gray-900"},H={class:"rounded-lg bg-blue-50 p-3"},J={class:"flex items-center justify-between"},K={class:"mt-2 text-3xl font-semibold text-gray-900"},Q={class:"rounded-lg bg-green-50 p-3"},R={class:"flex items-center justify-between"},W={class:"mt-2 text-3xl font-semibold text-gray-900"},X={class:"rounded-lg bg-purple-50 p-3"},Y={class:"flex items-center gap-3"},Z={class:"flex h-10 w-10 items-center justify-center rounded-lg bg-gradient-to-br from-indigo-500 to-purple-600"},ee={class:"font-medium text-gray-900"},te={class:"flex items-center justify-end gap-2"},se=["onClick"],re=["onClick"],ae=["onClick"],le={key:1,class:"space-y-4"},xe={__name:"Index",setup(ne){E();const m=v(!1),i=v([]),w=[{key:"title",label:"Curriculum",sortable:!0},{key:"level",label:"Level",sortable:!0,align:"center"},{key:"books_count",label:"Books",sortable:!0,align:"center"},{key:"students_count",label:"Students",sortable:!0,align:"center"},{key:"status",label:"Status",sortable:!0,align:"center"},{key:"created_at",label:"Created",sortable:!0,format:"date"}],p=async()=>{m.value=!0;try{const{data:l}=await k.get("/curriculum");i.value=Array.isArray(l.curriculums||l)?(l.curriculums||l).map(r=>({...r,books_count:r.books?.length||0,students_count:r.students?.length||0,status:r.status||"active"})):[]}catch(l){console.error("Error fetching curriculum:",l),i.value=[]}finally{m.value=!1}},C=()=>{g.visit("/super-admin/curriculum/create")},$=l=>{g.visit(`/super-admin/curriculum/${l.id}`)},j=l=>{g.visit(`/super-admin/curriculum/${l.id}/edit`)},B=async l=>{if(confirm(`Are you sure you want to delete "${l.title}"?`))try{await k.delete(`/curriculum/${l.id}`),await p()}catch(r){console.error("Error deleting curriculum:",r),alert("Failed to delete curriculum")}};return A(()=>{p()}),(l,r)=>(_(),b(N,null,[s(n(V),{title:"Curriculum Management"}),s(S,null,{default:a(()=>[e("div",L,[e("div",O,[r[1]||(r[1]=e("div",null,[e("h1",{class:"text-3xl font-bold text-gray-900"},"Curriculum Management"),e("p",{class:"mt-1 text-sm text-gray-500"}," Organize and manage curriculum content ")],-1)),s(M,{onClick:C,variant:"primary"},{default:a(()=>[s(n(T),{class:"h-5 w-5 mr-2"}),r[0]||(r[0]=c(" Create Curriculum ",-1))]),_:1})]),e("div",P,[s(f,{class:"p-6"},{default:a(()=>[e("div",U,[e("div",null,[r[2]||(r[2]=e("p",{class:"text-sm font-medium text-gray-600"},"Total Curriculums",-1)),e("p",G,o(i.value.length),1)]),e("div",H,[s(n(y),{class:"h-8 w-8 text-blue-600"})])])]),_:1}),s(f,{class:"p-6"},{default:a(()=>[e("div",J,[e("div",null,[r[3]||(r[3]=e("p",{class:"text-sm font-medium text-gray-600"},"Total Books",-1)),e("p",K,o(i.value.reduce((t,u)=>t+(u.books_count||0),0)),1)]),e("div",Q,[s(n(x),{class:"h-8 w-8 text-green-600"})])])]),_:1}),s(f,{class:"p-6"},{default:a(()=>[e("div",R,[e("div",null,[r[4]||(r[4]=e("p",{class:"text-sm font-medium text-gray-600"},"Students Enrolled",-1)),e("p",W,o(i.value.reduce((t,u)=>t+(u.students_count||0),0)),1)]),e("div",X,[s(n(h),{class:"h-8 w-8 text-purple-600"})])])]),_:1})]),m.value?(_(),b("div",le,[...r[5]||(r[5]=[e("div",{class:"h-64 rounded-xl bg-gray-200 animate-pulse"},null,-1)])])):(_(),D(F,{key:0,title:"All Curriculums",columns:w,data:i.value,searchable:!0,paginated:!0,exportable:!0,"items-per-page":25,"row-key":"id"},{"cell-title":a(({row:t})=>[e("div",Y,[e("div",Z,[s(n(y),{class:"h-5 w-5 text-white"})]),e("span",ee,o(t.title||"Untitled"),1)])]),"cell-level":a(({row:t})=>[s(d,{variant:t.level==="beginner"?"primary":t.level==="intermediate"?"warning":"success"},{default:a(()=>[c(o(t.level||"N/A"),1)]),_:2},1032,["variant"])]),"cell-books_count":a(({row:t})=>[s(d,{variant:"secondary"},{default:a(()=>[s(n(x),{class:"h-3 w-3 mr-1 inline"}),c(" "+o(t.books_count||0),1)]),_:2},1024)]),"cell-students_count":a(({row:t})=>[s(d,{variant:"secondary"},{default:a(()=>[s(n(h),{class:"h-3 w-3 mr-1 inline"}),c(" "+o(t.students_count||0),1)]),_:2},1024)]),"cell-status":a(({row:t})=>[s(d,{variant:t.status==="active"?"success":"secondary"},{default:a(()=>[c(o(t.status||"active"),1)]),_:2},1032,["variant"])]),"row-actions":a(({row:t})=>[e("div",te,[e("button",{onClick:u=>$(t),class:"rounded-lg p-2 text-gray-400 hover:bg-gray-100 hover:text-blue-600 transition-colors",title:"View Details"},[s(n(q),{class:"h-5 w-5"})],8,se),e("button",{onClick:u=>j(t),class:"rounded-lg p-2 text-gray-400 hover:bg-gray-100 hover:text-blue-600 transition-colors",title:"Edit"},[s(n(z),{class:"h-5 w-5"})],8,re),e("button",{onClick:u=>B(t),class:"rounded-lg p-2 text-gray-400 hover:bg-gray-100 hover:text-red-600 transition-colors",title:"Delete"},[s(n(I),{class:"h-5 w-5"})],8,ae)])]),_:1},8,["data"]))])]),_:1})],64))}};export{xe as default};
