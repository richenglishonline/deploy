import{u as Y,r as b,j as g,o as q,c as o,a as l,b as d,h as z,w as v,d as t,e as $,k as h,t as n,g as a,F as _,q as S,y as O,f as k,i as H}from"./app-BiSPCPuo.js";import{d as N,r as P,a as G,_ as K}from"./AuthenticatedLayout-57Q77M7z.js";import{_ as T}from"./Card-B0sMFwFC.js";import{_ as Q}from"./Badge-DAiRCop6.js";import{a as R}from"./api-BtR7IrG5.js";import{r as X,a as Z}from"./ChevronRightIcon-C2Roh8Cq.js";const I={class:"space-y-6 pb-8"},ee={class:"mb-6 flex items-center justify-between"},te={class:"text-xl font-semibold text-gray-900"},se={class:"grid grid-cols-7 gap-2"},ae=["onClick"],re={key:0,class:"flex flex-col gap-1"},ne={class:"flex flex-col gap-1"},oe={key:0,class:"text-xs text-gray-500"},le={class:"mb-4 text-lg font-semibold text-gray-900"},ie={class:"space-y-3"},ce=["onClick"],ue={class:"flex items-center gap-4"},de={class:"flex h-12 w-12 items-center justify-center rounded-lg bg-gradient-to-br from-blue-500 to-indigo-600"},ge={class:"font-medium text-gray-900"},me={class:"mt-1 flex items-center gap-4 text-sm text-gray-500"},ve={class:"flex items-center gap-1"},he={key:0,class:"flex items-center gap-1"},_e={class:"mt-1 text-sm text-gray-500"},pe={key:2,class:"space-y-4"},Te={__name:"Index",setup(fe){Y();const p=b(!1),f=b([]),x=b(new Date),m=b(new Date),V=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],F=["January","February","March","April","May","June","July","August","September","October","November","December"],i=g(()=>x.value.getMonth()),c=g(()=>x.value.getFullYear()),j=g(()=>new Date(c.value,i.value+1,0).getDate()),A=g(()=>new Date(c.value,i.value,1).getDay()),B=g(()=>{const s=[],r=new Date;r.setHours(0,0,0,0);for(let e=0;e<A.value;e++)s.push({date:null,classes:[]});for(let e=1;e<=j.value;e++){const u=new Date(c.value,i.value,e),y=u.toISOString().split("T")[0],D=f.value.filter(M=>M.start_time?new Date(M.start_time).toISOString().split("T")[0]===y:!1);s.push({date:u,classes:D,isToday:u.getTime()===r.getTime(),isSelected:u.toISOString().split("T")[0]===m.value.toISOString().split("T")[0]})}return s}),C=g(()=>{const s=m.value.toISOString().split("T")[0];return f.value.filter(r=>r.start_time?new Date(r.start_time).toISOString().split("T")[0]===s:!1)}),L=()=>{x.value=new Date(c.value,i.value-1,1)},J=()=>{x.value=new Date(c.value,i.value+1,1)},E=s=>{s&&s.date&&(m.value=new Date(s.date))},w=s=>s?new Date(s).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):"",U=async()=>{p.value=!0;try{const{data:s}=await R.get("/teacher/classes",{params:{start_date:new Date(c.value,i.value,1).toISOString(),end_date:new Date(c.value,i.value+1,0).toISOString()}});f.value=Array.isArray(s.classes||s)?s.classes||s:[]}catch(s){console.error("Error fetching schedule:",s),f.value=[]}finally{p.value=!1}},W=s=>{H.visit(`/teacher/classes/${s.id}`)};return q(()=>{U()}),(s,r)=>(a(),o(_,null,[l(d(z),{title:"My Schedule"}),l(K,null,{default:v(()=>[t("div",I,[r[2]||(r[2]=t("div",null,[t("h1",{class:"text-3xl font-bold text-gray-900"},"My Schedule"),t("p",{class:"mt-1 text-sm text-gray-500"}," View your upcoming classes and schedule ")],-1)),l(T,{class:"p-6"},{default:v(()=>[t("div",ee,[t("button",{onClick:L,class:"rounded-lg p-2 text-gray-400 hover:bg-gray-100 hover:text-gray-600 transition-colors"},[l(d(X),{class:"h-5 w-5"})]),t("h2",te,n(F[i.value])+" "+n(c.value),1),t("button",{onClick:J,class:"rounded-lg p-2 text-gray-400 hover:bg-gray-100 hover:text-gray-600 transition-colors"},[l(d(Z),{class:"h-5 w-5"})])]),t("div",se,[(a(),o(_,null,S(V,e=>t("div",{key:e,class:"py-2 text-center text-xs font-semibold uppercase text-gray-500"},n(e),1)),64)),(a(!0),o(_,null,S(B.value,(e,u)=>(a(),o("div",{key:u,class:O(["min-h-[80px] rounded-lg border-2 p-2 transition-colors cursor-pointer",e.date?"border-gray-200 hover:border-blue-300 hover:bg-blue-50":"border-transparent",e.isToday?"border-blue-500 bg-blue-50":"",e.isSelected?"border-blue-600 bg-blue-100 ring-2 ring-blue-500":""]),onClick:y=>E(e)},[e.date?(a(),o("div",re,[t("span",{class:O(["text-sm font-medium",e.isToday?"text-blue-600":"text-gray-900"])},n(e.date.getDate()),3),t("div",ne,[(a(!0),o(_,null,S(e.classes.slice(0,2),(y,D)=>(a(),o("div",{key:D,class:"rounded bg-blue-100 px-1.5 py-0.5 text-xs text-blue-900"},n(w(y.start_time)),1))),128)),e.classes.length>2?(a(),o("div",oe," +"+n(e.classes.length-2)+" more ",1)):h("",!0)])])):h("",!0)],10,ae))),128))])]),_:1}),C.value.length>0?(a(),$(T,{key:0,class:"p-6"},{default:v(()=>[t("h3",le," Classes on "+n(m.value.toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})),1),t("div",ie,[(a(!0),o(_,null,S(C.value,e=>(a(),o("div",{key:e.id,onClick:u=>W(e),class:"flex items-center justify-between rounded-lg border border-gray-200 p-4 hover:border-blue-300 hover:bg-blue-50 cursor-pointer transition-colors"},[t("div",ue,[t("div",de,[l(d(N),{class:"h-6 w-6 text-white"})]),t("div",null,[t("div",ge,n(e.student?`${e.student.first_name||""} ${e.student.last_name||""}`.trim()||e.student.email:"Student"),1),t("div",me,[t("span",ve,[l(d(N),{class:"h-4 w-4"}),k(" "+n(w(e.start_time))+" - "+n(w(e.end_time)),1)]),e.book?(a(),o("span",he,[l(d(P),{class:"h-4 w-4"}),k(" "+n(e.book.title||"No book"),1)])):h("",!0)])])]),l(Q,{variant:e.status==="completed"?"success":e.status==="scheduled"?"primary":"warning"},{default:v(()=>[k(n(e.status||"scheduled"),1)]),_:2},1032,["variant"])],8,ce))),128))])]),_:1})):p.value?h("",!0):(a(),$(T,{key:1,class:"p-12 text-center"},{default:v(()=>[l(d(G),{class:"mx-auto h-12 w-12 text-gray-300"}),r[0]||(r[0]=t("p",{class:"mt-4 text-sm font-medium text-gray-900"},"No classes scheduled",-1)),t("p",_e," No classes on "+n(m.value.toLocaleDateString("en-US",{month:"long",day:"numeric"})),1)]),_:1})),p.value?(a(),o("div",pe,[...r[1]||(r[1]=[t("div",{class:"h-96 rounded-xl bg-gray-200 animate-pulse"},null,-1)])])):h("",!0)])]),_:1})],64))}};export{Te as default};
