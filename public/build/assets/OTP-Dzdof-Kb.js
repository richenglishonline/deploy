import{r,o as B,i as _,C as N,c,b as h,d as t,u as w,h as q,w as k,n as y,z as P,t as f,j as z,e as I,F as C,g as F,f as v}from"./app-Df2mZBCJ.js";import{a as E}from"./api-CaAFynDB.js";import{r as M}from"./ArrowLeftIcon-D6FPbl7z.js";const $={class:"relative flex min-h-screen flex-col justify-center overflow-hidden bg-gradient-to-br from-blue-900 via-indigo-900 to-slate-950 py-12 px-4 sm:px-8 lg:px-12","data-aos":"fade-up"},K={class:"relative z-10 mx-auto flex w-full max-w-6xl flex-col overflow-hidden rounded-3xl bg-white/95 shadow-2xl shadow-blue-900/25 backdrop-blur-lg lg:flex-row","data-aos":"fade-up","data-aos-delay":"120"},L={class:"relative hidden w-full max-w-md flex-shrink-0 flex-col justify-between bg-gradient-to-b from-blue-600 via-blue-500 to-indigo-600 p-10 text-white lg:flex"},U={class:"relative z-10 space-y-6"},W={class:"relative z-10 space-y-3 text-sm text-white/75"},Y={class:"w-full bg-white/95 px-8 py-12 sm:px-12 lg:px-16","data-aos":"fade-up","data-aos-delay":"200"},A={class:"mx-auto w-full max-w-md"},G={class:"mt-8 flex flex-col items-center text-center"},H={class:"mt-2 text-sm text-slate-500"},J={class:"font-medium text-slate-700"},Q={class:"mt-4"},X={key:0,class:"text-sm font-medium text-blue-600"},Z={key:1,class:"text-sm font-medium text-rose-500"},ee={key:0,class:"rounded-2xl bg-green-50 p-4 text-sm text-green-600"},te={key:1,class:"rounded-2xl bg-rose-50 p-4 text-sm text-rose-600"},se={class:"flex justify-center gap-2 sm:gap-3"},ae=["value","onInput","onKeydown","onPaste"],le=["disabled"],oe={class:"text-center"},ne={class:"text-sm text-slate-500"},ie=["disabled"],fe={__name:"OTP",props:{email:{type:String,default:""}},setup(R){const b=r(R.email||new URLSearchParams(window.location.search).get("email")||""),n=r(["","","","","",""]),x=r(!1),g=r(!1),l=r(300),m=r([]),o=r(""),p=r("");let i=null;B(()=>{if(!b.value){_.visit(route("password.request"));return}i=setInterval(()=>{l.value--,l.value<=0&&clearInterval(i)},1e3)}),N(()=>{i&&clearInterval(i)});const j=s=>{const e=Math.floor(s/60),u=s%60;return`${e}:${u.toString().padStart(2,"0")}`},D=(s,e)=>{e&&!/^\d$/.test(e)||(n.value[s]=e,o.value="",e&&s<5&&m.value[s+1]?.focus())},S=(s,e)=>{e.key==="Backspace"&&!n.value[s]&&s>0&&m.value[s-1]?.focus()},T=s=>{s.preventDefault();const e=s.clipboardData.getData("text").slice(0,6);if(!/^\d+$/.test(e))return;e.split("").forEach((d,a)=>{a<6&&(n.value[a]=d)});const u=Math.min(e.length,5);m.value[u]?.focus()},V=async()=>{if(l.value<=0){o.value="OTP has expired. Please request a new code.";return}const s=n.value.join("");if(s.length!==6){o.value="Please enter all 6 digits";return}x.value=!0,o.value="",p.value="";try{await E.post("/verify-otp",{otp:s}),_.visit(route("password.reset")+"?email="+encodeURIComponent(b.value))}catch(e){o.value=e.response?.data?.message||"Invalid OTP. Please try again.",n.value=["","","","","",""],m.value[0]?.focus()}finally{x.value=!1}},O=async()=>{g.value=!0,o.value="",p.value="";try{await E.post("/resend-otp",{email:b.value}),p.value="OTP resent to your email",n.value=["","","","","",""],l.value=300,i&&clearInterval(i),i=setInterval(()=>{l.value--,l.value<=0&&clearInterval(i)},1e3),m.value[0]?.focus()}catch(s){o.value=s.response?.data?.message||"Failed to resend OTP. Please try again."}finally{g.value=!1}};return(s,e)=>(v(),c(C,null,[h(w(q),{title:"Verify OTP"}),t("div",$,[e[10]||(e[10]=t("div",{class:"absolute inset-0 bg-[radial-gradient(circle_at_top,_rgba(59,130,246,0.2),_transparent_60%)]"},null,-1)),e[11]||(e[11]=t("div",{class:"absolute inset-0 bg-[radial-gradient(circle_at_bottom,_rgba(125,211,252,0.18),_transparent_55%)]"},null,-1)),t("div",K,[t("div",L,[e[3]||(e[3]=t("div",{class:"absolute inset-0 bg-[url('https://images.unsplash.com/photo-1523580846011-d3a5bc25702b?auto=format&fit=crop&w=900&q=80')] bg-cover bg-center opacity-20"},null,-1)),e[4]||(e[4]=t("div",{class:"absolute inset-0 bg-gradient-to-b from-blue-600/80 via-blue-600/70 to-indigo-700/85"},null,-1)),t("div",U,[h(w(P),{href:s.route("welcome"),class:"inline-flex items-center justify-center rounded-full border border-white/40 px-4 py-1 text-xs font-semibold uppercase tracking-[0.45em] text-white/80 transition hover:border-white hover:text-white"},{default:k(()=>[...e[0]||(e[0]=[y(" Rich English ",-1)])]),_:1},8,["href"]),e[1]||(e[1]=t("div",{class:"space-y-5"},[t("h2",{class:"text-3xl font-semibold leading-tight"}," Check your email for the code. "),t("p",{class:"text-white/75"}," We've sent a 6-digit verification code to your email address. Enter it below to verify your identity. ")],-1))]),t("div",W,[e[2]||(e[2]=t("p",null,"Need a hand? Email us at support@richenglish.com",-1)),t("p",null,"Â© "+f(new Date().getFullYear())+" Rich English",1)])]),t("div",Y,[t("div",A,[h(w(P),{href:s.route("password.request"),class:"inline-flex items-center gap-2 text-sm font-medium text-slate-600 transition hover:text-blue-600"},{default:k(()=>[h(w(M),{class:"h-4 w-4"}),e[5]||(e[5]=y(" Back ",-1))]),_:1},8,["href"]),t("div",G,[e[7]||(e[7]=t("div",{class:"flex h-12 w-12 items-center justify-center rounded-full bg-blue-100 text-lg font-semibold text-blue-600"}," RE ",-1)),e[8]||(e[8]=t("h1",{class:"mt-6 text-3xl font-semibold text-slate-900"}," Enter verification code ",-1)),t("p",H,[e[6]||(e[6]=y(" We sent a code to ",-1)),t("span",J,f(b.value),1)]),t("div",Q,[l.value>0?(v(),c("p",X," Code expires in "+f(j(l.value)),1)):(v(),c("p",Z," Code has expired "))])]),t("form",{onSubmit:z(V,["prevent"]),class:"mt-10 space-y-8"},[p.value?(v(),c("div",ee,f(p.value),1)):I("",!0),o.value?(v(),c("div",te,f(o.value),1)):I("",!0),t("div",se,[(v(!0),c(C,null,F(n.value,(u,d)=>(v(),c("input",{key:d,ref_for:!0,ref:a=>{a&&(m.value[d]=a)},type:"text",inputmode:"numeric",maxlength:"1",value:u,onInput:a=>D(d,a.target.value),onKeydown:a=>S(d,a),onPaste:a=>d===0?T(a):void 0,class:"h-14 w-14 sm:h-16 sm:w-16 rounded-2xl border-2 border-slate-200 bg-white text-center text-xl font-semibold text-slate-900 shadow-sm transition focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-200",autocomplete:"off"},null,40,ae))),128))]),t("button",{type:"submit",disabled:x.value||n.value.some(u=>!u)||l.value<=0,class:"inline-flex w-full items-center justify-center rounded-2xl bg-blue-600 px-6 py-3 text-base font-semibold text-white shadow-lg shadow-blue-600/30 transition hover:bg-blue-500 focus:outline-none focus:ring-4 focus:ring-blue-200 disabled:cursor-not-allowed disabled:bg-blue-300"},f(x.value?"Verifying...":l.value<=0?"Code Expired":"Verify"),9,le),t("div",oe,[t("p",ne,[e[9]||(e[9]=y(" Didn't receive the code? ",-1)),t("button",{type:"button",onClick:O,disabled:g.value,class:"font-semibold text-blue-600 transition hover:text-blue-500 disabled:opacity-50 disabled:cursor-not-allowed underline"},f(g.value?"Resending...":"Resend Email"),9,ie)])])],32)])])])])],64))}};export{fe as default};
