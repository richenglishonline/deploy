import{c as r,b as e,e as l,r as M,p as g,n as p,t as v,a as w,u as _,F as b,j as $,a5 as Y,m as L,o as O,h as E,w as j,g as S}from"./app-Ct4hsfzr.js";import{_ as P}from"./AuthenticatedLayout-D745UfWq.js";import{a as U}from"./api-g2UYsWvT.js";function V(x,f){return l(),r("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15.75 19.5 8.25 12l7.5-7.5"})])}function A(x,f){return l(),r("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m8.25 4.5 7.5 7.5-7.5 7.5"})])}const R={class:"mb-4 flex items-center justify-between"},W={class:"flex gap-1"},q={class:"mb-2 grid grid-cols-7 gap-1"},G={class:"grid grid-cols-7 gap-1"},J=["onClick","disabled","title"],K={__name:"Calendar",props:{dates:{type:Array,default:()=>[]},size:{type:String,default:"md",validator:x=>["sm","md","lg","full"].includes(x)}},emits:["dateClick"],setup(x,{emit:f}){const k=x,B=f,n=M(new Date),y={sm:{container:"w-64",header:"text-sm",dayHeader:"text-xs",dayCell:"h-8 text-xs",navButton:"h-8 w-8"},md:{container:"w-80",header:"text-base",dayHeader:"text-sm",dayCell:"h-10 text-sm",navButton:"h-10 w-10"},lg:{container:"w-96",header:"text-lg",dayHeader:"text-base",dayCell:"h-12 text-base",navButton:"h-12 w-12"},full:{container:"w-full",header:"text-2xl",dayHeader:"text-lg",dayCell:"h-16 text-lg",navButton:"h-12 w-12"}},c=g(()=>y[k.size]),C=g(()=>new Date(n.value.getFullYear(),n.value.getMonth(),1)),D=g(()=>new Date(n.value.getFullYear(),n.value.getMonth()+1,0)),a=g(()=>{const t=[],d=C.value,s=D.value;for(let h=new Date(d);h<=s;h.setDate(h.getDate()+1))t.push(new Date(h));return t}),i=g(()=>C.value.getDay()),o=g(()=>Array(i.value).fill(null)),u=g(()=>n.value.toLocaleDateString("en-US",{month:"long",year:"numeric"})),m=t=>{const d=t.toISOString().split("T")[0];return k.dates.find(s=>(s.date instanceof Date?s.date:new Date(s.date)).toISOString().split("T")[0]===d)||null},T=(t,d)=>t.getFullYear()===d.getFullYear()&&t.getMonth()===d.getMonth(),F=t=>{const d=m(t);d&&d.onClick?d.onClick(d.id,t):d&&B("dateClick",d,t)},z=()=>{const t=new Date(n.value);t.setMonth(t.getMonth()-1),n.value=t},H=()=>{const t=new Date(n.value);t.setMonth(t.getMonth()+1),n.value=t},N=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];return(t,d)=>(l(),r("div",{class:p(["rounded-lg border border-gray-200 bg-white p-4 shadow-sm",c.value.container])},[e("div",R,[e("h2",{class:p(["font-semibold text-gray-900",c.value.header])},v(u.value),3),e("div",W,[e("button",{onClick:z,class:p(["rounded-md hover:bg-gray-100 transition-colors flex items-center justify-center",c.value.navButton]),"aria-label":"Previous month"},[w(_(V),{class:"h-4 w-4"})],2),e("button",{onClick:H,class:p(["rounded-md hover:bg-gray-100 transition-colors flex items-center justify-center",c.value.navButton]),"aria-label":"Next month"},[w(_(A),{class:"h-4 w-4"})],2)])]),e("div",q,[(l(),r(b,null,$(N,s=>e("div",{key:s,class:p(["text-center font-medium text-gray-500",c.value.dayHeader])},v(s),3)),64))]),e("div",G,[(l(!0),r(b,null,$(o.value,(s,h)=>(l(),r("div",{key:`padding-${h}`,class:p(c.value.dayCell)},null,2))),128)),(l(!0),r(b,null,$(a.value,s=>(l(),r("div",{key:s.toISOString(),class:"relative"},[e("button",{onClick:h=>F(s),class:p(["w-full rounded-md transition-colors font-medium",c.value.dayCell,T(s,n.value)?"text-gray-900 hover:bg-gray-100 cursor-pointer":"text-gray-400 opacity-50 cursor-not-allowed",!m(s)&&"opacity-30"]),style:Y(m(s)?.style||{}),disabled:!T(s,n.value)||!m(s),title:m(s)?`${m(s).type||"Class"} (${m(s).id})`:""},v(s.getDate()),15,J)]))),128))])],2))}},Q={class:"flex items-center justify-between"},X=["disabled"],Z={class:"py-10"},I={class:"mx-auto max-w-7xl space-y-6 px-4 sm:px-6 lg:px-8"},ee={key:0,class:"text-center py-12"},te={key:1,class:"space-y-6"},se={class:"rounded-lg border border-gray-200 bg-white p-6 shadow-sm"},ae={class:"rounded-lg border border-gray-200 bg-white p-6 shadow-sm"},ne={key:0,class:"text-center py-8 text-gray-500"},oe={key:1,class:"space-y-2"},re=["onClick"],le={class:"font-medium text-gray-900"},ie={class:"text-sm text-gray-500"},de={class:"flex items-center gap-2"},pe={__name:"Index",setup(x){const f=L(),k=g(()=>f.props.auth?.user?.role??"teacher"),B=g(()=>f.props.auth?.user?.id),n=M(!1),y=M([]),c=M([]),C=a=>{if(!a.start_date)return null;const i=new Date(a.start_date),o={backgroundColor:a.type==="makeupClass"?"#ef4444":a.type==="reoccurring"?"#8b5cf6":"#22c55e",color:"white"};return{id:a.id,date:i,type:a.type,startTime:a.start_time,endTime:a.end_time,style:o,onClick:u=>{a.type==="makeupClass"?S.visit(route("makeup-classes.show",u)):S.visit(route("classes.show",u))},onHover:u=>`
                <div class="text-xs">
                    <p class="font-semibold">${a.student?.name||"Class"}</p>
                    ${u.startTime?`<p class="text-gray-300">${u.startTime} - ${u.endTime}</p>`:""}
                </div>
            `,meta:a}},D=async()=>{n.value=!0;try{const a={teacher_id:k.value==="teacher"?B.value:void 0,limit:1e3},{data:i}=await U.get("/class",{params:a});y.value=i.classes||[],c.value=y.value.map(C).filter(Boolean)}catch(a){console.error("Error fetching classes:",a)}finally{n.value=!1}};return O(D),(a,i)=>(l(),r(b,null,[w(_(E),{title:"My Schedule"}),w(P,null,{header:j(()=>[e("div",Q,[i[0]||(i[0]=e("div",null,[e("h2",{class:"text-xl font-semibold leading-tight text-gray-800"}," My Schedule "),e("p",{class:"text-sm text-gray-500"}," View all your classes in a calendar format. ")],-1)),e("button",{onClick:D,class:"rounded-md bg-indigo-600 px-4 py-2 text-sm font-semibold text-white shadow-sm hover:bg-indigo-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600",disabled:n.value}," Refresh ",8,X)])]),default:j(()=>[e("div",Z,[e("div",I,[n.value?(l(),r("div",ee,[...i[1]||(i[1]=[e("p",{class:"text-gray-500"},"Loading schedule...",-1)])])):(l(),r("div",te,[e("div",se,[w(K,{dates:c.value,size:"full"},null,8,["dates"])]),i[3]||(i[3]=e("div",{class:"rounded-lg border border-gray-200 bg-white p-6 shadow-sm"},[e("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Legend"),e("div",{class:"flex flex-wrap gap-4"},[e("div",{class:"flex items-center gap-2"},[e("div",{class:"w-4 h-4 rounded bg-green-500"}),e("span",{class:"text-sm text-gray-700"},"Scheduled Classes")]),e("div",{class:"flex items-center gap-2"},[e("div",{class:"w-4 h-4 rounded bg-purple-500"}),e("span",{class:"text-sm text-gray-700"},"Recurring Classes")]),e("div",{class:"flex items-center gap-2"},[e("div",{class:"w-4 h-4 rounded bg-red-500"}),e("span",{class:"text-sm text-gray-700"},"Makeup Classes")])])],-1)),e("div",ae,[i[2]||(i[2]=e("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Upcoming Classes",-1)),y.value.length===0?(l(),r("div",ne," No classes scheduled. ")):(l(),r("div",oe,[(l(!0),r(b,null,$(y.value.slice(0,10),o=>(l(),r("div",{key:o.id,class:"flex items-center justify-between p-3 border border-gray-200 rounded-md hover:bg-gray-50 cursor-pointer",onClick:u=>o.type==="makeupClass"?_(S).visit(a.route("makeup-classes.show",o.id)):_(S).visit(a.route("classes.show",o.id))},[e("div",null,[e("div",le,v(o.student?.name||"Unknown Student"),1),e("div",ie,v(o.start_date)+" "+v(o.start_time)+" - "+v(o.end_time),1)]),e("div",de,[e("span",{class:p(["px-2 py-1 text-xs font-medium rounded",o.type==="makeupClass"?"bg-red-100 text-red-800":o.type==="reoccurring"?"bg-purple-100 text-purple-800":"bg-green-100 text-green-800"])},v(o.type),3)])],8,re))),128))]))])]))])])]),_:1})],64))}};export{pe as default};
