import{r as g,i as S,o as B,c as l,a as C,u as b,h as D,w as V,b as e,l as p,e as d,F as y,j as m,t as a,v as f,s as P,d as u,g as N,f as x,k as F}from"./app-Ct4hsfzr.js";import{_ as M}from"./AuthenticatedLayout-D745UfWq.js";import{a as _}from"./api-g2UYsWvT.js";const U={class:"flex items-center justify-between"},$=["disabled"],j={class:"py-10"},E={class:"mx-auto max-w-7xl space-y-6 px-4 sm:px-6 lg:px-8"},L={class:"rounded-lg border border-gray-200 bg-white p-6 shadow-sm"},O={class:"grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-4"},I=["value"],J=["value"],q={class:"flex items-end gap-3"},z=["disabled"],G=["disabled"],H={class:"overflow-hidden rounded-lg border border-gray-200 bg-white shadow-sm"},K={class:"overflow-x-auto"},Q={class:"min-w-full divide-y divide-gray-200"},W={class:"divide-y divide-gray-200 bg-white"},X={key:0},Y=["onClick"],Z={class:"px-6 py-4"},ee={class:"font-medium text-gray-900"},se={class:"text-gray-500"},te={class:"text-xs text-gray-400"},oe={class:"px-6 py-4"},le={class:"text-xs text-gray-400"},de={key:0,class:"text-xs text-gray-500"},ae={class:"px-6 py-4"},ie={class:"text-sm"},ne=["href"],re={key:1},ue={class:"text-xs text-gray-500"},ce={class:"px-6 py-4"},ge={class:"space-y-1 text-xs text-gray-500"},pe={key:0},xe={key:1},ye={key:2},ve=["onClick"],be={key:0,class:"flex flex-col items-center justify-between gap-4 border-t border-gray-100 px-6 py-4 text-sm text-gray-600 sm:flex-row"},me={class:"flex items-center gap-2"},fe=["disabled"],_e=["disabled"],Ve={__name:"Index",setup(he){const r=g(!1),v=g([]),n=g(null),h=g([]),k=g([]),o=S({teacher_id:"",student_id:"",type:"",start_date:"",end_date:"",page:1,limit:10}),R=async()=>{const[i,s]=await Promise.all([_.get("/dashboard/teachers"),_.get("/dashboard/students")]);h.value=i.data,k.value=s.data},c=async()=>{r.value=!0;try{const{data:i}=await _.get("/class",{params:o});v.value=i.classes,n.value=i.pagination}catch(i){console.error(i)}finally{r.value=!1}},w=i=>{n.value&&(i<1||i>n.value.totalPages||(o.page=i,c()))},T=()=>{o.teacher_id="",o.student_id="",o.type="",o.start_date="",o.end_date="",o.page=1,c()};return B(async()=>{await R(),await c()}),(i,s)=>(d(),l(y,null,[C(b(D),{title:"Classes"}),C(M,null,{header:V(()=>[e("div",U,[s[8]||(s[8]=e("div",null,[e("h2",{class:"text-xl font-semibold leading-tight text-gray-800"}," Classes "),e("p",{class:"text-sm text-gray-500"}," Review upcoming schedules, recurring lessons, and make-up classes. ")],-1)),e("button",{onClick:c,class:"rounded-md bg-indigo-600 px-4 py-2 text-sm font-semibold text-white shadow-sm hover:bg-indigo-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600",disabled:r.value}," Refresh ",8,$)])]),default:V(()=>[e("div",j,[e("div",E,[e("div",L,[e("form",O,[e("div",null,[s[10]||(s[10]=e("label",{class:"block text-sm font-medium text-gray-700"}," Teacher ",-1)),p(e("select",{"onUpdate:modelValue":s[0]||(s[0]=t=>o.teacher_id=t),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm"},[s[9]||(s[9]=e("option",{value:""},"Any",-1)),(d(!0),l(y,null,m(h.value,t=>(d(),l("option",{key:t.id,value:t.id},a(t.name),9,I))),128))],512),[[f,o.teacher_id]])]),e("div",null,[s[12]||(s[12]=e("label",{class:"block text-sm font-medium text-gray-700"}," Student ",-1)),p(e("select",{"onUpdate:modelValue":s[1]||(s[1]=t=>o.student_id=t),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm"},[s[11]||(s[11]=e("option",{value:""},"Any",-1)),(d(!0),l(y,null,m(k.value,t=>(d(),l("option",{key:t.id,value:t.id},a(t.name),9,J))),128))],512),[[f,o.student_id]])]),e("div",null,[s[14]||(s[14]=e("label",{class:"block text-sm font-medium text-gray-700"}," Type ",-1)),p(e("select",{"onUpdate:modelValue":s[2]||(s[2]=t=>o.type=t),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm"},[...s[13]||(s[13]=[e("option",{value:""},"Any",-1),e("option",{value:"schedule"},"Schedule",-1),e("option",{value:"reoccurring"},"Recurring",-1),e("option",{value:"makeupClass"},"Make-up",-1)])],512),[[f,o.type]])]),e("div",null,[s[15]||(s[15]=e("label",{class:"block text-sm font-medium text-gray-700"}," Start After ",-1)),p(e("input",{"onUpdate:modelValue":s[3]||(s[3]=t=>o.start_date=t),type:"date",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm"},null,512),[[P,o.start_date]])]),e("div",null,[s[16]||(s[16]=e("label",{class:"block text-sm font-medium text-gray-700"}," End Before ",-1)),p(e("input",{"onUpdate:modelValue":s[4]||(s[4]=t=>o.end_date=t),type:"date",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm"},null,512),[[P,o.end_date]])]),e("div",q,[e("button",{type:"button",onClick:c,class:"flex-1 rounded-md bg-indigo-600 px-4 py-2 text-sm font-semibold text-white shadow-sm hover:bg-indigo-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600",disabled:r.value}," Apply Filters ",8,z),e("button",{type:"button",onClick:T,class:"flex-1 rounded-md border border-gray-300 px-4 py-2 text-sm font-semibold text-gray-700 hover:bg-gray-50",disabled:r.value}," Reset ",8,G)])])]),e("div",H,[e("div",K,[e("table",Q,[s[22]||(s[22]=e("thead",{class:"bg-gray-50"},[e("tr",{class:"text-left text-xs font-semibold uppercase tracking-wider text-gray-500"},[e("th",{scope:"col",class:"px-6 py-3"}," Class "),e("th",{scope:"col",class:"px-6 py-3"}," Schedule "),e("th",{scope:"col",class:"px-6 py-3"}," Platform "),e("th",{scope:"col",class:"px-6 py-3"}," Details "),e("th",{scope:"col",class:"px-6 py-3"}," Actions ")])],-1)),e("tbody",W,[!r.value&&v.value.length===0?(d(),l("tr",X,[...s[17]||(s[17]=[e("td",{colspan:"5",class:"px-6 py-4 text-center text-sm text-gray-500"}," No classes found. ",-1)])])):u("",!0),(d(!0),l(y,null,m(v.value,t=>(d(),l("tr",{key:t.id,class:"text-sm text-gray-700 hover:bg-gray-50 cursor-pointer",onClick:A=>b(N).visit(i.route("classes.show",t.id))},[e("td",Z,[e("div",ee,a(t.student?.name??"—"),1),e("div",se," Teacher: "+a(t.teacher?.name??"—"),1),e("div",te," Type: "+a(t.type),1)]),e("td",oe,[e("div",null,[x(a(t.start_date??"—")+" ",1),e("span",le," ("+a(t.start_time)+" - "+a(t.end_time)+") ",1)]),t.type==="reoccurring"?(d(),l("div",de," Days: "+a(t.reoccurring_days?.join(", ")??"—"),1)):u("",!0)]),e("td",ae,[e("div",ie,[s[18]||(s[18]=x(" Link: ",-1)),t.platform_link?(d(),l("a",{key:0,href:t.platform_link,target:"_blank",class:"text-indigo-600 hover:text-indigo-500"}," Join ",8,ne)):(d(),l("span",re,"—"))]),e("div",ue," Duration: "+a(t.duration)+" mins ",1)]),e("td",ce,[e("div",ge,[t.reason?(d(),l("div",pe,[s[19]||(s[19]=e("span",{class:"font-semibold text-gray-600"},"Reason:",-1)),x(" "+a(t.reason),1)])):u("",!0),t.note?(d(),l("div",xe,[s[20]||(s[20]=e("span",{class:"font-semibold text-gray-600"},"Note:",-1)),x(" "+a(t.note),1)])):u("",!0),t.book?(d(),l("div",ye,[s[21]||(s[21]=e("span",{class:"font-semibold text-gray-600"},"Book:",-1)),x(" "+a(t.book.title),1)])):u("",!0)])]),e("td",{class:"px-6 py-4",onClick:s[5]||(s[5]=F(()=>{},["stop"]))},[e("button",{onClick:A=>b(N).visit(i.route("classes.show",t.id)),class:"rounded-md bg-blue-600 px-3 py-1.5 text-xs font-medium text-white hover:bg-blue-700"}," View ",8,ve)])],8,Y))),128))])])]),n.value?(d(),l("div",be,[e("div",null," Page "+a(n.value.page)+" of "+a(n.value.totalPages??1),1),e("div",me,[e("button",{onClick:s[6]||(s[6]=t=>w(n.value.page-1)),class:"rounded-md border border-gray-300 px-3 py-1 hover:bg-gray-50",disabled:r.value||n.value.page===1}," Previous ",8,fe),e("button",{onClick:s[7]||(s[7]=t=>w(n.value.page+1)),class:"rounded-md border border-gray-300 px-3 py-1 hover:bg-gray-50",disabled:r.value||n.value.page===n.value.totalPages}," Next ",8,_e)])])):u("",!0)])])])]),_:1})],64))}};export{Ve as default};
