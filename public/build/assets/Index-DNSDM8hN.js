import{c as r,b as t,e as c,m as E,p as R,r as f,i as Z,o as z,a as p,u as m,h as L,w as _,d as w,t as l,l as y,F as k,j as D,v as M,s as T,g as A,n as H,k as O,f as q}from"./app-Ct4hsfzr.js";import{h as F,_ as G}from"./AuthenticatedLayout-D745UfWq.js";import{a as U}from"./api-g2UYsWvT.js";import{_ as J}from"./Button-oQerMwbE.js";function $(I,C){return c(),r("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3 13.125C3 12.504 3.504 12 4.125 12h2.25c.621 0 1.125.504 1.125 1.125v6.75C7.5 20.496 6.996 21 6.375 21h-2.25A1.125 1.125 0 0 1 3 19.875v-6.75ZM9.75 8.625c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125v11.25c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V8.625ZM16.5 4.125c0-.621.504-1.125 1.125-1.125h2.25C20.496 3 21 3.504 21 4.125v15.75c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V4.125Z"})])}const K={class:"flex items-center justify-between"},Q=["disabled"],W={class:"py-10"},X={class:"mx-auto max-w-7xl space-y-6 px-4 sm:px-6 lg:px-8"},Y={key:0,class:"grid grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-4"},tt={class:"rounded-lg border border-gray-200 bg-white p-6 shadow-sm"},et={class:"flex items-center"},st={class:"flex-shrink-0"},ot={class:"ml-4"},at={class:"text-2xl font-semibold text-gray-900"},lt={class:"rounded-lg border border-gray-200 bg-white p-6 shadow-sm"},it={class:"flex items-center"},nt={class:"flex-shrink-0"},dt={class:"ml-4"},rt={class:"text-2xl font-semibold text-gray-900"},ct={class:"rounded-lg border border-gray-200 bg-white p-6 shadow-sm"},ut={class:"flex items-center"},gt={class:"flex-shrink-0"},pt={class:"ml-4"},mt={class:"text-2xl font-semibold text-gray-900"},vt={class:"rounded-lg border border-gray-200 bg-white p-6 shadow-sm"},xt={class:"flex items-center"},ft={class:"flex-shrink-0"},ht={class:"ml-4"},yt={class:"text-2xl font-semibold text-gray-900"},bt={class:"rounded-lg border border-gray-200 bg-white p-6 shadow-sm"},_t={class:"grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-4"},wt=["value"],kt={class:"flex items-end gap-3 sm:col-span-2 lg:col-span-4"},Ct=["disabled"],Pt=["disabled"],St={class:"overflow-hidden rounded-lg border border-gray-200 bg-white shadow-sm"},Vt={class:"overflow-x-auto"},Dt={class:"min-w-full divide-y divide-gray-200"},Mt={class:"divide-y divide-gray-200 bg-white"},Tt={key:0},At=["onClick"],Ft={class:"px-6 py-4"},Ut={class:"font-medium text-gray-900"},$t={class:"px-6 py-4"},It={class:"px-6 py-4"},Nt={class:"px-6 py-4"},jt={class:"px-6 py-4 font-semibold text-gray-900"},Bt={class:"px-6 py-4"},Et={class:"px-6 py-4"},Rt={key:0,class:"flex flex-col items-center justify-between gap-4 border-t border-gray-100 px-6 py-4 text-sm text-gray-600 sm:flex-row"},Zt={class:"flex items-center gap-2"},zt=["disabled"],Lt=["disabled"],Jt={__name:"Index",setup(I){const C=E();R(()=>C.props.auth?.user?.role==="super-admin");const u=f(!1),n=f([]),d=f(null),P=f([]),v=f(null),a=Z({teacher_id:"",status:"",start_date:"",end_date:"",page:1,limit:20}),N=async()=>{try{const o=await U.get("/dashboard/teachers");P.value=o.data}catch(o){console.error("Error loading filters:",o)}},x=async()=>{u.value=!0;try{const{data:o}=await U.get("/payout",{params:a});n.value=o.payouts,d.value=o.pagination;const e=n.value.reduce((i,g)=>i+(parseFloat(g.amount)||0),0),s=n.value.reduce((i,g)=>i+(parseInt(g.duration)||0),0),b=n.value.reduce((i,g)=>i+(parseInt(g.total_class)||0),0),B=n.value.reduce((i,g)=>i+(parseFloat(g.incentives)||0),0);v.value={total_payouts:n.value.length,total_amount:e,total_duration:s,total_classes:b,total_incentives:B,pending:n.value.filter(i=>i.status==="pending").length,processing:n.value.filter(i=>i.status==="processing").length,completed:n.value.filter(i=>i.status==="completed").length}}catch(o){console.error("Error fetching payouts:",o)}finally{u.value=!1}},S=o=>{d.value&&(o<1||o>d.value.totalPages||(a.page=o,x()))},j=()=>{a.teacher_id="",a.status="",a.start_date="",a.end_date="",a.page=1,x()},V=o=>o?new Date(o).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"—",h=o=>o?new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(o):"$0.00";return z(async()=>{await N(),await x()}),(o,e)=>(c(),r(k,null,[p(m(L),{title:"Salary Management"}),p(G,null,{header:_(()=>[t("div",K,[e[7]||(e[7]=t("div",null,[t("h2",{class:"text-xl font-semibold leading-tight text-gray-800"}," Salary Management "),t("p",{class:"text-sm text-gray-500"}," Manage teacher salaries and payouts with comprehensive analytics. ")],-1)),t("button",{onClick:x,class:"rounded-md bg-indigo-600 px-4 py-2 text-sm font-semibold text-white shadow-sm hover:bg-indigo-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600",disabled:u.value}," Refresh ",8,Q)])]),default:_(()=>[t("div",W,[t("div",X,[v.value?(c(),r("div",Y,[t("div",tt,[t("div",et,[t("div",st,[p(m(F),{class:"h-8 w-8 text-green-600"})]),t("div",ot,[e[8]||(e[8]=t("p",{class:"text-sm font-medium text-gray-500"},"Total Amount",-1)),t("p",at,l(h(v.value.total_amount)),1)])])]),t("div",lt,[t("div",it,[t("div",nt,[p(m($),{class:"h-8 w-8 text-blue-600"})]),t("div",dt,[e[9]||(e[9]=t("p",{class:"text-sm font-medium text-gray-500"},"Total Hours",-1)),t("p",rt,l(v.value.total_duration)+"h ",1)])])]),t("div",ct,[t("div",ut,[t("div",gt,[p(m($),{class:"h-8 w-8 text-purple-600"})]),t("div",pt,[e[10]||(e[10]=t("p",{class:"text-sm font-medium text-gray-500"},"Total Classes",-1)),t("p",mt,l(v.value.total_classes),1)])])]),t("div",vt,[t("div",xt,[t("div",ft,[p(m(F),{class:"h-8 w-8 text-yellow-600"})]),t("div",ht,[e[11]||(e[11]=t("p",{class:"text-sm font-medium text-gray-500"},"Total Incentives",-1)),t("p",yt,l(h(v.value.total_incentives)),1)])])])])):w("",!0),t("div",bt,[t("form",_t,[t("div",null,[e[13]||(e[13]=t("label",{class:"block text-sm font-medium text-gray-700"}," Teacher ",-1)),y(t("select",{"onUpdate:modelValue":e[0]||(e[0]=s=>a.teacher_id=s),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm"},[e[12]||(e[12]=t("option",{value:""},"All Teachers",-1)),(c(!0),r(k,null,D(P.value,s=>(c(),r("option",{key:s.id,value:s.id},l(s.name),9,wt))),128))],512),[[M,a.teacher_id]])]),t("div",null,[e[15]||(e[15]=t("label",{class:"block text-sm font-medium text-gray-700"}," Status ",-1)),y(t("select",{"onUpdate:modelValue":e[1]||(e[1]=s=>a.status=s),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm"},[...e[14]||(e[14]=[t("option",{value:""},"All Statuses",-1),t("option",{value:"pending"},"Pending",-1),t("option",{value:"processing"},"Processing",-1),t("option",{value:"completed"},"Completed",-1)])],512),[[M,a.status]])]),t("div",null,[e[16]||(e[16]=t("label",{class:"block text-sm font-medium text-gray-700"}," Start Date ",-1)),y(t("input",{"onUpdate:modelValue":e[2]||(e[2]=s=>a.start_date=s),type:"date",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm"},null,512),[[T,a.start_date]])]),t("div",null,[e[17]||(e[17]=t("label",{class:"block text-sm font-medium text-gray-700"}," End Date ",-1)),y(t("input",{"onUpdate:modelValue":e[3]||(e[3]=s=>a.end_date=s),type:"date",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm"},null,512),[[T,a.end_date]])]),t("div",kt,[t("button",{type:"button",onClick:x,class:"flex-1 rounded-md bg-indigo-600 px-4 py-2 text-sm font-semibold text-white shadow-sm hover:bg-indigo-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600",disabled:u.value}," Apply Filters ",8,Ct),t("button",{type:"button",onClick:j,class:"flex-1 rounded-md border border-gray-300 px-4 py-2 text-sm font-semibold text-gray-700 hover:bg-gray-50",disabled:u.value}," Reset ",8,Pt)])])]),t("div",St,[t("div",Vt,[t("table",Dt,[e[20]||(e[20]=t("thead",{class:"bg-gray-50"},[t("tr",{class:"text-left text-xs font-semibold uppercase tracking-wider text-gray-500"},[t("th",{scope:"col",class:"px-6 py-3"},"Teacher"),t("th",{scope:"col",class:"px-6 py-3"},"Period"),t("th",{scope:"col",class:"px-6 py-3"},"Duration"),t("th",{scope:"col",class:"px-6 py-3"},"Classes"),t("th",{scope:"col",class:"px-6 py-3"},"Amount"),t("th",{scope:"col",class:"px-6 py-3"},"Incentives"),t("th",{scope:"col",class:"px-6 py-3"},"Status"),t("th",{scope:"col",class:"px-6 py-3"},"Actions")])],-1)),t("tbody",Mt,[!u.value&&n.value.length===0?(c(),r("tr",Tt,[...e[18]||(e[18]=[t("td",{colspan:"8",class:"px-6 py-4 text-center text-sm text-gray-500"}," No payouts found. ",-1)])])):w("",!0),(c(!0),r(k,null,D(n.value,s=>(c(),r("tr",{key:s.id,class:"text-sm text-gray-700 hover:bg-gray-50 cursor-pointer",onClick:b=>m(A).visit(o.route("payouts.show",s.id))},[t("td",Ft,[t("div",Ut,l(s.teacher?.name??"Unknown"),1)]),t("td",$t,l(V(s.start_date))+" - "+l(V(s.end_date)),1),t("td",It,l(s.duration??"—")+" hours ",1),t("td",Nt,l(s.total_class??"—"),1),t("td",jt,l(h(s.amount)),1),t("td",Bt,l(h(s.incentives)),1),t("td",Et,[t("span",{class:H(["px-2 py-1 text-xs font-medium rounded",s.status==="completed"?"bg-green-100 text-green-800":s.status==="processing"?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800"])},l(s.status),3)]),t("td",{class:"px-6 py-4",onClick:e[4]||(e[4]=O(()=>{},["stop"]))},[p(J,{onClick:b=>m(A).visit(o.route("payouts.show",s.id)),variant:"outline",size:"sm"},{default:_(()=>[...e[19]||(e[19]=[q(" View ",-1)])]),_:1},8,["onClick"])])],8,At))),128))])])]),d.value?(c(),r("div",Rt,[t("div",null," Page "+l(d.value.page)+" of "+l(d.value.totalPages??1),1),t("div",Zt,[t("button",{onClick:e[5]||(e[5]=s=>S(d.value.page-1)),class:"rounded-md border border-gray-300 px-3 py-1 hover:bg-gray-50",disabled:u.value||d.value.page===1}," Previous ",8,zt),t("button",{onClick:e[6]||(e[6]=s=>S(d.value.page+1)),class:"rounded-md border border-gray-300 px-3 py-1 hover:bg-gray-50",disabled:u.value||d.value.page===d.value.totalPages}," Next ",8,Lt)])])):w("",!0)])])])]),_:1})],64))}};export{Jt as default};
