import{u as V,j as _,r as f,o as B,c as a,a as d,b as u,h as I,w as c,d as e,g as l,k as n,f as i,t as o,i as m,F as N}from"./app-Cmmq__Tw.js";import{g as U,a as A,_ as F}from"./AuthenticatedLayout-B2GbnFPi.js";import{a as b}from"./api-BS-ONIJM.js";import{_ as v}from"./Button-D72KtQR-.js";import{r as L}from"./ArrowLeftIcon-DrKpDvpq.js";const T={class:"flex items-center justify-between"},E={class:"flex items-center gap-4"},G={key:0,class:"flex items-center gap-2"},j={class:"py-10"},z={class:"mx-auto max-w-7xl space-y-6 px-4 sm:px-6 lg:px-8"},O={key:0,class:"text-center py-12"},q={key:1,class:"space-y-6"},M={class:"rounded-lg border border-gray-200 bg-white p-6 shadow-sm"},P={class:"text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2"},Y={key:0,class:"w-full"},H=["src"],J={key:1,class:"text-center py-12 text-gray-500"},K={key:0,class:"mt-2"},Q=["href"],W={class:"rounded-lg border border-gray-200 bg-white p-6 shadow-sm"},X={class:"grid grid-cols-1 gap-4 sm:grid-cols-2"},Z={class:"mt-1 text-sm text-gray-900"},ee={class:"mt-1 text-sm text-gray-900"},te={key:0,class:"text-gray-500"},se={class:"mt-1 text-sm text-gray-900"},ae={key:0},le={class:"mt-1 text-sm text-gray-900"},oe=["href"],re={key:0,class:"rounded-lg border border-gray-200 bg-white p-6 shadow-sm"},de={class:"text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2"},ne={class:"grid grid-cols-1 gap-4 sm:grid-cols-2"},ie={class:"mt-1 text-sm text-gray-900"},ue={key:0,class:"text-gray-500"},ce={class:"mt-1 text-sm text-gray-900"},me={key:0,class:"text-gray-500"},ge={class:"mt-1 text-sm text-gray-900"},ve={key:0},xe={class:"mt-1 text-sm text-gray-900"},ye={class:"mt-4"},fe={key:1,class:"rounded-lg border border-gray-200 bg-white p-6 shadow-sm"},pe={class:"grid grid-cols-1 gap-4 sm:grid-cols-2"},he={class:"mt-1 text-sm text-gray-900"},_e={class:"mt-1 text-sm text-gray-900"},be={class:"mt-4"},ke={key:2,class:"text-center py-12"},Re={__name:"Show",props:{recordingId:{type:[String,Number],required:!0}},setup(k){const p=k,w=V(),D=_(()=>w.props.auth?.user?.role??"teacher"),S=_(()=>["super-admin","admin"].includes(D.value)),x=f(!0),s=f(null),g=f(!1),$=async()=>{x.value=!0;try{const{data:r}=await b.get(`/recording/${p.recordingId}`);s.value=r}catch(r){console.error("Error fetching recording:",r)}finally{x.value=!1}},C=async()=>{if(confirm("Are you sure you want to delete this recording? This action cannot be undone.")){g.value=!0;try{await b.delete(`/recording/${p.recordingId}`),m.visit(route("recordings.index"))}catch(r){console.error("Error deleting recording:",r),alert("Failed to delete recording")}finally{g.value=!1}}},h=()=>s.value?s.value.drive?.link?s.value.drive.link:s.value.path?`/storage/${s.value.path}`:null:null,R=r=>r?new Date(r).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}):"—";return B($),(r,t)=>(l(),a(N,null,[d(u(I),{title:"Recording Details"}),d(F,null,{header:c(()=>[e("div",T,[e("div",E,[e("button",{onClick:t[0]||(t[0]=y=>u(m).visit(r.route("recordings.index"))),class:"rounded-md p-2 text-gray-400 hover:bg-gray-100 hover:text-gray-600"},[d(u(L),{class:"h-5 w-5"})]),t[4]||(t[4]=e("div",null,[e("h2",{class:"text-xl font-semibold leading-tight text-gray-800"}," Recording Details "),e("p",{class:"text-sm text-gray-500"}," View and manage recording information. ")],-1))]),S.value?(l(),a("div",G,[d(v,{onClick:C,variant:"destructive",disabled:g.value},{default:c(()=>[i(o(g.value?"Deleting...":"Delete Recording"),1)]),_:1},8,["disabled"])])):n("",!0)])]),default:c(()=>[e("div",j,[e("div",z,[x.value?(l(),a("div",O,[...t[5]||(t[5]=[e("p",{class:"text-gray-500"},"Loading recording details...",-1)])])):s.value?(l(),a("div",q,[e("div",M,[e("h3",P,[d(u(U),{class:"h-5 w-5"}),t[6]||(t[6]=i(" Recording ",-1))]),h()?(l(),a("div",Y,[e("video",{src:h(),controls:"",class:"w-full rounded-lg",style:{"max-height":"600px"}}," Your browser does not support the video tag. ",8,H)])):(l(),a("div",J,[t[7]||(t[7]=e("p",null,"Recording file not available.",-1)),s.value.drive?.link?(l(),a("p",K,[e("a",{href:s.value.drive.link,target:"_blank",class:"text-blue-600 hover:text-blue-800"}," Open in Google Drive ",8,Q)])):n("",!0)]))]),e("div",W,[t[12]||(t[12]=e("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Recording Information",-1)),e("dl",X,[e("div",null,[t[8]||(t[8]=e("dt",{class:"text-sm font-medium text-gray-500"},"Filename",-1)),e("dd",Z,o(s.value.filename??"—"),1)]),e("div",null,[t[9]||(t[9]=e("dt",{class:"text-sm font-medium text-gray-500"},"Uploaded By",-1)),e("dd",ee,[i(o(s.value.uploader?.name??"Unknown")+" ",1),s.value.uploader?.email?(l(),a("span",te," ("+o(s.value.uploader.email)+") ",1)):n("",!0)])]),e("div",null,[t[10]||(t[10]=e("dt",{class:"text-sm font-medium text-gray-500"},"Uploaded At",-1)),e("dd",se,o(R(s.value.created_at)),1)]),s.value.drive?.link?(l(),a("div",ae,[t[11]||(t[11]=e("dt",{class:"text-sm font-medium text-gray-500"},"Google Drive Link",-1)),e("dd",le,[e("a",{href:s.value.drive.link,target:"_blank",class:"text-blue-600 hover:text-blue-800"}," Open in Google Drive ",8,oe)])])):n("",!0)])]),s.value.classSchedule?(l(),a("div",re,[e("h3",de,[d(u(A),{class:"h-5 w-5"}),t[13]||(t[13]=i(" Class Information ",-1))]),e("dl",ne,[e("div",null,[t[14]||(t[14]=e("dt",{class:"text-sm font-medium text-gray-500"},"Teacher",-1)),e("dd",ie,[i(o(s.value.classSchedule.teacher?.name??"—")+" ",1),s.value.classSchedule.teacher?.email?(l(),a("span",ue," ("+o(s.value.classSchedule.teacher.email)+") ",1)):n("",!0)])]),e("div",null,[t[15]||(t[15]=e("dt",{class:"text-sm font-medium text-gray-500"},"Student",-1)),e("dd",ce,[i(o(s.value.classSchedule.student?.name??"—")+" ",1),s.value.classSchedule.student?.email?(l(),a("span",me," ("+o(s.value.classSchedule.student.email)+") ",1)):n("",!0)])]),e("div",null,[t[16]||(t[16]=e("dt",{class:"text-sm font-medium text-gray-500"},"Date & Time",-1)),e("dd",ge,o(s.value.classSchedule.start_date)+" "+o(s.value.classSchedule.start_time)+" - "+o(s.value.classSchedule.end_time),1)]),s.value.classSchedule.book?(l(),a("div",ve,[t[17]||(t[17]=e("dt",{class:"text-sm font-medium text-gray-500"},"Book",-1)),e("dd",xe,o(s.value.classSchedule.book.title),1)])):n("",!0)]),e("div",ye,[d(v,{onClick:t[1]||(t[1]=y=>u(m).visit(r.route("classes.show",s.value.classSchedule.id))),variant:"outline",size:"sm"},{default:c(()=>[...t[18]||(t[18]=[i(" View Class Details ",-1)])]),_:1})])])):n("",!0),s.value.attendance?(l(),a("div",fe,[t[22]||(t[22]=e("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Attendance Information",-1)),e("dl",pe,[e("div",null,[t[19]||(t[19]=e("dt",{class:"text-sm font-medium text-gray-500"},"Date",-1)),e("dd",he,o(s.value.attendance.date??"—"),1)]),e("div",null,[t[20]||(t[20]=e("dt",{class:"text-sm font-medium text-gray-500"},"Duration",-1)),e("dd",_e,o(s.value.attendance.duration??"—")+" minutes ",1)])]),e("div",be,[d(v,{onClick:t[2]||(t[2]=y=>u(m).visit(r.route("attendance.show",s.value.attendance.id))),variant:"outline",size:"sm"},{default:c(()=>[...t[21]||(t[21]=[i(" View Attendance Details ",-1)])]),_:1})])])):n("",!0)])):(l(),a("div",ke,[t[24]||(t[24]=e("p",{class:"text-gray-500"},"Recording not found.",-1)),d(v,{onClick:t[3]||(t[3]=y=>u(m).visit(r.route("recordings.index"))),variant:"outline",class:"mt-4"},{default:c(()=>[...t[23]||(t[23]=[i(" Back to List ",-1)])]),_:1})]))])])]),_:1})],64))}};export{Re as default};
