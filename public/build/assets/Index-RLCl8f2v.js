import{u as N,r as g,o as j,c as _,a,b as r,h as T,w as o,d as e,e as V,i as d,f,t as i,g as c,k as B,F as D}from"./app-BiSPCPuo.js";import{a as h,d as E,e as M,b as F,_ as L}from"./AuthenticatedLayout-57Q77M7z.js";import{_ as I}from"./AdvancedTable-5fi55ECo.js";import{_ as p}from"./Button-cwC7HEN4.js";import{_ as P}from"./Badge-DAiRCop6.js";import{_ as u}from"./Card-B0sMFwFC.js";import{a as x}from"./api-BtR7IrG5.js";import{r as U}from"./PlusIcon-BOqTvPvA.js";import{r as q}from"./CheckCircleIcon-C_xlp5Nk.js";import{r as z}from"./XCircleIcon-nZfKkOB3.js";import{r as G}from"./EyeIcon-BomQU5Ge.js";import{r as H}from"./PencilIcon-B9iUmX0Q.js";import"./ArrowDownTrayIcon-DICVMDSG.js";import"./ArrowUpIcon-IEJdmouC.js";import"./TrashIcon-DlbRnS0G.js";const J={class:"space-y-6 pb-8"},K={class:"flex items-center justify-between"},O={class:"flex gap-3"},Q={class:"grid grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-4"},R={class:"flex items-center justify-between"},W={class:"mt-2 text-3xl font-semibold text-gray-900"},X={class:"rounded-lg bg-blue-50 p-3"},Y={class:"flex items-center justify-between"},Z={class:"mt-2 text-3xl font-semibold text-gray-900"},ee={class:"rounded-lg bg-yellow-50 p-3"},te={class:"flex items-center justify-between"},se={class:"mt-2 text-3xl font-semibold text-gray-900"},ae={class:"rounded-lg bg-green-50 p-3"},le={class:"flex items-center justify-between"},oe={class:"mt-2 text-3xl font-semibold text-gray-900"},re={class:"rounded-lg bg-red-50 p-3"},ie={class:"flex items-center gap-3"},ne={class:"flex h-10 w-10 items-center justify-center rounded-lg bg-gradient-to-br from-blue-500 to-indigo-600"},de={class:"font-medium text-gray-900"},ce={key:0,class:"text-xs text-gray-500"},ue={class:"flex items-center gap-2"},me={class:"text-gray-900"},ge={class:"flex items-center gap-2"},_e={class:"text-gray-900"},fe={class:"text-gray-900"},he={class:"text-gray-900"},pe={class:"flex items-center justify-end gap-2"},xe=["onClick"],ye=["onClick"],ve={key:1,class:"space-y-4"},Le={__name:"Index",setup(be){N();const m=g(!1),n=g([]),y=g(null),v=[{key:"class_info",label:"Class",sortable:!1},{key:"teacher",label:"Teacher",sortable:!0},{key:"student",label:"Student",sortable:!0},{key:"book",label:"Book",sortable:!0},{key:"schedule",label:"Schedule",sortable:!0},{key:"status",label:"Status",sortable:!0,align:"center"}],b=[{key:"status",label:"Status",type:"select",options:[{value:"",label:"All Statuses"},{value:"scheduled",label:"Scheduled"},{value:"completed",label:"Completed"},{value:"cancelled",label:"Cancelled"}]}],k=async()=>{m.value=!0;try{const{data:l}=await x.get("/admin/classes");n.value=Array.isArray(l.classes||l)?(l.classes||l).map(t=>({...t,teacher:t.teacher?`${t.teacher.first_name||""} ${t.teacher.last_name||""}`.trim()||t.teacher.email:"N/A",student:t.student?`${t.student.first_name||""} ${t.student.last_name||""}`.trim()||t.student.email:"N/A",book:t.book?.title||"N/A",schedule:t.start_time?`${new Date(t.start_time).toLocaleDateString()} ${new Date(t.start_time).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}`:"N/A",status:t.status||(t.completed?"completed":"scheduled")})):[]}catch(l){console.error("Error fetching classes:",l),n.value=[]}finally{m.value=!1}},w=async()=>{try{const{data:l}=await x.get("/dashboard/stats");y.value=l?.stats||{}}catch(l){console.error("Error fetching stats:",l)}},C=()=>{d.visit("/admin/classes/create")},$=l=>{d.visit(`/admin/classes/${l.id}`)},S=l=>{d.visit(`/admin/classes/${l.id}/edit`)};return j(()=>{k(),w()}),(l,t)=>(c(),_(D,null,[a(r(T),{title:"Classes Management"}),a(L,null,{default:o(()=>[e("div",J,[e("div",K,[t[3]||(t[3]=e("div",null,[e("h1",{class:"text-3xl font-bold text-gray-900"},"Classes Management"),e("p",{class:"mt-1 text-sm text-gray-500"}," Create and manage class schedules ")],-1)),e("div",O,[a(p,{onClick:t[0]||(t[0]=()=>r(d).visit("/admin/classes/schedule")),variant:"secondary"},{default:o(()=>[a(r(h),{class:"h-5 w-5 mr-2"}),t[1]||(t[1]=f(" Schedule ",-1))]),_:1}),a(p,{onClick:C,variant:"primary"},{default:o(()=>[a(r(U),{class:"h-5 w-5 mr-2"}),t[2]||(t[2]=f(" Create Class ",-1))]),_:1})])]),e("div",Q,[a(u,{class:"p-6"},{default:o(()=>[e("div",R,[e("div",null,[t[4]||(t[4]=e("p",{class:"text-sm font-medium text-gray-600"},"Total Classes",-1)),e("p",W,i(n.value.length),1)]),e("div",X,[a(r(h),{class:"h-8 w-8 text-blue-600"})])])]),_:1}),a(u,{class:"p-6"},{default:o(()=>[e("div",Y,[e("div",null,[t[5]||(t[5]=e("p",{class:"text-sm font-medium text-gray-600"},"Scheduled",-1)),e("p",Z,i(n.value.filter(s=>s.status==="scheduled").length),1),t[6]||(t[6]=e("p",{class:"mt-1 text-xs text-gray-500"},"Upcoming",-1))]),e("div",ee,[a(r(E),{class:"h-8 w-8 text-yellow-600"})])])]),_:1}),a(u,{class:"p-6"},{default:o(()=>[e("div",te,[e("div",null,[t[7]||(t[7]=e("p",{class:"text-sm font-medium text-gray-600"},"Completed",-1)),e("p",se,i(n.value.filter(s=>s.status==="completed").length),1),t[8]||(t[8]=e("p",{class:"mt-1 text-xs text-gray-500"},"This month",-1))]),e("div",ae,[a(r(q),{class:"h-8 w-8 text-green-600"})])])]),_:1}),a(u,{class:"p-6"},{default:o(()=>[e("div",le,[e("div",null,[t[9]||(t[9]=e("p",{class:"text-sm font-medium text-gray-600"},"Cancelled",-1)),e("p",oe,i(n.value.filter(s=>s.status==="cancelled").length),1),t[10]||(t[10]=e("p",{class:"mt-1 text-xs text-gray-500"},"This month",-1))]),e("div",re,[a(r(z),{class:"h-8 w-8 text-red-600"})])])]),_:1})]),m.value?(c(),_("div",ve,[...t[11]||(t[11]=[e("div",{class:"h-64 rounded-xl bg-gray-200 animate-pulse"},null,-1)])])):(c(),V(I,{key:0,title:"All Classes",columns:v,data:n.value,searchable:!0,paginated:!0,exportable:!0,filters:b,"items-per-page":25,"row-key":"id"},{"cell-class_info":o(({row:s})=>[e("div",ie,[e("div",ne,[a(r(h),{class:"h-5 w-5 text-white"})]),e("div",null,[e("div",de,"Class #"+i(s.id||"N/A"),1),s.duration?(c(),_("div",ce,i(s.duration)+" minutes",1)):B("",!0)])])]),"cell-teacher":o(({row:s})=>[e("div",ue,[a(r(F),{class:"h-4 w-4 text-gray-400"}),e("span",me,i(s.teacher),1)])]),"cell-student":o(({row:s})=>[e("div",ge,[a(r(M),{class:"h-4 w-4 text-gray-400"}),e("span",_e,i(s.student),1)])]),"cell-book":o(({row:s})=>[e("div",fe,i(s.book||"—"),1)]),"cell-schedule":o(({row:s})=>[e("div",he,i(s.schedule||"—"),1)]),"cell-status":o(({row:s})=>[a(P,{variant:s.status==="completed"?"success":s.status==="scheduled"?"primary":"danger"},{default:o(()=>[f(i(s.status||"scheduled"),1)]),_:2},1032,["variant"])]),"row-actions":o(({row:s})=>[e("div",pe,[e("button",{onClick:A=>$(s),class:"rounded-lg p-2 text-gray-400 hover:bg-gray-100 hover:text-blue-600 transition-colors",title:"View Details"},[a(r(G),{class:"h-5 w-5"})],8,xe),e("button",{onClick:A=>S(s),class:"rounded-lg p-2 text-gray-400 hover:bg-gray-100 hover:text-blue-600 transition-colors",title:"Edit"},[a(r(H),{class:"h-5 w-5"})],8,ye)])]),_:1},8,["data"]))])]),_:1})],64))}};export{Le as default};
