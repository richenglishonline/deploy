import{l as k,m as v,r as c,o as C,c as o,b as p,u as g,h as $,w as y,d as e,f as i,F as h,g as S,i as u,t as l,s as T}from"./app-CT2OzWMs.js";import{_ as B}from"./AuthenticatedLayout-BckPqv0C.js";import{_ as M}from"./Calendar-Dpwhla8R.js";import{a as D}from"./api-BzWpn17H.js";const F={class:"flex items-center justify-between"},L=["disabled"],N={class:"py-10"},V={class:"mx-auto max-w-7xl space-y-6 px-4 sm:px-6 lg:px-8"},j={key:0,class:"text-center py-12"},z={key:1,class:"space-y-6"},E={class:"rounded-lg border border-gray-200 bg-white p-6 shadow-sm"},R={class:"rounded-lg border border-gray-200 bg-white p-6 shadow-sm"},U={key:0,class:"text-center py-8 text-gray-500"},H={key:1,class:"space-y-2"},P=["onClick"],q={class:"font-medium text-gray-900"},A={class:"text-sm text-gray-500"},G={class:"flex items-center gap-2"},X={__name:"Index",setup(J){const m=k(),_=v(()=>m.props.auth?.user?.role??"teacher"),b=v(()=>m.props.auth?.user?.id),d=c(!1),n=c([]),f=c([]),w=s=>{if(!s.start_date)return null;const a=new Date(s.start_date),t={backgroundColor:s.type==="makeupClass"?"#ef4444":s.type==="reoccurring"?"#8b5cf6":"#22c55e",color:"white"};return{id:s.id,date:a,type:s.type,startTime:s.start_time,endTime:s.end_time,style:t,onClick:r=>{s.type==="makeupClass"?u.visit(route("makeup-classes.show",r)):u.visit(route("classes.show",r))},onHover:r=>`
                <div class="text-xs">
                    <p class="font-semibold">${s.student?.name||"Class"}</p>
                    ${r.startTime?`<p class="text-gray-300">${r.startTime} - ${r.endTime}</p>`:""}
                </div>
            `,meta:s}},x=async()=>{d.value=!0;try{const s={teacher_id:_.value==="teacher"?b.value:void 0,limit:1e3},{data:a}=await D.get("/class",{params:s});n.value=a.classes||[],f.value=n.value.map(w).filter(Boolean)}catch(s){console.error("Error fetching classes:",s)}finally{d.value=!1}};return C(x),(s,a)=>(i(),o(h,null,[p(g($),{title:"My Schedule"}),p(B,null,{header:y(()=>[e("div",F,[a[0]||(a[0]=e("div",null,[e("h2",{class:"text-xl font-semibold leading-tight text-gray-800"}," My Schedule "),e("p",{class:"text-sm text-gray-500"}," View all your classes in a calendar format. ")],-1)),e("button",{onClick:x,class:"rounded-md bg-indigo-600 px-4 py-2 text-sm font-semibold text-white shadow-sm hover:bg-indigo-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600",disabled:d.value}," Refresh ",8,L)])]),default:y(()=>[e("div",N,[e("div",V,[d.value?(i(),o("div",j,[...a[1]||(a[1]=[e("p",{class:"text-gray-500"},"Loading schedule...",-1)])])):(i(),o("div",z,[e("div",E,[p(M,{dates:f.value,size:"full"},null,8,["dates"])]),a[3]||(a[3]=e("div",{class:"rounded-lg border border-gray-200 bg-white p-6 shadow-sm"},[e("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Legend"),e("div",{class:"flex flex-wrap gap-4"},[e("div",{class:"flex items-center gap-2"},[e("div",{class:"w-4 h-4 rounded bg-green-500"}),e("span",{class:"text-sm text-gray-700"},"Scheduled Classes")]),e("div",{class:"flex items-center gap-2"},[e("div",{class:"w-4 h-4 rounded bg-purple-500"}),e("span",{class:"text-sm text-gray-700"},"Recurring Classes")]),e("div",{class:"flex items-center gap-2"},[e("div",{class:"w-4 h-4 rounded bg-red-500"}),e("span",{class:"text-sm text-gray-700"},"Makeup Classes")])])],-1)),e("div",R,[a[2]||(a[2]=e("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Upcoming Classes",-1)),n.value.length===0?(i(),o("div",U," No classes scheduled. ")):(i(),o("div",H,[(i(!0),o(h,null,S(n.value.slice(0,10),t=>(i(),o("div",{key:t.id,class:"flex items-center justify-between p-3 border border-gray-200 rounded-md hover:bg-gray-50 cursor-pointer",onClick:r=>t.type==="makeupClass"?g(u).visit(s.route("makeup-classes.show",t.id)):g(u).visit(s.route("classes.show",t.id))},[e("div",null,[e("div",q,l(t.student?.name||"Unknown Student"),1),e("div",A,l(t.start_date)+" "+l(t.start_time)+" - "+l(t.end_time),1)]),e("div",G,[e("span",{class:T(["px-2 py-1 text-xs font-medium rounded",t.type==="makeupClass"?"bg-red-100 text-red-800":t.type==="reoccurring"?"bg-purple-100 text-purple-800":"bg-green-100 text-green-800"])},l(t.type),3)])],8,P))),128))]))])]))])])]),_:1})],64))}};export{X as default};
