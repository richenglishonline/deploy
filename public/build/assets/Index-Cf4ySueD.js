import{c as l,d as t,g as a,u as z,r as f,j as D,K as H,a as u,b as p,h as K,w as h,e as v,k as C,p as A,a7 as F,v as R,F as y,q as k,y as S,f as N,z as V,t as d,i as U}from"./app-BiSPCPuo.js";import{n as b,b as G,e as I,r as L,a as P,h as Q,_ as J}from"./AuthenticatedLayout-57Q77M7z.js";import{_ as B}from"./Card-B0sMFwFC.js";import{_ as O}from"./Badge-DAiRCop6.js";import{a as W}from"./api-BtR7IrG5.js";function X(E,o){return a(),l("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M13.5 4.5 21 12m0 0-7.5 7.5M21 12H3"})])}const Y={class:"space-y-6 pb-8"},Z={class:"space-y-4"},ee={class:"relative"},se={class:"flex flex-wrap gap-2"},te=["onClick"],ae={key:0,class:"flex flex-wrap gap-2"},le=["onClick"],re={key:0,class:"space-y-4"},oe={key:1,class:"text-center py-12"},ne={key:2,class:"space-y-6"},ie={class:"text-lg font-semibold text-gray-900 capitalize"},ce={class:"grid grid-cols-1 gap-4 md:grid-cols-2 lg:grid-cols-3"},de={class:"flex items-start gap-3"},ue={class:"flex-1 min-w-0"},me={class:"font-medium text-gray-900 truncate"},ge={key:0,class:"mt-1 text-sm text-gray-500 line-clamp-2"},pe={key:1,class:"mt-2 flex flex-wrap gap-2"},ke={__name:"Index",setup(E){z();const o=f(""),$=f(!1),m=f([]),g=f([]),x=[{key:"all",label:"All",icon:b,color:"blue"},{key:"teachers",label:"Teachers",icon:G,color:"indigo"},{key:"students",label:"Students",icon:I,color:"green"},{key:"books",label:"Books",icon:L,color:"purple"},{key:"classes",label:"Classes",icon:P,color:"orange"},{key:"assignments",label:"Assignments",icon:Q,color:"pink"}],_=f("all"),w=async()=>{if(!o.value.trim()){m.value=[];return}$.value=!0;try{const{data:s}=await W.get("/search",{params:{q:o.value,category:_.value!=="all"?_.value:void 0}});m.value=s.results||s||[],o.value.trim()&&!g.value.includes(o.value.trim())&&(g.value.unshift(o.value.trim()),g.value.length>5&&g.value.pop())}catch(s){console.error("Error performing search:",s),m.value=[]}finally{$.value=!1}},M=s=>{const e={teacher:`/super-admin/teachers/${s.id}`,student:`/super-admin/students/${s.id}`,book:`/super-admin/books/${s.id}`,class:`/super-admin/classes/${s.id}`,assignment:`/super-admin/assignments/${s.id}`};e[s.type]&&U.visit(e[s.type])},j=s=>{o.value=s,w()},q=D(()=>{const s={};return m.value.forEach(e=>{s[e.type]||(s[e.type]=[]),s[e.type].push(e)}),s});return H([o],()=>{const s=setTimeout(()=>{w()},300);return()=>clearTimeout(s)}),(s,e)=>(a(),l(y,null,[u(p(K),{title:"Search"}),u(J,null,{default:h(()=>[t("div",Y,[e[7]||(e[7]=t("div",null,[t("h1",{class:"text-3xl font-bold text-gray-900"},"Global Search"),t("p",{class:"mt-1 text-sm text-gray-500"}," Search across all system data ")],-1)),u(B,{class:"p-6"},{default:h(()=>[t("div",Z,[t("div",ee,[u(p(b),{class:"pointer-events-none absolute left-4 top-1/2 h-5 w-5 -translate-y-1/2 text-gray-400"}),A(t("input",{"onUpdate:modelValue":e[0]||(e[0]=r=>o.value=r),type:"text",placeholder:"Search teachers, students, books, classes, assignments...",class:"block w-full rounded-lg border-0 bg-gray-50 py-3 pl-12 pr-4 text-sm text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:bg-white focus:ring-2 focus:ring-inset focus:ring-blue-500",onKeyup:F(w,["enter"])},null,544),[[R,o.value]])]),t("div",se,[(a(),l(y,null,k(x,r=>t("button",{key:r.key,onClick:i=>{_.value=r.key,w()},class:S(["flex items-center gap-2 rounded-lg border px-3 py-2 text-sm font-medium transition-colors",_.value===r.key?"border-blue-500 bg-blue-50 text-blue-700":"border-gray-300 bg-white text-gray-700 hover:bg-gray-50"])},[(a(),v(V(r.icon),{class:"h-4 w-4"})),N(" "+d(r.label),1)],10,te)),64))]),g.value.length>0&&!o.value?(a(),l("div",ae,[e[1]||(e[1]=t("span",{class:"text-xs font-medium text-gray-500"},"Recent:",-1)),(a(!0),l(y,null,k(g.value,(r,i)=>(a(),l("button",{key:i,onClick:n=>j(r),class:"rounded-lg bg-gray-100 px-3 py-1 text-xs text-gray-700 hover:bg-gray-200"},d(r),9,le))),128))])):C("",!0)])]),_:1}),$.value?(a(),l("div",re,[...e[2]||(e[2]=[t("div",{class:"h-64 rounded-xl bg-gray-200 animate-pulse"},null,-1)])])):o.value&&m.value.length===0?(a(),l("div",oe,[u(p(b),{class:"mx-auto h-12 w-12 text-gray-300"}),e[3]||(e[3]=t("p",{class:"mt-4 text-sm font-medium text-gray-900"},"No results found",-1)),e[4]||(e[4]=t("p",{class:"mt-1 text-sm text-gray-500"},"Try adjusting your search query",-1))])):m.value.length>0?(a(),l("div",ne,[(a(!0),l(y,null,k(q.value,(r,i)=>(a(),l("div",{key:i,class:"space-y-4"},[t("h3",ie,d(x.find(n=>n.key===i)?.label||i)+" ("+d(r.length)+") ",1),t("div",ce,[(a(!0),l(y,null,k(r,n=>(a(),v(B,{key:n.id,class:"p-4 hover:shadow-md transition-shadow cursor-pointer",onClick:c=>M(n)},{default:h(()=>[t("div",de,[t("div",{class:S(["rounded-lg p-2",`bg-${x.find(c=>c.key===i)?.color||"blue"}-50`])},[(a(),v(V(x.find(c=>c.key===i)?.icon||p(b)),{class:S(["h-5 w-5",`text-${x.find(c=>c.key===i)?.color||"blue"}-600`])},null,8,["class"]))],2),t("div",ue,[t("h4",me,d(n.title||n.name||n.email||"Untitled"),1),n.description?(a(),l("p",ge,d(n.description),1)):C("",!0),n.meta?(a(),l("div",pe,[(a(!0),l(y,null,k(n.meta,(c,T)=>(a(),v(O,{key:T,variant:"secondary",class:"text-xs"},{default:h(()=>[N(d(T)+": "+d(c),1)]),_:2},1024))),128))])):C("",!0)]),u(p(X),{class:"h-5 w-5 text-gray-400 flex-shrink-0"})])]),_:2},1032,["onClick"]))),128))])]))),128))])):(a(),v(B,{key:3,class:"p-12 text-center"},{default:h(()=>[u(p(b),{class:"mx-auto h-12 w-12 text-gray-300"}),e[5]||(e[5]=t("p",{class:"mt-4 text-sm font-medium text-gray-900"},"Start searching",-1)),e[6]||(e[6]=t("p",{class:"mt-1 text-sm text-gray-500"}," Enter a search term to find teachers, students, books, classes, and more ",-1))]),_:1}))])]),_:1})],64))}};export{ke as default};
