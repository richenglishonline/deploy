import{l as V,m as N,r as b,a as S,o as A,c as n,b as y,u as x,h as D,w as _,d as e,k as p,q as v,v as T,e as g,f as r,F as h,g as $,i as w,t as a,s as B,j as F}from"./app-CIgItLJv.js";import{_ as M}from"./AuthenticatedLayout-DJwHHg2a.js";import{a as U}from"./api-VVF87TnZ.js";const j={class:"flex items-center justify-between"},I=["disabled"],R={class:"py-10"},z={class:"mx-auto max-w-6xl space-y-6 px-4 sm:px-6 lg:px-8"},E={class:"rounded-lg border border-gray-200 bg-white p-6 shadow-sm"},q={class:"grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-4"},L={class:"flex items-end gap-3"},G=["disabled"],H=["disabled"],J={class:"overflow-hidden rounded-lg border border-gray-200 bg-white shadow-sm"},K={class:"overflow-x-auto"},O={class:"min-w-full divide-y divide-gray-200"},Q={class:"bg-gray-50"},W={class:"text-left text-xs font-semibold uppercase tracking-wider text-gray-500"},X={key:0,scope:"col",class:"px-6 py-3"},Y={class:"divide-y divide-gray-200 bg-white"},Z={key:0},ee=["colspan"],te=["onClick"],se={class:"px-6 py-4"},oe={class:"px-6 py-4"},le={class:"px-6 py-4"},de={class:"text-xs text-gray-500"},ae={class:"px-6 py-4"},ie={class:"px-6 py-4"},ne=["onClick"],re={key:0,class:"flex flex-col items-center justify-between gap-4 border-t border-gray-100 px-6 py-4 text-sm text-gray-600 sm:flex-row"},ue={class:"flex items-center gap-2"},ce=["disabled"],pe=["disabled"],ve={__name:"Index",setup(ge){const k=V(),c=N(()=>k.props.auth?.user?.role==="super-admin"),i=b(!1),m=b([]),l=b(null),o=S({teacher_id:"",status:"",start_date:"",end_date:"",page:1,limit:10}),u=async()=>{i.value=!0;try{const{data:d}=await U.get("/payout",{params:o});m.value=d.payouts,l.value=d.pagination}catch(d){console.error(d)}finally{i.value=!1}},f=d=>{l.value&&(d<1||d>l.value.totalPages||(o.page=d,u()))},C=()=>{o.teacher_id="",o.status="",o.start_date="",o.end_date="",o.page=1,u()};return A(u),(d,t)=>(r(),n(h,null,[y(x(D),{title:"Payouts"}),y(M,null,{header:_(()=>[e("div",j,[t[7]||(t[7]=e("div",null,[e("h2",{class:"text-xl font-semibold leading-tight text-gray-800"}," Payouts "),e("p",{class:"text-sm text-gray-500"}," Review payout periods, monitor status, and confirm disbursements. ")],-1)),e("button",{onClick:u,class:"rounded-md bg-indigo-600 px-4 py-2 text-sm font-semibold text-white shadow-sm hover:bg-indigo-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600",disabled:i.value}," Refresh ",8,I)])]),default:_(()=>[e("div",R,[e("div",z,[e("div",E,[e("form",q,[e("div",null,[t[8]||(t[8]=e("label",{class:"block text-sm font-medium text-gray-700"}," Teacher ID ",-1)),p(e("input",{"onUpdate:modelValue":t[0]||(t[0]=s=>o.teacher_id=s),type:"text",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm",placeholder:"Teacher ID"},null,512),[[v,o.teacher_id]])]),e("div",null,[t[10]||(t[10]=e("label",{class:"block text-sm font-medium text-gray-700"}," Status ",-1)),p(e("select",{"onUpdate:modelValue":t[1]||(t[1]=s=>o.status=s),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm"},[...t[9]||(t[9]=[e("option",{value:""},"Any",-1),e("option",{value:"pending"},"Pending",-1),e("option",{value:"processing"},"Processing",-1),e("option",{value:"completed"},"Completed",-1)])],512),[[T,o.status]])]),e("div",null,[t[11]||(t[11]=e("label",{class:"block text-sm font-medium text-gray-700"}," Start After ",-1)),p(e("input",{"onUpdate:modelValue":t[2]||(t[2]=s=>o.start_date=s),type:"date",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm"},null,512),[[v,o.start_date]])]),e("div",null,[t[12]||(t[12]=e("label",{class:"block text-sm font-medium text-gray-700"}," End Before ",-1)),p(e("input",{"onUpdate:modelValue":t[3]||(t[3]=s=>o.end_date=s),type:"date",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm"},null,512),[[v,o.end_date]])]),e("div",L,[e("button",{type:"button",onClick:u,class:"flex-1 rounded-md bg-indigo-600 px-4 py-2 text-sm font-semibold text-white shadow-sm hover:bg-indigo-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600",disabled:i.value}," Apply Filters ",8,G),e("button",{type:"button",onClick:C,class:"flex-1 rounded-md border border-gray-300 px-4 py-2 text-sm font-semibold text-gray-700 hover:bg-gray-50",disabled:i.value}," Reset ",8,H)])])]),e("div",J,[e("div",K,[e("table",O,[e("thead",Q,[e("tr",W,[t[13]||(t[13]=e("th",{scope:"col",class:"px-6 py-3"}," Teacher ",-1)),t[14]||(t[14]=e("th",{scope:"col",class:"px-6 py-3"}," Period ",-1)),t[15]||(t[15]=e("th",{scope:"col",class:"px-6 py-3"}," Duration ",-1)),t[16]||(t[16]=e("th",{scope:"col",class:"px-6 py-3"}," Status ",-1)),t[17]||(t[17]=e("th",{scope:"col",class:"px-6 py-3"}," Notes ",-1)),c.value?(r(),n("th",X," Actions ")):g("",!0)])]),e("tbody",Y,[!i.value&&m.value.length===0?(r(),n("tr",Z,[e("td",{colspan:c.value?6:5,class:"px-6 py-4 text-center text-sm text-gray-500"}," No payouts found. ",8,ee)])):g("",!0),(r(!0),n(h,null,$(m.value,s=>(r(),n("tr",{key:s.id,class:"text-sm text-gray-700 hover:bg-gray-50 cursor-pointer",onClick:P=>c.value&&x(w).visit(d.route("payouts.show",s.id))},[e("td",se,a(s.teacher?.name??"—"),1),e("td",oe,a(s.start_date)+" – "+a(s.end_date),1),e("td",le,[e("div",null,a(s.duration)+" minutes ",1),e("div",de," Classes: "+a(s.total_class),1)]),e("td",ae,[e("span",{class:B(["inline-flex items-center rounded-full px-3 py-1 text-xs font-semibold capitalize",{"bg-amber-100 text-amber-700":s.status==="pending","bg-sky-100 text-sky-700":s.status==="processing","bg-emerald-100 text-emerald-700":s.status==="completed"}])},a(s.status),3)]),e("td",ie,a(s.notes??"—"),1),c.value?(r(),n("td",{key:0,class:"px-6 py-4",onClick:t[4]||(t[4]=F(()=>{},["stop"]))},[e("button",{onClick:P=>x(w).visit(d.route("payouts.show",s.id)),class:"rounded-md bg-blue-600 px-3 py-1.5 text-xs font-medium text-white hover:bg-blue-700"}," View ",8,ne)])):g("",!0)],8,te))),128))])])]),l.value?(r(),n("div",re,[e("div",null," Page "+a(l.value.page)+" of "+a(l.value.totalPages??1),1),e("div",ue,[e("button",{onClick:t[5]||(t[5]=s=>f(l.value.page-1)),class:"rounded-md border border-gray-300 px-3 py-1 hover:bg-gray-50",disabled:i.value||l.value.page===1}," Previous ",8,ce),e("button",{onClick:t[6]||(t[6]=s=>f(l.value.page+1)),class:"rounded-md border border-gray-300 px-3 py-1 hover:bg-gray-50",disabled:i.value||l.value.page===l.value.totalPages}," Next ",8,pe)])])):g("",!0)])])])]),_:1})],64))}};export{ve as default};
