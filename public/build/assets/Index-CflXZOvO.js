import{u as C,r as c,o as S,c as f,a,b as n,h as A,w as l,d as e,e as N,t as o,g as m,f as d,F as T,i as D}from"./app-CGuEmW06.js";import{a as V,d as _,r as j,_ as B}from"./AuthenticatedLayout-CJGuDV3D.js";import{_ as M}from"./AdvancedTable-C74tgwHJ.js";import{_ as p}from"./Card-O4ACqxyG.js";import{_ as g}from"./Badge-xK72gQ5Q.js";import{a as h}from"./api-B9gIEsIZ.js";import{r as E}from"./CheckCircleIcon-QmryU6wr.js";import{r as F}from"./EyeIcon-BaQtjq6r.js";import"./ArrowDownTrayIcon-CC8afiRz.js";import"./ArrowUpIcon-DLRLa_dE.js";import"./TrashIcon-7rQaTgdF.js";const L={class:"space-y-6 pb-8"},U={class:"grid grid-cols-1 gap-6 sm:grid-cols-3"},I={class:"flex items-center justify-between"},P={class:"mt-2 text-3xl font-semibold text-gray-900"},R={class:"rounded-lg bg-blue-50 p-3"},q={class:"flex items-center justify-between"},z={class:"mt-2 text-3xl font-semibold text-gray-900"},G={class:"rounded-lg bg-yellow-50 p-3"},H={class:"flex items-center justify-between"},J={class:"mt-2 text-3xl font-semibold text-gray-900"},K={class:"rounded-lg bg-green-50 p-3"},O={class:"flex items-center gap-3"},Q={class:"flex h-10 w-10 items-center justify-center rounded-full bg-gradient-to-br from-green-500 to-teal-600"},W={class:"text-sm font-semibold text-white"},X={class:"font-medium text-gray-900"},Y={class:"flex items-center gap-2 text-gray-900"},Z={class:"flex items-center gap-2 text-gray-900"},ee=["onClick"],te={key:1,class:"space-y-4"},ge={__name:"Index",setup(se){C();const u=c(!1),i=c([]),x=c(null),b=[{key:"student",label:"Student",sortable:!0},{key:"book",label:"Book",sortable:!0},{key:"schedule",label:"Schedule",sortable:!0},{key:"duration",label:"Duration",sortable:!0,align:"center"},{key:"type",label:"Type",sortable:!0,align:"center"},{key:"status",label:"Status",sortable:!0,align:"center"}],v=[{key:"status",label:"Status",type:"select",options:[{value:"",label:"All Statuses"},{value:"scheduled",label:"Scheduled"},{value:"completed",label:"Completed"},{value:"cancelled",label:"Cancelled"}]},{key:"type",label:"Type",type:"select",options:[{value:"",label:"All Types"},{value:"regular",label:"Regular"},{value:"makeup",label:"Makeup"}]}],k=async()=>{u.value=!0;try{const{data:r}=await h.get("/teacher/classes");i.value=Array.isArray(r.classes||r)?(r.classes||r).map(t=>({...t,student:t.student?`${t.student.first_name||""} ${t.student.last_name||""}`.trim()||t.student.email:"N/A",book:t.book?.title||"N/A",schedule:t.start_time?`${new Date(t.start_time).toLocaleDateString()} ${new Date(t.start_time).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}`:"N/A",duration:t.duration||"N/A",status:t.status||(t.completed?"completed":"scheduled"),type:t.type||"regular"})):[]}catch(r){console.error("Error fetching classes:",r),i.value=[]}finally{u.value=!1}},w=async()=>{try{const{data:r}=await h.get("/dashboard/stats");x.value=r?.dashboard||{}}catch(r){console.error("Error fetching stats:",r)}},$=r=>{D.visit(`/teacher/classes/${r.id}`)};return S(()=>{k(),w()}),(r,t)=>(m(),f(T,null,[a(n(A),{title:"My Classes"}),a(B,null,{default:l(()=>[e("div",L,[t[6]||(t[6]=e("div",null,[e("h1",{class:"text-3xl font-bold text-gray-900"},"My Classes"),e("p",{class:"mt-1 text-sm text-gray-500"}," View and manage your classes ")],-1)),e("div",U,[a(p,{class:"p-6"},{default:l(()=>[e("div",I,[e("div",null,[t[0]||(t[0]=e("p",{class:"text-sm font-medium text-gray-600"},"Total Classes",-1)),e("p",P,o(i.value.length),1)]),e("div",R,[a(n(V),{class:"h-8 w-8 text-blue-600"})])])]),_:1}),a(p,{class:"p-6"},{default:l(()=>[e("div",q,[e("div",null,[t[1]||(t[1]=e("p",{class:"text-sm font-medium text-gray-600"},"Scheduled",-1)),e("p",z,o(i.value.filter(s=>s.status==="scheduled").length),1),t[2]||(t[2]=e("p",{class:"mt-1 text-xs text-gray-500"},"Upcoming",-1))]),e("div",G,[a(n(_),{class:"h-8 w-8 text-yellow-600"})])])]),_:1}),a(p,{class:"p-6"},{default:l(()=>[e("div",H,[e("div",null,[t[3]||(t[3]=e("p",{class:"text-sm font-medium text-gray-600"},"Completed",-1)),e("p",J,o(i.value.filter(s=>s.status==="completed").length),1),t[4]||(t[4]=e("p",{class:"mt-1 text-xs text-gray-500"},"This month",-1))]),e("div",K,[a(n(E),{class:"h-8 w-8 text-green-600"})])])]),_:1})]),u.value?(m(),f("div",te,[...t[5]||(t[5]=[e("div",{class:"h-64 rounded-xl bg-gray-200 animate-pulse"},null,-1)])])):(m(),N(M,{key:0,title:"All Classes",columns:b,data:i.value,searchable:!0,paginated:!0,filters:v,"items-per-page":25,"row-key":"id"},{"cell-student":l(({row:s})=>[e("div",O,[e("div",Q,[e("span",W,o(s.student.split(" ").map(y=>y[0]).join("").toUpperCase().slice(0,2)),1)]),e("span",X,o(s.student),1)])]),"cell-book":l(({row:s})=>[e("div",Y,[a(n(j),{class:"h-4 w-4 text-gray-400"}),d(" "+o(s.book||"—"),1)])]),"cell-schedule":l(({row:s})=>[e("div",Z,[a(n(_),{class:"h-4 w-4 text-gray-400"}),d(" "+o(s.schedule||"—"),1)])]),"cell-duration":l(({row:s})=>[a(g,{variant:"secondary"},{default:l(()=>[d(o(s.duration)+" min",1)]),_:2},1024)]),"cell-type":l(({row:s})=>[a(g,{variant:s.type==="regular"?"primary":"warning"},{default:l(()=>[d(o(s.type||"regular"),1)]),_:2},1032,["variant"])]),"cell-status":l(({row:s})=>[a(g,{variant:s.status==="completed"?"success":s.status==="scheduled"?"primary":"danger"},{default:l(()=>[d(o(s.status||"scheduled"),1)]),_:2},1032,["variant"])]),"row-actions":l(({row:s})=>[e("button",{onClick:y=>$(s),class:"rounded-lg p-2 text-gray-400 hover:bg-gray-100 hover:text-blue-600 transition-colors",title:"View Details"},[a(n(F),{class:"h-5 w-5"})],8,ee)]),_:1},8,["data"]))])]),_:1})],64))}};export{ge as default};
