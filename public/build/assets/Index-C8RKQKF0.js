import{u as N,j as T,r as c,m as U,o as j,c as l,a as f,b as y,h as O,w as _,d as e,k as h,g as d,p as g,F as m,q as w,t as i,x as C,v as R,i as $,s as E,f as I}from"./app-BiSPCPuo.js";import{_ as L}from"./AuthenticatedLayout-57Q77M7z.js";import{a as v}from"./api-BtR7IrG5.js";import{_ as q}from"./Button-cwC7HEN4.js";const z={class:"flex items-center justify-between"},G=["disabled"],H={class:"py-10"},J={class:"mx-auto max-w-7xl space-y-6 px-4 sm:px-6 lg:px-8"},K={class:"rounded-lg border border-gray-200 bg-white p-6 shadow-sm"},Q={class:"grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-4"},W={key:0},X=["value"],Y=["value"],Z={class:"flex items-end gap-3 sm:col-span-2 lg:col-span-4"},ee=["disabled"],te=["disabled"],se={class:"overflow-hidden rounded-lg border border-gray-200 bg-white shadow-sm"},oe={class:"overflow-x-auto"},ae={class:"min-w-full divide-y divide-gray-200"},le={class:"divide-y divide-gray-200 bg-white"},de={key:0},ie=["onClick"],ne={class:"px-6 py-4"},re={class:"font-medium text-gray-900"},ue={class:"text-gray-500"},ce={class:"px-6 py-4"},pe={class:"px-6 py-4"},ge={class:"px-6 py-4"},me={class:"px-6 py-4"},ve=["title"],be={class:"px-6 py-4"},xe={key:0,class:"text-blue-600"},fe={key:1,class:"text-gray-400"},ye={key:0,class:"flex flex-col items-center justify-between gap-4 border-t border-gray-100 px-6 py-4 text-sm text-gray-600 sm:flex-row"},_e={class:"flex items-center gap-2"},he=["disabled"],we=["disabled"],Te={__name:"Index",setup(ke){const k=N(),p=T(()=>k.props.auth?.user?.role??"teacher"),V=T(()=>k.props.auth?.user?.id),r=c(!1),b=c([]),n=c(null),D=c([]),x=c([]),a=U({teacher_id:p.value==="teacher"?V.value:"",student_id:"",start_date:"",end_date:"",page:1,limit:10}),F=async()=>{if(p.value!=="teacher"){const[o,t]=await Promise.all([v.get("/dashboard/teachers"),v.get("/dashboard/students")]);D.value=o.data,x.value=t.data}else{const o=await v.get("/dashboard/students");x.value=o.data}},u=async()=>{r.value=!0;try{const o={...a,type:"makeupClass"},{data:t}=await v.get("/class",{params:o});b.value=t.classes,n.value=t.pagination}catch(o){console.error(o)}finally{r.value=!1}},M=o=>{n.value&&(o<1||o>n.value.totalPages||(a.page=o,u()))},S=()=>{a.teacher_id=p.value==="teacher"?V.value:"",a.student_id="",a.start_date="",a.end_date="",a.page=1,u()},A=o=>o?new Date(o).toLocaleDateString():"—",P=o=>o||"—";return j(async()=>{await F(),await u()}),(o,t)=>(d(),l(m,null,[f(y(O),{title:"Makeup Classes"}),f(L,null,{header:_(()=>[e("div",z,[t[7]||(t[7]=e("div",null,[e("h2",{class:"text-xl font-semibold leading-tight text-gray-800"}," Makeup Classes "),e("p",{class:"text-sm text-gray-500"}," Manage makeup classes scheduled to replace missed lessons. ")],-1)),e("button",{onClick:u,class:"rounded-md bg-indigo-600 px-4 py-2 text-sm font-semibold text-white shadow-sm hover:bg-indigo-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600",disabled:r.value}," Refresh ",8,G)])]),default:_(()=>[e("div",H,[e("div",J,[e("div",K,[e("form",Q,[p.value!=="teacher"?(d(),l("div",W,[t[9]||(t[9]=e("label",{class:"block text-sm font-medium text-gray-700"}," Teacher ",-1)),g(e("select",{"onUpdate:modelValue":t[0]||(t[0]=s=>a.teacher_id=s),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm"},[t[8]||(t[8]=e("option",{value:""},"All Teachers",-1)),(d(!0),l(m,null,w(D.value,s=>(d(),l("option",{key:s.id,value:s.id},i(s.name),9,X))),128))],512),[[C,a.teacher_id]])])):h("",!0),e("div",null,[t[11]||(t[11]=e("label",{class:"block text-sm font-medium text-gray-700"}," Student ",-1)),g(e("select",{"onUpdate:modelValue":t[1]||(t[1]=s=>a.student_id=s),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm"},[t[10]||(t[10]=e("option",{value:""},"All Students",-1)),(d(!0),l(m,null,w(x.value,s=>(d(),l("option",{key:s.id,value:s.id},i(s.name),9,Y))),128))],512),[[C,a.student_id]])]),e("div",null,[t[12]||(t[12]=e("label",{class:"block text-sm font-medium text-gray-700"}," Start Date ",-1)),g(e("input",{"onUpdate:modelValue":t[2]||(t[2]=s=>a.start_date=s),type:"date",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm"},null,512),[[R,a.start_date]])]),e("div",null,[t[13]||(t[13]=e("label",{class:"block text-sm font-medium text-gray-700"}," End Date ",-1)),g(e("input",{"onUpdate:modelValue":t[3]||(t[3]=s=>a.end_date=s),type:"date",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm"},null,512),[[R,a.end_date]])]),e("div",Z,[e("button",{type:"button",onClick:u,class:"flex-1 rounded-md bg-indigo-600 px-4 py-2 text-sm font-semibold text-white shadow-sm hover:bg-indigo-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600",disabled:r.value}," Apply Filters ",8,ee),e("button",{type:"button",onClick:S,class:"flex-1 rounded-md border border-gray-300 px-4 py-2 text-sm font-semibold text-gray-700 hover:bg-gray-50",disabled:r.value}," Reset ",8,te)])])]),e("div",se,[e("div",oe,[e("table",ae,[t[16]||(t[16]=e("thead",{class:"bg-gray-50"},[e("tr",{class:"text-left text-xs font-semibold uppercase tracking-wider text-gray-500"},[e("th",{scope:"col",class:"px-6 py-3"}," Date & Time "),e("th",{scope:"col",class:"px-6 py-3"}," Teacher "),e("th",{scope:"col",class:"px-6 py-3"}," Student "),e("th",{scope:"col",class:"px-6 py-3"}," Book "),e("th",{scope:"col",class:"px-6 py-3"}," Reason "),e("th",{scope:"col",class:"px-6 py-3"}," Original Class "),e("th",{scope:"col",class:"px-6 py-3"}," Actions ")])],-1)),e("tbody",le,[!r.value&&b.value.length===0?(d(),l("tr",de,[...t[14]||(t[14]=[e("td",{colspan:"7",class:"px-6 py-4 text-center text-sm text-gray-500"}," No makeup classes found. ",-1)])])):h("",!0),(d(!0),l(m,null,w(b.value,s=>(d(),l("tr",{key:s.id,class:"text-sm text-gray-700 hover:bg-gray-50 cursor-pointer",onClick:B=>y($).visit(o.route("makeup-classes.show",s.id))},[e("td",ne,[e("div",re,i(A(s.start_date)),1),e("div",ue,i(P(s.start_time))+" - "+i(P(s.end_time)),1)]),e("td",ce,i(s.teacher?.name??"—"),1),e("td",pe,i(s.student?.name??"—"),1),e("td",ge,i(s.book?.title??"—"),1),e("td",me,[e("div",{class:"max-w-xs truncate",title:s.reason},i(s.reason??"—"),9,ve)]),e("td",be,[s.original_class_id?(d(),l("span",xe," Class #"+i(s.original_class_id),1)):(d(),l("span",fe,"—"))]),e("td",{class:"px-6 py-4",onClick:t[4]||(t[4]=E(()=>{},["stop"]))},[f(q,{onClick:B=>y($).visit(o.route("makeup-classes.show",s.id)),variant:"outline",size:"sm"},{default:_(()=>[...t[15]||(t[15]=[I(" View ",-1)])]),_:1},8,["onClick"])])],8,ie))),128))])])]),n.value?(d(),l("div",ye,[e("div",null," Page "+i(n.value.page)+" of "+i(n.value.totalPages??1),1),e("div",_e,[e("button",{onClick:t[5]||(t[5]=s=>M(n.value.page-1)),class:"rounded-md border border-gray-300 px-3 py-1 hover:bg-gray-50",disabled:r.value||n.value.page===1}," Previous ",8,he),e("button",{onClick:t[6]||(t[6]=s=>M(n.value.page+1)),class:"rounded-md border border-gray-300 px-3 py-1 hover:bg-gray-50",disabled:r.value||n.value.page===n.value.totalPages}," Next ",8,we)])])):h("",!0)])])])]),_:1})],64))}};export{Te as default};
