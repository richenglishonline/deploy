import{r as M,j as g,c as i,d as e,y as p,t as v,a as f,b as x,F as b,q as $,n as Y,g as d,u as L,o as O,h as E,w as F,i as S}from"./app-CGuEmW06.js";import{_ as P}from"./AuthenticatedLayout-CJGuDV3D.js";import{r as U,a as V}from"./ChevronRightIcon-ecwSMX8s.js";import{a as A}from"./api-B9gIEsIZ.js";const R={class:"mb-4 flex items-center justify-between"},W={class:"flex gap-1"},q={class:"mb-2 grid grid-cols-7 gap-1"},G={class:"grid grid-cols-7 gap-1"},J=["onClick","disabled","title"],K={__name:"Calendar",props:{dates:{type:Array,default:()=>[]},size:{type:String,default:"md",validator:_=>["sm","md","lg","full"].includes(_)}},emits:["dateClick"],setup(_,{emit:w}){const C=_,B=w,n=M(new Date),y={sm:{container:"w-64",header:"text-sm",dayHeader:"text-xs",dayCell:"h-8 text-xs",navButton:"h-8 w-8"},md:{container:"w-80",header:"text-base",dayHeader:"text-sm",dayCell:"h-10 text-sm",navButton:"h-10 w-10"},lg:{container:"w-96",header:"text-lg",dayHeader:"text-base",dayCell:"h-12 text-base",navButton:"h-12 w-12"},full:{container:"w-full",header:"text-2xl",dayHeader:"text-lg",dayCell:"h-16 text-lg",navButton:"h-12 w-12"}},u=g(()=>y[C.size]),k=g(()=>new Date(n.value.getFullYear(),n.value.getMonth(),1)),D=g(()=>new Date(n.value.getFullYear(),n.value.getMonth()+1,0)),a=g(()=>{const t=[],l=k.value,s=D.value;for(let h=new Date(l);h<=s;h.setDate(h.getDate()+1))t.push(new Date(h));return t}),r=g(()=>k.value.getDay()),o=g(()=>Array(r.value).fill(null)),c=g(()=>n.value.toLocaleDateString("en-US",{month:"long",year:"numeric"})),m=t=>{const l=t.toISOString().split("T")[0];return C.dates.find(s=>(s.date instanceof Date?s.date:new Date(s.date)).toISOString().split("T")[0]===l)||null},T=(t,l)=>t.getFullYear()===l.getFullYear()&&t.getMonth()===l.getMonth(),j=t=>{const l=m(t);l&&l.onClick?l.onClick(l.id,t):l&&B("dateClick",l,t)},z=()=>{const t=new Date(n.value);t.setMonth(t.getMonth()-1),n.value=t},H=()=>{const t=new Date(n.value);t.setMonth(t.getMonth()+1),n.value=t},N=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];return(t,l)=>(d(),i("div",{class:p(["rounded-lg border border-gray-200 bg-white p-4 shadow-sm",u.value.container])},[e("div",R,[e("h2",{class:p(["font-semibold text-gray-900",u.value.header])},v(c.value),3),e("div",W,[e("button",{onClick:z,class:p(["rounded-md hover:bg-gray-100 transition-colors flex items-center justify-center",u.value.navButton]),"aria-label":"Previous month"},[f(x(U),{class:"h-4 w-4"})],2),e("button",{onClick:H,class:p(["rounded-md hover:bg-gray-100 transition-colors flex items-center justify-center",u.value.navButton]),"aria-label":"Next month"},[f(x(V),{class:"h-4 w-4"})],2)])]),e("div",q,[(d(),i(b,null,$(N,s=>e("div",{key:s,class:p(["text-center font-medium text-gray-500",u.value.dayHeader])},v(s),3)),64))]),e("div",G,[(d(!0),i(b,null,$(o.value,(s,h)=>(d(),i("div",{key:`padding-${h}`,class:p(u.value.dayCell)},null,2))),128)),(d(!0),i(b,null,$(a.value,s=>(d(),i("div",{key:s.toISOString(),class:"relative"},[e("button",{onClick:h=>j(s),class:p(["w-full rounded-md transition-colors font-medium",u.value.dayCell,T(s,n.value)?"text-gray-900 hover:bg-gray-100 cursor-pointer":"text-gray-400 opacity-50 cursor-not-allowed",!m(s)&&"opacity-30"]),style:Y(m(s)?.style||{}),disabled:!T(s,n.value)||!m(s),title:m(s)?`${m(s).type||"Class"} (${m(s).id})`:""},v(s.getDate()),15,J)]))),128))])],2))}},Q={class:"flex items-center justify-between"},X=["disabled"],Z={class:"py-10"},I={class:"mx-auto max-w-7xl space-y-6 px-4 sm:px-6 lg:px-8"},ee={key:0,class:"text-center py-12"},te={key:1,class:"space-y-6"},se={class:"rounded-lg border border-gray-200 bg-white p-6 shadow-sm"},ae={class:"rounded-lg border border-gray-200 bg-white p-6 shadow-sm"},ne={key:0,class:"text-center py-8 text-gray-500"},oe={key:1,class:"space-y-2"},re=["onClick"],le={class:"font-medium text-gray-900"},ie={class:"text-sm text-gray-500"},de={class:"flex items-center gap-2"},ve={__name:"Index",setup(_){const w=L(),C=g(()=>w.props.auth?.user?.role??"teacher"),B=g(()=>w.props.auth?.user?.id),n=M(!1),y=M([]),u=M([]),k=a=>{if(!a.start_date)return null;const r=new Date(a.start_date),o={backgroundColor:a.type==="makeupClass"?"#ef4444":a.type==="reoccurring"?"#8b5cf6":"#22c55e",color:"white"};return{id:a.id,date:r,type:a.type,startTime:a.start_time,endTime:a.end_time,style:o,onClick:c=>{a.type==="makeupClass"?S.visit(route("makeup-classes.show",c)):S.visit(route("classes.show",c))},onHover:c=>`
                <div class="text-xs">
                    <p class="font-semibold">${a.student?.name||"Class"}</p>
                    ${c.startTime?`<p class="text-gray-300">${c.startTime} - ${c.endTime}</p>`:""}
                </div>
            `,meta:a}},D=async()=>{n.value=!0;try{const a={teacher_id:C.value==="teacher"?B.value:void 0,limit:1e3},{data:r}=await A.get("/class",{params:a});y.value=r.classes||[],u.value=y.value.map(k).filter(Boolean)}catch(a){console.error("Error fetching classes:",a)}finally{n.value=!1}};return O(D),(a,r)=>(d(),i(b,null,[f(x(E),{title:"My Schedule"}),f(P,null,{header:F(()=>[e("div",Q,[r[0]||(r[0]=e("div",null,[e("h2",{class:"text-xl font-semibold leading-tight text-gray-800"}," My Schedule "),e("p",{class:"text-sm text-gray-500"}," View all your classes in a calendar format. ")],-1)),e("button",{onClick:D,class:"rounded-md bg-indigo-600 px-4 py-2 text-sm font-semibold text-white shadow-sm hover:bg-indigo-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600",disabled:n.value}," Refresh ",8,X)])]),default:F(()=>[e("div",Z,[e("div",I,[n.value?(d(),i("div",ee,[...r[1]||(r[1]=[e("p",{class:"text-gray-500"},"Loading schedule...",-1)])])):(d(),i("div",te,[e("div",se,[f(K,{dates:u.value,size:"full"},null,8,["dates"])]),r[3]||(r[3]=e("div",{class:"rounded-lg border border-gray-200 bg-white p-6 shadow-sm"},[e("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Legend"),e("div",{class:"flex flex-wrap gap-4"},[e("div",{class:"flex items-center gap-2"},[e("div",{class:"w-4 h-4 rounded bg-green-500"}),e("span",{class:"text-sm text-gray-700"},"Scheduled Classes")]),e("div",{class:"flex items-center gap-2"},[e("div",{class:"w-4 h-4 rounded bg-purple-500"}),e("span",{class:"text-sm text-gray-700"},"Recurring Classes")]),e("div",{class:"flex items-center gap-2"},[e("div",{class:"w-4 h-4 rounded bg-red-500"}),e("span",{class:"text-sm text-gray-700"},"Makeup Classes")])])],-1)),e("div",ae,[r[2]||(r[2]=e("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Upcoming Classes",-1)),y.value.length===0?(d(),i("div",ne," No classes scheduled. ")):(d(),i("div",oe,[(d(!0),i(b,null,$(y.value.slice(0,10),o=>(d(),i("div",{key:o.id,class:"flex items-center justify-between p-3 border border-gray-200 rounded-md hover:bg-gray-50 cursor-pointer",onClick:c=>o.type==="makeupClass"?x(S).visit(a.route("makeup-classes.show",o.id)):x(S).visit(a.route("classes.show",o.id))},[e("div",null,[e("div",le,v(o.student?.name||"Unknown Student"),1),e("div",ie,v(o.start_date)+" "+v(o.start_time)+" - "+v(o.end_time),1)]),e("div",de,[e("span",{class:p(["px-2 py-1 text-xs font-medium rounded",o.type==="makeupClass"?"bg-red-100 text-red-800":o.type==="reoccurring"?"bg-purple-100 text-purple-800":"bg-green-100 text-green-800"])},v(o.type),3)])],8,re))),128))]))])]))])])]),_:1})],64))}};export{ve as default};
