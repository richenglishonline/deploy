import{l as h,r as n,m,o as b,c as s,b as u,u as y,h as x,w as k,d as t,f as e,F as v,g as w,t as _}from"./app-CcrcFIhY.js";import{_ as B}from"./AuthenticatedLayout-DYFnkQnP.js";import{_ as A}from"./DashboardHeader-D83ht81M.js";import{a as S}from"./api-D-OI4ttb.js";const D={class:"space-y-6"},N={key:0,class:"space-y-6"},C={key:1,class:"text-center text-gray-500 py-20 text-xl"},P={key:2,class:"grid gap-6 sm:grid-cols-2 lg:grid-cols-3"},F={class:"text-sm font-medium text-gray-500"},L={class:"mt-2 text-3xl font-semibold text-gray-900"},Y={__name:"Dashboard",setup(T){const f=h(),l=n(!1),o=n(null),d=n(!1),i=m(()=>f.props.auth?.user?.role==="super-admin"),p=m(()=>{if(!o.value||!i.value)return[];const a=o.value.stats??{};return[{label:"Admins",value:a.totalAdmins},{label:"Teachers",value:a.totalTeachers},{label:"Students",value:a.totalStudents},{label:"Books",value:a.totalBooks},{label:"Classes",value:a.totalClasses},{label:"Payouts",value:a.totalPayouts},{label:"Notifications",value:a.totalNotifications},{label:"Book Assignments",value:a.totalBookAssignments}]}),g=async()=>{if(!(l.value||d.value)){l.value=!0;try{const{data:a}=await S.get("/dashboard/stats");o.value=a,d.value=!0}catch(a){console.error("Dashboard stats error:",a)}finally{l.value=!1}}};return b(()=>{g()}),(a,c)=>(e(),s(v,null,[u(y(x),{title:"Dashboard"}),u(B,null,{default:k(()=>[t("div",D,[u(A),l.value?(e(),s("div",N,[...c[0]||(c[0]=[t("div",{class:"w-full h-96 mb-12 mt-5 bg-gray-200 animate-pulse rounded"},null,-1),t("div",{class:"w-full h-96 bg-gray-200 animate-pulse rounded"},null,-1)])])):i.value?(e(),s("div",P,[(e(!0),s(v,null,w(p.value,r=>(e(),s("div",{key:r.label,class:"rounded-lg border border-gray-200 bg-white p-6 shadow-sm"},[t("dt",F,_(r.label),1),t("dd",L,_(r.value??0),1)]))),128))])):(e(),s("div",C," You do not have access to the super admin dashboard. "))])]),_:1})],64))}};export{Y as default};
