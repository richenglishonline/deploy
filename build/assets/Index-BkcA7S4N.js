import{c as y,d as t,g as f,j as R,e as x,w as l,I as h,b as i,a,y as k,u as I,r as _,o as S,h as T,t as d,f as g,k as b,F as U,i as V}from"./app-r5F7AQbe.js";import{o as z,h as M,d as H,l as K,_ as L}from"./AuthenticatedLayout-CNSH0xWk.js";import{_ as X}from"./AdvancedTable-DeA0jASj.js";import{_ as O}from"./Card-2P4Rmxrj.js";import{_ as w}from"./Badge-l3XqjddH.js";import{_ as q}from"./Button-BteD-aKC.js";import{n as W,$ as Z,P as G,c as A,X as J,I as Q,B as Y}from"./utils-Cmf8cA-i.js";import{a as B}from"./api-COcabK3_.js";import{r as D}from"./CheckCircleIcon-CNGI8Jtx.js";import{r as ee}from"./EyeIcon-DeULzbgW.js";import{r as te}from"./GlobeAltIcon-FjP1nmGI.js";import{r as se}from"./XCircleIcon-C1DMX2PD.js";import"./ArrowDownTrayIcon-DZwgirt0.js";import"./ArrowUpIcon-BRIgdKK5.js";import"./TrashIcon-Q9E64JkZ.js";function ae(u,m){return f(),y("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M2.25 6.75c0 8.284 6.716 15 15 15h2.25a2.25 2.25 0 0 0 2.25-2.25v-1.372c0-.516-.351-.966-.852-1.091l-4.423-1.106c-.44-.11-.902.055-1.173.417l-.97 1.293c-.282.376-.769.542-1.21.38a12.035 12.035 0 0 1-7.143-7.143c-.162-.441.004-.928.38-1.21l1.293-.97c.363-.271.527-.734.417-1.173L6.963 3.102a1.125 1.125 0 0 0-1.091-.852H4.5A2.25 2.25 0 0 0 2.25 4.5v2.25Z"})])}const le={__name:"Dialog",props:{open:{type:Boolean,required:!1,default:!1},defaultOpen:{type:Boolean,required:!1,default:!1},modal:{type:Boolean,required:!1,default:!0}},emits:["update:open"],setup(u,{emit:m}){const r=u,s=m,v=R({get:()=>r.open??r.defaultOpen,set:o=>s("update:open",o)});return(o,p)=>(f(),x(i(W),{open:v.value,"onUpdate:open":p[0]||(p[0]=$=>v.value=$),modal:u.modal},{default:l(()=>[h(o.$slots,"default")]),_:3},8,["open","modal"]))}},oe={__name:"DialogContent",props:{forceMount:{type:Boolean,required:!1},disableOutsidePointerEvents:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1},class:{type:null,required:!1}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","openAutoFocus","closeAutoFocus"],setup(u,{emit:m}){const r=u,s=m;return(v,o)=>(f(),x(i(Q),null,{default:l(()=>[a(i(Z),{class:"fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0"}),a(i(G),{"force-mount":u.forceMount,"disable-outside-pointer-events":u.disableOutsidePointerEvents,"as-child":u.asChild,class:k(i(A)("fixed left-1/2 top-1/2 z-50 grid w-full max-w-lg -translate-x-1/2 -translate-y-1/2 gap-4 border border-gray-200 bg-white p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",r.class)),onEscapeKeyDown:o[0]||(o[0]=p=>s("escapeKeyDown",p)),onPointerDownOutside:o[1]||(o[1]=p=>s("pointerDownOutside",p)),onFocusOutside:o[2]||(o[2]=p=>s("focusOutside",p)),onInteractOutside:o[3]||(o[3]=p=>s("interactOutside",p)),onOpenAutoFocus:o[4]||(o[4]=p=>s("openAutoFocus",p)),onCloseAutoFocus:o[5]||(o[5]=p=>s("closeAutoFocus",p))},{default:l(()=>[h(v.$slots,"default"),a(i(J),{class:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:pointer-events-none"},{default:l(()=>[a(i(z),{class:"h-4 w-4"}),o[6]||(o[6]=t("span",{class:"sr-only"},"Close",-1))]),_:1})]),_:3},8,["force-mount","disable-outside-pointer-events","as-child","class"])]),_:3}))}},ne={__name:"DialogHeader",props:{class:{type:null,required:!1}},setup(u){const m=u;return(r,s)=>(f(),y("div",{class:k(i(A)("flex flex-col gap-y-1.5 text-center sm:text-left",m.class))},[h(r.$slots,"default")],2))}},ie={__name:"DialogTitle",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1},class:{type:null,required:!1}},setup(u){const m=u;return(r,s)=>(f(),x(i(Y),{"as-child":u.asChild,class:k(i(A)("text-lg font-semibold leading-none tracking-tight",m.class))},{default:l(()=>[h(r.$slots,"default")]),_:3},8,["as-child","class"]))}},re={__name:"DialogFooter",props:{class:{type:null,required:!1}},setup(u){const m=u;return(r,s)=>(f(),y("div",{class:k(i(A)("flex flex-col-reverse sm:flex-row sm:justify-end sm:gap-x-2",m.class))},[h(r.$slots,"default")],2))}},de={class:"space-y-6 pb-8"},ue={class:"grid grid-cols-1 gap-6 sm:grid-cols-3"},pe={class:"flex items-center justify-between"},ce={class:"mt-2 text-3xl font-semibold text-gray-900"},me={class:"rounded-lg bg-blue-50 p-3"},fe={class:"flex items-center justify-between"},ve={class:"mt-2 text-3xl font-semibold text-gray-900"},ge={class:"rounded-lg bg-yellow-50 p-3"},ye={class:"flex items-center justify-between"},xe={class:"mt-2 text-3xl font-semibold text-gray-900"},_e={class:"rounded-lg bg-green-50 p-3"},be={class:"flex items-center gap-3"},he={class:"flex h-10 w-10 items-center justify-center rounded-full bg-gradient-to-br from-indigo-500 to-purple-600"},we={class:"text-sm font-semibold text-white"},ke={class:"font-medium text-gray-900"},Ae={key:0,class:"text-xs text-gray-500 flex items-center gap-1"},$e={class:"flex items-center gap-2 text-gray-900"},Ce={class:"flex items-center gap-2 text-gray-900"},je={class:"text-gray-900"},Oe={class:"flex items-center justify-end gap-2"},qe=["onClick"],Be=["onClick"],De={key:1,class:"space-y-4"},Ee={key:0,class:"space-y-6 py-4"},Fe={class:"grid grid-cols-2 gap-4"},Pe={class:"mt-1 text-gray-900"},Ne={class:"mt-1 text-gray-900"},Re={class:"mt-1 text-gray-900"},Ie={class:"mt-1 text-gray-900"},Se={class:"mt-1 text-gray-900"},Te={class:"grid grid-cols-2 gap-4"},Ue={class:"mt-1 flex gap-2"},Ve={class:"mt-1 text-gray-900"},at={__name:"Index",setup(u){I();const m=_(!1),r=_([]),s=_(null),v=_(!1),o=_(!1),p=[{key:"applicant",label:"Applicant",sortable:!0},{key:"email",label:"Email",sortable:!0},{key:"country",label:"Country",sortable:!0},{key:"degree",label:"Education",sortable:!0},{key:"status",label:"Status",sortable:!0,align:"center"},{key:"submitted_at",label:"Submitted",sortable:!0,format:"date"}],$=[{key:"status",label:"Status",type:"select",options:[{value:"",label:"All Statuses"},{value:"pending",label:"Pending"},{value:"approved",label:"Approved"},{value:"rejected",label:"Rejected"}]},{key:"country",label:"Country",type:"select",options:[{value:"",label:"All Countries"},{value:"Philippines",label:"Philippines"},{value:"USA",label:"USA"},{value:"India",label:"India"}]}],C=async()=>{m.value=!0;try{const{data:c}=await B.get("/teacher-applications");r.value=Array.isArray(c.applications||c)?(c.applications||c).map(e=>({...e,applicant:`${e.first_name||""} ${e.last_name||""}`.trim()||e.email||"Unnamed",email:e.email||"N/A",country:e.country||"N/A",degree:e.degree||"N/A",status:e.accepted?"approved":e.meta?.teacher_application_status==="rejected"?"rejected":"pending",submitted_at:e.created_at||e.submitted_at})):[]}catch(c){console.error("Error fetching applications:",c),r.value=[]}finally{m.value=!1}},E=c=>{s.value=c,v.value=!0},F=async()=>{if(s.value){o.value=!0;try{await B.patch(`/teacher-applications/${s.value.id}`,{status:"approved"}),await C(),v.value=!1,s.value=null}catch(c){console.error("Error approving application:",c),alert("Failed to approve application")}finally{o.value=!1}}},P=async()=>{if(!s.value)return;const c=prompt("Please provide a reason for rejection:");if(c){o.value=!0;try{await B.patch(`/teacher-applications/${s.value.id}`,{status:"rejected",notes:c}),await C(),v.value=!1,s.value=null}catch(e){console.error("Error rejecting application:",e),alert("Failed to reject application")}finally{o.value=!1}}},N=c=>{V.visit(`/super-admin/teacher-applications/${c.id}/review`)};return S(()=>{C()}),(c,e)=>(f(),y(U,null,[a(i(T),{title:"Teacher Applications"}),a(L,null,{default:l(()=>[t("div",de,[e[8]||(e[8]=t("div",null,[t("h1",{class:"text-3xl font-bold text-gray-900"},"Teacher Applications"),t("p",{class:"mt-1 text-sm text-gray-500"}," Review and manage teacher applications ")],-1)),t("div",ue,[a(O,{class:"p-6"},{default:l(()=>[t("div",pe,[t("div",null,[e[2]||(e[2]=t("p",{class:"text-sm font-medium text-gray-600"},"Total Applications",-1)),t("p",ce,d(r.value.length),1)]),t("div",me,[a(i(M),{class:"h-8 w-8 text-blue-600"})])])]),_:1}),a(O,{class:"p-6"},{default:l(()=>[t("div",fe,[t("div",null,[e[3]||(e[3]=t("p",{class:"text-sm font-medium text-gray-600"},"Pending Review",-1)),t("p",ve,d(r.value.filter(n=>n.status==="pending").length),1),e[4]||(e[4]=t("p",{class:"mt-1 text-xs text-yellow-600"},"Requires action",-1))]),t("div",ge,[a(i(H),{class:"h-8 w-8 text-yellow-600"})])])]),_:1}),a(O,{class:"p-6"},{default:l(()=>[t("div",ye,[t("div",null,[e[5]||(e[5]=t("p",{class:"text-sm font-medium text-gray-600"},"Approved",-1)),t("p",xe,d(r.value.filter(n=>n.status==="approved").length),1),e[6]||(e[6]=t("p",{class:"mt-1 text-xs text-green-600"},"This month",-1))]),t("div",_e,[a(i(D),{class:"h-8 w-8 text-green-600"})])])]),_:1})]),m.value?(f(),y("div",De,[...e[7]||(e[7]=[t("div",{class:"h-64 rounded-xl bg-gray-200 animate-pulse"},null,-1)])])):(f(),x(X,{key:0,title:"All Applications",columns:p,data:r.value,searchable:!0,paginated:!0,exportable:!0,filters:$,"items-per-page":25,"row-key":"id"},{"cell-applicant":l(({row:n})=>[t("div",be,[t("div",he,[t("span",we,d(n.applicant.split(" ").map(j=>j[0]).join("").toUpperCase().slice(0,2)),1)]),t("div",null,[t("div",ke,d(n.applicant),1),n.phone?(f(),y("div",Ae,[a(i(ae),{class:"h-3 w-3"}),g(" "+d(n.phone),1)])):b("",!0)])])]),"cell-email":l(({row:n})=>[t("div",$e,[a(i(K),{class:"h-4 w-4 text-gray-400"}),g(" "+d(n.email),1)])]),"cell-country":l(({row:n})=>[t("div",Ce,[a(i(te),{class:"h-4 w-4 text-gray-400"}),g(" "+d(n.country),1)])]),"cell-degree":l(({row:n})=>[t("div",je,d(n.degree),1)]),"cell-status":l(({row:n})=>[a(w,{variant:n.status==="approved"?"success":n.status==="pending"?"warning":"danger"},{default:l(()=>[g(d(n.status||"pending"),1)]),_:2},1032,["variant"])]),"row-actions":l(({row:n})=>[t("div",Oe,[t("button",{onClick:j=>E(n),class:"rounded-lg px-3 py-1.5 text-xs font-medium text-white bg-blue-600 hover:bg-blue-700 transition-colors",title:"Review Application"}," Review ",8,qe),t("button",{onClick:j=>N(n),class:"rounded-lg p-2 text-gray-400 hover:bg-gray-100 hover:text-blue-600 transition-colors",title:"View Details"},[a(i(ee),{class:"h-5 w-5"})],8,Be)])]),_:1},8,["data"]))]),a(le,{open:v.value,"onUpdate:open":e[1]||(e[1]=n=>v.value=n)},{default:l(()=>[a(oe,{class:"max-w-2xl max-h-[90vh] overflow-y-auto"},{default:l(()=>[a(ne,null,{default:l(()=>[a(ie,null,{default:l(()=>[...e[9]||(e[9]=[g("Review Application",-1)])]),_:1})]),_:1}),s.value?(f(),y("div",Ee,[t("div",Fe,[t("div",null,[e[10]||(e[10]=t("p",{class:"text-sm font-medium text-gray-600"},"Name",-1)),t("p",Pe,d(s.value.applicant),1)]),t("div",null,[e[11]||(e[11]=t("p",{class:"text-sm font-medium text-gray-600"},"Email",-1)),t("p",Ne,d(s.value.email),1)]),t("div",null,[e[12]||(e[12]=t("p",{class:"text-sm font-medium text-gray-600"},"Phone",-1)),t("p",Re,d(s.value.phone||"N/A"),1)]),t("div",null,[e[13]||(e[13]=t("p",{class:"text-sm font-medium text-gray-600"},"Country",-1)),t("p",Ie,d(s.value.country),1)])]),t("div",null,[e[14]||(e[14]=t("p",{class:"text-sm font-medium text-gray-600"},"Education",-1)),t("p",Se,d(s.value.degree)+" in "+d(s.value.major||"N/A"),1)]),t("div",Te,[t("div",null,[e[18]||(e[18]=t("p",{class:"text-sm font-medium text-gray-600"},"Equipment",-1)),t("div",Ue,[s.value.has_webcam?(f(),x(w,{key:0,variant:"success"},{default:l(()=>[...e[15]||(e[15]=[g("Webcam",-1)])]),_:1})):b("",!0),s.value.has_headset?(f(),x(w,{key:1,variant:"success"},{default:l(()=>[...e[16]||(e[16]=[g("Headset",-1)])]),_:1})):b("",!0),s.value.has_backup_internet?(f(),x(w,{key:2,variant:"success"},{default:l(()=>[...e[17]||(e[17]=[g("Backup Internet",-1)])]),_:1})):b("",!0)])]),t("div",null,[e[19]||(e[19]=t("p",{class:"text-sm font-medium text-gray-600"},"English Level",-1)),t("p",Ve,d(s.value.english_level||"N/A"),1)])])])):b("",!0),a(re,null,{default:l(()=>[a(q,{variant:"secondary",onClick:e[0]||(e[0]=n=>v.value=!1)},{default:l(()=>[...e[20]||(e[20]=[g("Cancel",-1)])]),_:1}),a(q,{variant:"danger",onClick:P,disabled:o.value},{default:l(()=>[a(i(se),{class:"h-4 w-4 mr-2"}),e[21]||(e[21]=g(" Reject ",-1))]),_:1},8,["disabled"]),a(q,{variant:"primary",onClick:F,disabled:o.value},{default:l(()=>[a(i(D),{class:"h-4 w-4 mr-2"}),e[22]||(e[22]=g(" Approve ",-1))]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1},8,["open"])]),_:1})],64))}};export{at as default};
