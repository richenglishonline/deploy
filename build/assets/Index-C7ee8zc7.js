import{r as u,a as w,o as R,c as i,b as B,u as C,h as j,w as A,d as e,e as P,f as r,F as g,g as p,t as n,i as T,j as M,k as v,v as y}from"./app-BCSl8rWO.js";import{_ as U}from"./AuthenticatedLayout-BF1ft56-.js";import{a as c}from"./api-DUuehXth.js";const D={class:"py-10"},F={class:"mx-auto max-w-7xl space-y-6 px-4 sm:px-6 lg:px-8"},E={class:"grid gap-6 lg:grid-cols-3"},I={class:"rounded-lg border border-gray-200 bg-white p-6 shadow-sm lg:col-span-2"},L={class:"overflow-hidden rounded-lg border border-gray-200"},O={class:"overflow-x-auto"},q={class:"min-w-full divide-y divide-gray-200"},z={class:"divide-y divide-gray-200 bg-white"},G={key:0},H={class:"px-6 py-4"},J={class:"px-6 py-4"},K={class:"px-6 py-4"},Q={class:"px-6 py-4"},W={class:"px-6 py-4 text-right"},X={class:"flex items-center justify-end gap-2"},Y=["onClick"],Z=["onClick","disabled"],ee={key:0,class:"flex flex-col items-center justify-between gap-4 border-t border-gray-100 px-6 py-4 text-sm text-gray-600 sm:flex-row"},te={class:"flex items-center gap-2"},se=["disabled"],oe=["disabled"],ae={class:"rounded-lg border border-gray-200 bg-white p-6 shadow-sm"},le={class:"mt-4 space-y-4"},de=["value"],ie=["value"],re=["value"],ne=["disabled"],pe={__name:"Index",setup(ue){const l=u(!1),b=u([]),d=u(null),x=u([]),f=u([]),h=u([]),_=w({page:1,limit:10}),o=w({student_id:"",teacher_id:"",book_id:""}),m=async()=>{l.value=!0;try{const{data:a}=await c.get("/book-assign",{params:_});b.value=a.assignments,d.value=a.pagination}catch(a){console.error(a)}finally{l.value=!1}},S=async()=>{const[a,t,s]=await Promise.all([c.get("/dashboard/teachers"),c.get("/dashboard/students"),c.get("/books",{params:{limit:100}})]);x.value=a.data,f.value=t.data,h.value=s.data.books??[]},V=async()=>{if(!(!o.student_id||!o.teacher_id||!o.book_id))try{l.value=!0,await c.post("/book-assign",o),o.student_id="",o.teacher_id="",o.book_id="",await m()}catch(a){console.error(a)}finally{l.value=!1}},$=async a=>{if(confirm("Remove this assignment?"))try{l.value=!0,await c.delete(`/book-assign/${a.id}`),await m()}catch(t){console.error(t)}finally{l.value=!1}},k=a=>{d.value&&(a<1||a>d.value.totalPages||(_.page=a,m()))};return R(async()=>{await S(),await m()}),(a,t)=>(r(),i(g,null,[B(C(j),{title:"Book Assignments"}),B(U,null,{header:A(()=>[...t[5]||(t[5]=[e("div",{class:"flex items-center justify-between"},[e("div",null,[e("h2",{class:"text-xl font-semibold leading-tight text-gray-800"}," Book Assignments "),e("p",{class:"text-sm text-gray-500"}," Track which materials each student should use and assign new resources. ")])],-1)])]),default:A(()=>[e("div",D,[e("div",F,[e("div",E,[e("div",I,[e("div",L,[e("div",O,[e("table",q,[t[7]||(t[7]=e("thead",{class:"bg-gray-50"},[e("tr",{class:"text-left text-xs font-semibold uppercase tracking-wider text-gray-500"},[e("th",{scope:"col",class:"px-6 py-3"}," Student "),e("th",{scope:"col",class:"px-6 py-3"}," Teacher "),e("th",{scope:"col",class:"px-6 py-3"}," Book "),e("th",{scope:"col",class:"px-6 py-3"}," Assigned By "),e("th",{scope:"col",class:"px-6 py-3"})])],-1)),e("tbody",z,[!l.value&&b.value.length===0?(r(),i("tr",G,[...t[6]||(t[6]=[e("td",{colspan:"5",class:"px-6 py-4 text-center text-sm text-gray-500"}," No book assignments yet. ",-1)])])):P("",!0),(r(!0),i(g,null,p(b.value,s=>(r(),i("tr",{key:s.id,class:"text-sm text-gray-700"},[e("td",H,n(s.student?.name??"—"),1),e("td",J,n(s.teacher?.name??"—"),1),e("td",K,n(s.book?.title??"—"),1),e("td",Q,n(s.assigned_by?.name??"—"),1),e("td",W,[e("div",X,[e("button",{onClick:N=>C(T).visit(a.route("assignments.show",s.id)),class:"rounded-md bg-blue-600 px-3 py-1.5 text-xs font-medium text-white hover:bg-blue-700"}," View ",8,Y),e("button",{onClick:M(N=>$(s),["stop"]),class:"rounded-md border border-red-300 px-3 py-1 text-xs font-semibold text-red-600 hover:bg-red-50",disabled:l.value}," Remove ",8,Z)])])]))),128))])])]),d.value?(r(),i("div",ee,[e("div",null," Page "+n(d.value.page)+" of "+n(d.value.totalPages??1),1),e("div",te,[e("button",{onClick:t[0]||(t[0]=s=>k(d.value.page-1)),class:"rounded-md border border-gray-300 px-3 py-1 hover:bg-gray-50",disabled:l.value||d.value.page===1}," Previous ",8,se),e("button",{onClick:t[1]||(t[1]=s=>k(d.value.page+1)),class:"rounded-md border border-gray-300 px-3 py-1 hover:bg-gray-50",disabled:l.value||d.value.page===d.value.totalPages}," Next ",8,oe)])])):P("",!0)])]),e("div",ae,[t[14]||(t[14]=e("h3",{class:"text-lg font-semibold text-gray-900"}," Assign Book ",-1)),t[15]||(t[15]=e("p",{class:"mt-1 text-sm text-gray-500"}," Pair a student with the appropriate learning material and teacher. ",-1)),e("div",le,[e("div",null,[t[9]||(t[9]=e("label",{class:"block text-sm font-medium text-gray-700"}," Student ",-1)),v(e("select",{"onUpdate:modelValue":t[2]||(t[2]=s=>o.student_id=s),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm"},[t[8]||(t[8]=e("option",{value:""},"Select student",-1)),(r(!0),i(g,null,p(f.value,s=>(r(),i("option",{key:s.id,value:s.id},n(s.name),9,de))),128))],512),[[y,o.student_id]])]),e("div",null,[t[11]||(t[11]=e("label",{class:"block text-sm font-medium text-gray-700"}," Teacher ",-1)),v(e("select",{"onUpdate:modelValue":t[3]||(t[3]=s=>o.teacher_id=s),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm"},[t[10]||(t[10]=e("option",{value:""},"Select teacher",-1)),(r(!0),i(g,null,p(x.value,s=>(r(),i("option",{key:s.id,value:s.id},n(s.name),9,ie))),128))],512),[[y,o.teacher_id]])]),e("div",null,[t[13]||(t[13]=e("label",{class:"block text-sm font-medium text-gray-700"}," Book ",-1)),v(e("select",{"onUpdate:modelValue":t[4]||(t[4]=s=>o.book_id=s),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm"},[t[12]||(t[12]=e("option",{value:""},"Select book",-1)),(r(!0),i(g,null,p(h.value,s=>(r(),i("option",{key:s.id,value:s.id},n(s.title),9,re))),128))],512),[[y,o.book_id]])]),e("button",{type:"button",onClick:V,class:"w-full rounded-md bg-indigo-600 px-4 py-2 text-sm font-semibold text-white shadow-sm hover:bg-indigo-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600",disabled:l.value||!o.student_id||!o.teacher_id||!o.book_id}," Assign ",8,ne)])])])])])]),_:1})],64))}};export{pe as default};
