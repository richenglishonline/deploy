import{u as D,r as d,j as m,o as k,c as p,a as o,b as n,h as $,w as r,d as e,e as L,t as l,g,f as _,F as M}from"./app-r5F7AQbe.js";import{j,d as B,k as E,a as H,_ as P}from"./AuthenticatedLayout-CNSH0xWk.js";import{_ as T}from"./AdvancedTable-DeA0jASj.js";import{_ as u}from"./Card-2P4Rmxrj.js";import{_ as U}from"./Badge-l3XqjddH.js";import{a as x}from"./api-COcabK3_.js";import{r as A}from"./ArrowTrendingUpIcon-CQhRoPeQ.js";import"./ArrowDownTrayIcon-DZwgirt0.js";import"./ArrowUpIcon-BRIgdKK5.js";import"./TrashIcon-Q9E64JkZ.js";const V={class:"space-y-6 pb-8"},C={class:"grid grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-4"},N={class:"flex items-center justify-between"},R={class:"mt-2 text-3xl font-semibold text-gray-900"},Y={class:"rounded-lg bg-blue-50 p-3"},I={class:"flex items-center justify-between"},q={class:"mt-2 text-3xl font-semibold text-gray-900"},z={class:"rounded-lg bg-green-50 p-3"},G={class:"flex items-center justify-between"},J={class:"mt-2 text-3xl font-semibold text-gray-900"},K={class:"rounded-lg bg-purple-50 p-3"},O={class:"flex items-center justify-between"},Q={class:"mt-2 text-3xl font-semibold text-gray-900"},W={class:"rounded-lg bg-orange-50 p-3"},X={class:"flex items-center gap-2 text-gray-900"},Z={class:"text-right font-medium text-gray-900"},tt={class:"text-center font-medium text-gray-900"},et={class:"text-center text-gray-900"},st={class:"text-right font-medium text-gray-900"},at={class:"text-right font-medium text-green-600"},rt={class:"text-right font-semibold text-gray-900"},ot={key:1,class:"space-y-4"},yt={__name:"Index",setup(lt){D();const c=d(!1),i=d([]),y=d(null),f=[{key:"period",label:"Period",sortable:!0},{key:"rate_per_hour",label:"Rate/Hour",sortable:!0,format:"currency",align:"right"},{key:"total_hours",label:"Hours",sortable:!0,align:"center",format:"number"},{key:"classes_count",label:"Classes",sortable:!0,align:"center"},{key:"base_salary",label:"Base Salary",sortable:!0,format:"currency",align:"right"},{key:"bonus",label:"Bonus",sortable:!0,format:"currency",align:"right"},{key:"total_salary",label:"Total",sortable:!0,format:"currency",align:"right"},{key:"status",label:"Status",sortable:!0,align:"center"}],h=[{key:"status",label:"Status",type:"select",options:[{value:"",label:"All Statuses"},{value:"paid",label:"Paid"},{value:"pending",label:"Pending"},{value:"processing",label:"Processing"}]}],b=async()=>{c.value=!0;try{const{data:a}=await x.get("/teacher/salary");i.value=Array.isArray(a.salaries||a.payouts||a)?(a.salaries||a.payouts||a).map(t=>({...t,period:t.period||`${new Date(t.start_date).toLocaleDateString()} - ${new Date(t.end_date).toLocaleDateString()}`,total_salary:(parseFloat(t.base_salary||0)+parseFloat(t.bonus||0)).toFixed(2),total_hours:t.total_hours||t.hours||0,classes_count:t.classes_count||t.classes||0,status:t.status||(t.processed_at?"paid":"pending")})):[]}catch(a){console.error("Error fetching salary:",a),i.value=[]}finally{c.value=!1}},v=async()=>{try{const{data:a}=await x.get("/dashboard/stats");y.value=a?.dashboard||{}}catch(a){console.error("Error fetching stats:",a)}},F=m(()=>i.value.reduce((a,t)=>a+parseFloat(t.total_salary||0),0).toFixed(2)),S=m(()=>{const a=new Date;return i.value.filter(t=>{const s=new Date(t.start_date||t.created_at);return s.getMonth()===a.getMonth()&&s.getFullYear()===a.getFullYear()}).reduce((t,s)=>t+parseFloat(s.total_salary||0),0).toFixed(2)}),w=m(()=>i.value.reduce((a,t)=>a+parseFloat(t.total_hours||0),0).toFixed(2));return k(()=>{b(),v()}),(a,t)=>(g(),p(M,null,[o(n($),{title:"My Salary"}),o(P,null,{default:r(()=>[e("div",V,[t[9]||(t[9]=e("div",null,[e("h1",{class:"text-3xl font-bold text-gray-900"},"My Salary"),e("p",{class:"mt-1 text-sm text-gray-500"}," View your earnings and payout history ")],-1)),e("div",C,[o(u,{class:"p-6"},{default:r(()=>[e("div",N,[e("div",null,[t[0]||(t[0]=e("p",{class:"text-sm font-medium text-gray-600"},"Total Earnings",-1)),e("p",R," $"+l(F.value.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})),1),t[1]||(t[1]=e("p",{class:"mt-1 text-xs text-gray-500"},"All time",-1))]),e("div",Y,[o(n(j),{class:"h-8 w-8 text-blue-600"})])])]),_:1}),o(u,{class:"p-6"},{default:r(()=>[e("div",I,[e("div",null,[t[2]||(t[2]=e("p",{class:"text-sm font-medium text-gray-600"},"This Month",-1)),e("p",q," $"+l(S.value.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})),1),t[3]||(t[3]=e("p",{class:"mt-1 text-xs text-green-600"},"+12% from last month",-1))]),e("div",z,[o(n(A),{class:"h-8 w-8 text-green-600"})])])]),_:1}),o(u,{class:"p-6"},{default:r(()=>[e("div",G,[e("div",null,[t[4]||(t[4]=e("p",{class:"text-sm font-medium text-gray-600"},"Total Hours",-1)),e("p",J,l(w.value)+"h ",1),t[5]||(t[5]=e("p",{class:"mt-1 text-xs text-gray-500"},"Hours worked",-1))]),e("div",K,[o(n(B),{class:"h-8 w-8 text-purple-600"})])])]),_:1}),o(u,{class:"p-6"},{default:r(()=>[e("div",O,[e("div",null,[t[6]||(t[6]=e("p",{class:"text-sm font-medium text-gray-600"},"Current Rate",-1)),e("p",Q," $"+l(i.value.length>0?parseFloat(i.value[0]?.rate_per_hour||0).toFixed(2):"0.00")+"/hr ",1),t[7]||(t[7]=e("p",{class:"mt-1 text-xs text-gray-500"},"Per hour",-1))]),e("div",W,[o(n(E),{class:"h-8 w-8 text-orange-600"})])])]),_:1})]),c.value?(g(),p("div",ot,[...t[8]||(t[8]=[e("div",{class:"h-64 rounded-xl bg-gray-200 animate-pulse"},null,-1)])])):(g(),L(T,{key:0,title:"Salary History",columns:f,data:i.value,searchable:!0,paginated:!0,filters:h,"items-per-page":25,"row-key":"id"},{"cell-period":r(({row:s})=>[e("div",X,[o(n(H),{class:"h-4 w-4 text-gray-400"}),_(" "+l(s.period||"â€”"),1)])]),"cell-rate_per_hour":r(({row:s})=>[e("div",Z," $"+l(parseFloat(s.rate_per_hour||0).toFixed(2)),1)]),"cell-total_hours":r(({row:s})=>[e("div",tt,l(parseFloat(s.total_hours||0).toFixed(2))+"h ",1)]),"cell-classes_count":r(({row:s})=>[e("div",et,l(s.classes_count||0),1)]),"cell-base_salary":r(({row:s})=>[e("div",st," $"+l(parseFloat(s.base_salary||0).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})),1)]),"cell-bonus":r(({row:s})=>[e("div",at," +$"+l(parseFloat(s.bonus||0).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})),1)]),"cell-total_salary":r(({row:s})=>[e("div",rt," $"+l(parseFloat(s.total_salary||0).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})),1)]),"cell-status":r(({row:s})=>[o(U,{variant:s.status==="paid"?"success":s.status==="processing"?"warning":"secondary"},{default:r(()=>[_(l(s.status||"pending"),1)]),_:2},1032,["variant"])]),_:1},8,["data"]))])]),_:1})],64))}};export{yt as default};
