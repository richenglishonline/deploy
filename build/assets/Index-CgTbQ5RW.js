import{u as T,r as m,o as S,c as _,a as l,b as o,h as V,w as n,d as e,e as j,t as r,g as c,f as g,n as E,y as B,k as N,F as U,i as y}from"./app-Cmmq__Tw.js";import{b as F,e as h,a as I,_ as M}from"./AuthenticatedLayout-B2GbnFPi.js";import{_ as P}from"./AdvancedTable-CIaIA73U.js";import{_ as p}from"./Badge-BZFBi4LI.js";import{_ as f}from"./Card-CcoMGp7w.js";import{a as x}from"./api-BS-ONIJM.js";import{r as z}from"./CheckCircleIcon-Cn5KpQJI.js";import{r as D}from"./EyeIcon-DroDtrWB.js";import{r as R}from"./PencilIcon-BCql_y0B.js";import"./ArrowDownTrayIcon-CzbVfJHZ.js";import"./ArrowUpIcon-DRFX-h9Y.js";import"./TrashIcon-DD0p8Ace.js";const q={class:"space-y-6 pb-8"},G={class:"grid grid-cols-1 gap-6 sm:grid-cols-3"},H={class:"flex items-center justify-between"},J={class:"mt-2 text-3xl font-semibold text-gray-900"},K={class:"rounded-lg bg-blue-50 p-3"},L={class:"flex items-center justify-between"},O={class:"mt-2 text-3xl font-semibold text-gray-900"},Q={class:"rounded-lg bg-green-50 p-3"},W={class:"flex items-center justify-between"},X={class:"mt-2 text-3xl font-semibold text-gray-900"},Y={class:"rounded-lg bg-purple-50 p-3"},Z={class:"flex items-center gap-3"},ee={class:"flex h-10 w-10 items-center justify-center rounded-full bg-gradient-to-br from-indigo-500 to-purple-600"},te={class:"text-sm font-semibold text-white"},se={class:"font-medium text-gray-900"},ae={key:0,class:"text-xs text-gray-500"},le={class:"text-gray-900"},ne={class:"text-gray-900"},re={class:"flex items-center gap-2"},ie={class:"font-medium text-gray-900"},oe={class:"h-2 w-16 rounded-full bg-gray-200"},de={class:"flex items-center justify-end gap-2"},ce=["onClick"],ue=["onClick"],me={key:1,class:"space-y-4"},Ce={__name:"Index",setup(_e){T();const u=m(!1),i=m([]),v=m(null),b=[{key:"name",label:"Teacher",sortable:!0},{key:"email",label:"Email",sortable:!0},{key:"country",label:"Country",sortable:!0},{key:"students_count",label:"Assigned Students",sortable:!0,align:"center"},{key:"classes_count",label:"Classes This Month",sortable:!0,align:"center"},{key:"attendance_rate",label:"Attendance Rate",sortable:!0,align:"center",format:"percentage"},{key:"status",label:"Status",sortable:!0,align:"center"}],k=[{key:"country",label:"Country",type:"select",options:[{value:"",label:"All Countries"},{value:"Philippines",label:"Philippines"},{value:"USA",label:"USA"},{value:"India",label:"India"}]}],A=async()=>{u.value=!0;try{const{data:a}=await x.get("/admin/teachers");i.value=Array.isArray(a.teachers||a)?(a.teachers||a).map(s=>({...s,name:`${s.first_name||""} ${s.last_name||""}`.trim()||s.email||"Unnamed Teacher",students_count:s.students?.length||0,classes_count:s.classes_this_month||0,attendance_rate:s.attendance_rate||0,status:s.accepted?"active":"pending"})):[]}catch(a){console.error("Error fetching teachers:",a),i.value=[]}finally{u.value=!1}},$=async()=>{try{const{data:a}=await x.get("/dashboard/stats");v.value=a?.stats||{}}catch(a){console.error("Error fetching stats:",a)}},w=a=>{y.visit(`/admin/teachers/${a.id}`)},C=a=>{y.visit(`/admin/teachers/${a.id}/edit`)};return S(()=>{A(),$()}),(a,s)=>(c(),_(U,null,[l(o(V),{title:"Assigned Teachers"}),l(M,null,{default:n(()=>[e("div",q,[s[7]||(s[7]=e("div",null,[e("h1",{class:"text-3xl font-bold text-gray-900"},"Assigned Teachers"),e("p",{class:"mt-1 text-sm text-gray-500"}," View and manage teachers assigned to you ")],-1)),e("div",G,[l(f,{class:"p-6"},{default:n(()=>[e("div",H,[e("div",null,[s[0]||(s[0]=e("p",{class:"text-sm font-medium text-gray-600"},"Assigned Teachers",-1)),e("p",J,r(i.value.length),1),s[1]||(s[1]=e("p",{class:"mt-1 text-xs text-gray-500"},"Total assigned",-1))]),e("div",K,[l(o(F),{class:"h-8 w-8 text-blue-600"})])])]),_:1}),l(f,{class:"p-6"},{default:n(()=>[e("div",L,[e("div",null,[s[2]||(s[2]=e("p",{class:"text-sm font-medium text-gray-600"},"Total Students",-1)),e("p",O,r(i.value.reduce((t,d)=>t+(d.students_count||0),0)),1),s[3]||(s[3]=e("p",{class:"mt-1 text-xs text-gray-500"},"Across all teachers",-1))]),e("div",Q,[l(o(h),{class:"h-8 w-8 text-green-600"})])])]),_:1}),l(f,{class:"p-6"},{default:n(()=>[e("div",W,[e("div",null,[s[4]||(s[4]=e("p",{class:"text-sm font-medium text-gray-600"},"Avg Attendance",-1)),e("p",X,r(i.value.length>0?(i.value.reduce((t,d)=>t+(d.attendance_rate||0),0)/i.value.length).toFixed(1):"0")+"% ",1),s[5]||(s[5]=e("p",{class:"mt-1 text-xs text-gray-500"},"Average rate",-1))]),e("div",Y,[l(o(z),{class:"h-8 w-8 text-purple-600"})])])]),_:1})]),u.value?(c(),_("div",me,[...s[6]||(s[6]=[e("div",{class:"h-64 rounded-xl bg-gray-200 animate-pulse"},null,-1)])])):(c(),j(P,{key:0,title:"All Assigned Teachers",columns:b,data:i.value,searchable:!0,paginated:!0,filters:k,"items-per-page":25,"row-key":"id"},{"cell-name":n(({row:t})=>[e("div",Z,[e("div",ee,[e("span",te,r(t.name.split(" ").map(d=>d[0]).join("").toUpperCase().slice(0,2)),1)]),e("div",null,[e("div",se,r(t.name),1),t.degree?(c(),_("div",ae,r(t.degree),1)):N("",!0)])])]),"cell-email":n(({row:t})=>[e("div",le,r(t.email||"—"),1)]),"cell-country":n(({row:t})=>[e("div",ne,r(t.country||"—"),1)]),"cell-students_count":n(({row:t})=>[l(p,{variant:"secondary"},{default:n(()=>[l(o(h),{class:"h-3 w-3 mr-1 inline"}),g(" "+r(t.students_count||0),1)]),_:2},1024)]),"cell-classes_count":n(({row:t})=>[l(p,{variant:"secondary"},{default:n(()=>[l(o(I),{class:"h-3 w-3 mr-1 inline"}),g(" "+r(t.classes_count||0),1)]),_:2},1024)]),"cell-attendance_rate":n(({row:t})=>[e("div",re,[e("span",ie,r(t.attendance_rate||0)+"%",1),e("div",oe,[e("div",{class:B(["h-2 rounded-full",{"bg-green-500":t.attendance_rate>=90,"bg-yellow-500":t.attendance_rate>=75&&t.attendance_rate<90,"bg-red-500":t.attendance_rate<75}]),style:E({width:`${Math.min(t.attendance_rate||0,100)}%`})},null,6)])])]),"cell-status":n(({row:t})=>[l(p,{variant:t.status==="active"?"success":"warning"},{default:n(()=>[g(r(t.status||"active"),1)]),_:2},1032,["variant"])]),"row-actions":n(({row:t})=>[e("div",de,[e("button",{onClick:d=>w(t),class:"rounded-lg p-2 text-gray-400 hover:bg-gray-100 hover:text-blue-600 transition-colors",title:"View Details"},[l(o(D),{class:"h-5 w-5"})],8,ce),e("button",{onClick:d=>C(t),class:"rounded-lg p-2 text-gray-400 hover:bg-gray-100 hover:text-blue-600 transition-colors",title:"Edit"},[l(o(R),{class:"h-5 w-5"})],8,ue)])]),_:1},8,["data"]))])]),_:1})],64))}};export{Ce as default};
