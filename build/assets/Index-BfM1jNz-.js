import{c as a,d as t,f as s,r as m,U as F,o as R,b as c,u as d,h as U,w as _,e as r,k as z,q as A,F as g,g as T,s as x,p as $,n as M,G as B,t as l,i as D,j as L}from"./app-m0EauCUY.js";import{j as y,g as f,d as b,b as k,_ as Z}from"./AuthenticatedLayout-OkZKskr4.js";import{a as G}from"./api-p6Oc_tdf.js";import{_ as Q}from"./Button-BNk2yZr1.js";function w(N,p){return s(),a("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15.75 6a3.75 3.75 0 1 1-7.5 0 3.75 3.75 0 0 1 7.5 0ZM4.501 20.118a7.5 7.5 0 0 1 14.998 0A17.933 17.933 0 0 1 12 21.75c-2.676 0-5.216-.584-7.499-1.632Z"})])}const H={class:"py-10"},J={class:"mx-auto max-w-7xl space-y-6 px-4 sm:px-6 lg:px-8"},K={class:"rounded-lg border border-gray-200 bg-white p-6 shadow-sm"},O={class:"space-y-4"},P={class:"relative"},W={class:"absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none"},X={class:"flex flex-wrap gap-2"},Y=["onClick"],ee={key:0,class:"text-center py-12"},te={key:1,class:"rounded-lg border border-gray-200 bg-white p-6 shadow-sm"},se={class:"flex flex-wrap gap-4 text-sm"},ae={class:"flex items-center gap-2"},oe={class:"text-gray-900"},ne={key:0,class:"flex items-center gap-2"},re={class:"text-gray-700"},le={key:1,class:"flex items-center gap-2"},ie={class:"text-gray-700"},ce={key:2,class:"flex items-center gap-2"},de={class:"text-gray-700"},ue={key:3,class:"flex items-center gap-2"},me={class:"text-gray-700"},ye={key:2,class:"space-y-4"},pe=["onClick"],he={class:"flex items-start gap-4"},ve={class:"flex-1 min-w-0"},_e={class:"flex items-center gap-2 mb-1"},ge={class:"text-lg font-semibold text-gray-900"},xe={class:"text-sm text-gray-600 space-y-1"},fe={key:0},be={key:0},ke={key:1},we={key:2},Se={key:1},Ce={key:0},Te={key:1},$e={key:2},Me={key:0},Be={key:1},De={key:2},Ne={key:3},Ve={key:3},je={key:0},qe={key:3,class:"text-center py-12"},Ee={key:4,class:"text-center py-12"},ze={__name:"Index",setup(N){const p=m(!1),u=m(""),h=m("all"),o=m(null),v=m(null),V=[{value:"all",label:"All",icon:y},{value:"students",label:"Students",icon:f},{value:"teachers",label:"Teachers",icon:w},{value:"classes",label:"Classes",icon:b},{value:"books",label:"Books",icon:k}],j=async()=>{if(!u.value.trim()){o.value=null;return}p.value=!0;try{const{data:i}=await G.get("/search",{params:{q:u.value,type:h.value}});o.value=i}catch(i){console.error("Error searching:",i)}finally{p.value=!1}},q=()=>{v.value&&clearTimeout(v.value),v.value=setTimeout(()=>{j()},300)};F([u,h],()=>{q()});const E=i=>i?new Date(i).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"â€”",I=i=>({student:f,teacher:w,class:b,book:k})[i]||y,S=i=>({student:"bg-blue-100 text-blue-800",teacher:"bg-purple-100 text-purple-800",class:"bg-green-100 text-green-800",book:"bg-yellow-100 text-yellow-800"})[i]||"bg-gray-100 text-gray-800";return R(()=>{const i=document.querySelector('input[type="text"]');i&&i.focus()}),(i,n)=>(s(),a(g,null,[c(d(U),{title:"Search"}),c(Z,null,{header:_(()=>[...n[1]||(n[1]=[t("div",{class:"flex items-center justify-between"},[t("div",null,[t("h2",{class:"text-xl font-semibold leading-tight text-gray-800"}," Search "),t("p",{class:"text-sm text-gray-500"}," Search across students, teachers, classes, and books. ")])],-1)])]),default:_(()=>[t("div",H,[t("div",J,[t("div",K,[t("div",O,[t("div",P,[t("div",W,[c(d(y),{class:"h-5 w-5 text-gray-400"})]),z(t("input",{"onUpdate:modelValue":n[0]||(n[0]=e=>u.value=e),type:"text",placeholder:"Search students, teachers, classes, books...",class:"block w-full pl-10 pr-3 py-3 border border-gray-300 rounded-md leading-5 bg-white placeholder-gray-500 focus:outline-none focus:placeholder-gray-400 focus:ring-1 focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"},null,512),[[A,u.value]])]),t("div",X,[(s(),a(g,null,T(V,e=>t("button",{key:e.value,onClick:C=>h.value=e.value,class:x(["flex items-center gap-2 px-4 py-2 rounded-md text-sm font-medium transition-colors",h.value===e.value?"bg-indigo-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"])},[(s(),$(B(e.icon),{class:"h-4 w-4"})),M(" "+l(e.label),1)],10,Y)),64))])])]),p.value?(s(),a("div",ee,[...n[2]||(n[2]=[t("p",{class:"text-gray-500"},"Searching...",-1)])])):r("",!0),o.value&&o.value.summary&&o.value.summary.total>0?(s(),a("div",te,[n[4]||(n[4]=t("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Search Results",-1)),t("div",se,[t("div",ae,[n[3]||(n[3]=t("span",{class:"font-medium text-gray-700"},"Total:",-1)),t("span",oe,l(o.value.summary.total),1)]),o.value.summary.students>0?(s(),a("div",ne,[c(d(f),{class:"h-4 w-4 text-blue-500"}),t("span",re,l(o.value.summary.students)+" Students",1)])):r("",!0),o.value.summary.teachers>0?(s(),a("div",le,[c(d(w),{class:"h-4 w-4 text-purple-500"}),t("span",ie,l(o.value.summary.teachers)+" Teachers",1)])):r("",!0),o.value.summary.classes>0?(s(),a("div",ce,[c(d(b),{class:"h-4 w-4 text-green-500"}),t("span",de,l(o.value.summary.classes)+" Classes",1)])):r("",!0),o.value.summary.books>0?(s(),a("div",ue,[c(d(k),{class:"h-4 w-4 text-yellow-500"}),t("span",me,l(o.value.summary.books)+" Books",1)])):r("",!0)])])):r("",!0),o.value&&o.value.results&&o.value.results.length>0?(s(),a("div",ye,[(s(!0),a(g,null,T(o.value.results,e=>(s(),a("div",{key:`${e.type}-${e.id}`,class:"rounded-lg border border-gray-200 bg-white p-4 shadow-sm hover:shadow-md transition-shadow cursor-pointer",onClick:C=>d(D).visit(e.url)},[t("div",he,[t("div",{class:x(["p-2 rounded-md",S(e.type)])},[(s(),$(B(I(e.type)),{class:"h-5 w-5"}))],2),t("div",ve,[t("div",_e,[t("h4",ge,l(e.name||e.title||`${e.teacher} - ${e.student}`),1),t("span",{class:x(["px-2 py-1 text-xs font-medium rounded",S(e.type)])},l(e.type),3)]),t("div",xe,[e.type==="student"?(s(),a("div",fe,[e.email?(s(),a("p",be,"Email: "+l(e.email),1)):r("",!0),e.identifier?(s(),a("p",ke,"ID: "+l(e.identifier),1)):r("",!0),e.nationality?(s(),a("p",we,"Nationality: "+l(e.nationality),1)):r("",!0)])):e.type==="teacher"?(s(),a("div",Se,[e.email?(s(),a("p",Ce,"Email: "+l(e.email),1)):r("",!0),e.role?(s(),a("p",Te,"Role: "+l(e.role),1)):r("",!0)])):e.type==="class"?(s(),a("div",$e,[e.teacher?(s(),a("p",Me,"Teacher: "+l(e.teacher),1)):r("",!0),e.student?(s(),a("p",Be,"Student: "+l(e.student),1)):r("",!0),e.book?(s(),a("p",De,"Book: "+l(e.book),1)):r("",!0),e.date?(s(),a("p",Ne,"Date: "+l(E(e.date))+" "+l(e.time),1)):r("",!0)])):e.type==="book"?(s(),a("div",Ve,[e.filename?(s(),a("p",je,"Filename: "+l(e.filename),1)):r("",!0)])):r("",!0)])]),c(Q,{onClick:L(C=>d(D).visit(e.url),["stop"]),variant:"outline",size:"sm"},{default:_(()=>[...n[5]||(n[5]=[M(" View ",-1)])]),_:1},8,["onClick"])])],8,pe))),128))])):r("",!0),o.value&&o.value.results&&o.value.results.length===0?(s(),a("div",qe,[c(d(y),{class:"mx-auto h-12 w-12 text-gray-400"}),n[6]||(n[6]=t("h3",{class:"mt-2 text-sm font-medium text-gray-900"},"No results found",-1)),n[7]||(n[7]=t("p",{class:"mt-1 text-sm text-gray-500"},"Try adjusting your search query.",-1))])):r("",!0),!u.value&&!o.value?(s(),a("div",Ee,[c(d(y),{class:"mx-auto h-12 w-12 text-gray-400"}),n[8]||(n[8]=t("h3",{class:"mt-2 text-sm font-medium text-gray-900"},"Start searching",-1)),n[9]||(n[9]=t("p",{class:"mt-1 text-sm text-gray-500"},"Enter a search query to find students, teachers, classes, or books.",-1))])):r("",!0)])])]),_:1})],64))}};export{ze as default};
