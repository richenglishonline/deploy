import{u as N,j as _,r as b,o as V,c as r,a as i,b as d,h as R,w as c,d as t,k as g,g as a,F as v,t as n,f as u,q as T,i as x}from"./app-r5F7AQbe.js";import{f as w,g as k,_ as j}from"./AuthenticatedLayout-CNSH0xWk.js";import{a as B}from"./api-COcabK3_.js";import{_ as E}from"./Button-BteD-aKC.js";import{r as I}from"./ArrowLeftIcon-BACRiqUn.js";const L={class:"flex items-center gap-4"},U={class:"text-sm text-gray-500"},q={class:"py-10"},F={class:"mx-auto max-w-7xl space-y-6 px-4 sm:px-6 lg:px-8"},G={key:0,class:"text-center py-12 text-gray-500"},M={class:"rounded-lg border border-gray-200 bg-white shadow-sm"},z={class:"px-6 py-4"},H={class:"grid grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-3"},O={class:"mt-1 text-sm text-gray-900"},P={class:"mt-1 text-sm text-gray-900"},Y={class:"mt-1 text-sm text-gray-900"},J={class:"mt-1 text-sm text-gray-900"},K={class:"mt-1 text-sm text-gray-900"},Q={class:"mt-1 text-sm text-gray-900"},W={class:"mt-1 text-sm text-gray-900"},X={class:"mt-1 text-sm text-gray-900"},Z={class:"sm:col-span-2 lg:col-span-3"},tt={class:"mt-1 text-sm text-gray-900"},et={key:0,class:"rounded-lg border border-gray-200 bg-white shadow-sm"},st={class:"border-b border-gray-200 px-6 py-4"},ot={class:"text-lg font-semibold text-gray-900 flex items-center gap-2"},rt={class:"px-6 py-4"},at={class:"grid grid-cols-2 gap-4 sm:grid-cols-3 lg:grid-cols-4"},nt=["onClick"],dt=["src","alt"],it={key:1,class:"flex items-center justify-center h-full text-gray-400"},lt={key:1,class:"rounded-lg border border-gray-200 bg-white shadow-sm"},ut={class:"border-b border-gray-200 px-6 py-4"},mt={class:"text-lg font-semibold text-gray-900 flex items-center gap-2"},ct={class:"px-6 py-4"},gt={key:0,class:"w-full"},vt=["src"],xt={key:1,class:"text-center py-8"},yt=["href"],pt={key:2,class:"text-center py-8 text-gray-500"},ft={class:"mt-4"},$t={__name:"Show",props:{attendanceId:{type:[String,Number],required:!0}},setup(D){const $=D,S=N(),A=_(()=>S.props.auth?.user?.role??"teacher");_(()=>["admin","super-admin"].includes(A.value));const m=b(!1),s=b(null),C=async()=>{m.value=!0;try{const{data:o}=await B.get(`/attendance/${$.attendanceId}`);s.value=o}catch(o){console.error("Error fetching attendance:",o)}finally{m.value=!1}},y=o=>o?new Date(o).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"—",p=o=>o??"—",f=o=>o?o.drive?.link?o.drive.link:o.path?`/storage/${o.path}`:null:null,h=o=>o?o.drive?.link?o.drive.link:o.path?`/storage/${o.path}`:null:null;return V(C),(o,e)=>(a(),r(v,null,[i(d(R),{title:(s.value,"Attendance Details")},null,8,["title"]),i(j,null,{header:c(()=>[t("div",L,[t("button",{onClick:e[0]||(e[0]=l=>d(x).visit(o.route("attendance.index"))),class:"rounded-md p-2 text-gray-400 hover:bg-gray-100 hover:text-gray-600"},[i(d(I),{class:"h-5 w-5"})]),t("div",null,[e[2]||(e[2]=t("h2",{class:"text-xl font-semibold leading-tight text-gray-800"},"Attendance Details",-1)),t("p",U,n(y(s.value?.date)),1)])])]),default:c(()=>[t("div",q,[t("div",F,[m.value&&!s.value?(a(),r("div",G,"Loading attendance information...")):s.value?(a(),r(v,{key:1},[t("div",M,[e[12]||(e[12]=t("div",{class:"border-b border-gray-200 px-6 py-4"},[t("h3",{class:"text-lg font-semibold text-gray-900"},"Attendance Information")],-1)),t("div",z,[t("dl",H,[t("div",null,[e[3]||(e[3]=t("dt",{class:"text-sm font-medium text-gray-500"},"Date",-1)),t("dd",O,n(y(s.value.date)),1)]),t("div",null,[e[4]||(e[4]=t("dt",{class:"text-sm font-medium text-gray-500"},"Teacher",-1)),t("dd",P,n(s.value.teacher?.name??"—"),1)]),t("div",null,[e[5]||(e[5]=t("dt",{class:"text-sm font-medium text-gray-500"},"Student",-1)),t("dd",Y,n(s.value.student?.name??"—"),1)]),t("div",null,[e[6]||(e[6]=t("dt",{class:"text-sm font-medium text-gray-500"},"Duration",-1)),t("dd",J,n(s.value.duration??"—")+" min",1)]),t("div",null,[e[7]||(e[7]=t("dt",{class:"text-sm font-medium text-gray-500"},"Minutes Attended",-1)),t("dd",K,n(s.value.minutes_attended??"—")+" min",1)]),t("div",null,[e[8]||(e[8]=t("dt",{class:"text-sm font-medium text-gray-500"},"Hours",-1)),t("dd",Q,n(s.value.hours??"—")+" hrs",1)]),t("div",null,[e[9]||(e[9]=t("dt",{class:"text-sm font-medium text-gray-500"},"Start Time",-1)),t("dd",W,n(p(s.value.start_time)),1)]),t("div",null,[e[10]||(e[10]=t("dt",{class:"text-sm font-medium text-gray-500"},"End Time",-1)),t("dd",X,n(p(s.value.end_time)),1)]),t("div",Z,[e[11]||(e[11]=t("dt",{class:"text-sm font-medium text-gray-500"},"Notes",-1)),t("dd",tt,n(s.value.notes??"—"),1)])])])]),s.value.screenshots&&s.value.screenshots.length>0?(a(),r("div",et,[t("div",st,[t("h3",ot,[i(d(w),{class:"h-5 w-5"}),u(" Screenshots ("+n(s.value.screenshots.length)+") ",1)])]),t("div",rt,[t("div",at,[(a(!0),r(v,null,T(s.value.screenshots,l=>(a(),r("div",{key:l.id,class:"group relative aspect-video overflow-hidden rounded-lg border border-gray-200 bg-gray-100 cursor-pointer hover:shadow-md transition-shadow",onClick:ht=>d(x).visit(o.route("screenshots.show",l.id))},[f(l)?(a(),r("img",{key:0,src:f(l),alt:l.filename,class:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-200"},null,8,dt)):(a(),r("div",it,[i(d(w),{class:"h-8 w-8"})])),e[13]||(e[13]=t("div",{class:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-20 transition-opacity flex items-center justify-center"},[t("span",{class:"text-white text-sm font-medium opacity-0 group-hover:opacity-100 transition-opacity"},"View")],-1))],8,nt))),128))])])])):g("",!0),s.value.recording?(a(),r("div",lt,[t("div",ut,[t("h3",mt,[i(d(k),{class:"h-5 w-5"}),e[14]||(e[14]=u(" Recording ",-1))])]),t("div",ct,[h(s.value.recording)?(a(),r("div",gt,[t("video",{src:h(s.value.recording),controls:"",class:"w-full rounded-lg",style:{"max-height":"600px"}}," Your browser does not support the video tag. ",8,vt)])):s.value.recording.drive?.link?(a(),r("div",xt,[e[16]||(e[16]=t("p",{class:"text-gray-500 mb-4"},"Recording available on Google Drive",-1)),t("a",{href:s.value.recording.drive.link,target:"_blank",class:"inline-flex items-center gap-2 rounded-md bg-blue-600 px-4 py-2 text-sm font-semibold text-white shadow-sm hover:bg-blue-500"},[i(d(k),{class:"h-4 w-4"}),e[15]||(e[15]=u(" Open in Google Drive ",-1))],8,yt)])):(a(),r("div",pt," Recording file not available ")),t("div",ft,[i(E,{onClick:e[1]||(e[1]=l=>d(x).visit(o.route("recordings.show",s.value.recording.id))),variant:"outline",size:"sm"},{default:c(()=>[...e[17]||(e[17]=[u(" View Recording Details ",-1)])]),_:1})])])])):g("",!0)],64)):g("",!0)])])]),_:1})],64))}};export{$t as default};
