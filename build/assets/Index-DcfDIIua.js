import{l as R,m as z,r as y,a as I,o as L,c,b as g,u as v,h as q,w as f,d as t,e as h,f as m,t as l,k as _,F as w,g as P,v as T,q as F,s as O,j as G,i as H,n as B}from"./app-CIgItLJv.js";import{f as V,_ as J}from"./AuthenticatedLayout-DJwHHg2a.js";import{a as U}from"./api-VVF87TnZ.js";import{_ as A}from"./Button-B0tF0lTV.js";import{r as M}from"./BanknotesIcon-9M_nN-Yf.js";const K={class:"flex items-center justify-between"},Q={class:"py-10"},W={class:"mx-auto max-w-7xl space-y-6 px-4 sm:px-6 lg:px-8"},X={key:0,class:"grid grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-4"},Y={class:"rounded-lg border border-gray-200 bg-white p-6 shadow-sm"},Z={class:"flex items-center"},tt={class:"flex-shrink-0"},et={class:"ml-4"},st={class:"text-2xl font-semibold text-gray-900"},ot={class:"rounded-lg border border-gray-200 bg-white p-6 shadow-sm"},at={class:"flex items-center"},lt={class:"flex-shrink-0"},dt={class:"ml-4"},rt={class:"text-2xl font-semibold text-gray-900"},it={class:"rounded-lg border border-gray-200 bg-white p-6 shadow-sm"},nt={class:"flex items-center"},ut={class:"flex-shrink-0"},ct={class:"ml-4"},gt={class:"text-2xl font-semibold text-gray-900"},mt={class:"rounded-lg border border-gray-200 bg-white p-6 shadow-sm"},pt={class:"flex items-center"},xt={class:"flex-shrink-0"},vt={class:"ml-4"},bt={class:"text-2xl font-semibold text-gray-900"},yt={class:"rounded-lg border border-gray-200 bg-white p-6 shadow-sm"},ft={class:"grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-4"},_t=["value"],ht={class:"flex items-end gap-3 sm:col-span-2 lg:col-span-4"},wt=["disabled"],kt=["disabled"],St={class:"overflow-hidden rounded-lg border border-gray-200 bg-white shadow-sm"},Ct={class:"overflow-x-auto"},Dt={class:"min-w-full divide-y divide-gray-200"},Pt={class:"divide-y divide-gray-200 bg-white"},Tt={key:0},Ft={class:"px-6 py-4"},Bt={class:"font-medium text-gray-900"},Vt={class:"px-6 py-4"},Ut={class:"px-6 py-4"},At={class:"px-6 py-4"},Mt={class:"px-6 py-4"},$t={class:"px-6 py-4 font-semibold text-gray-900"},Nt={class:"px-6 py-4"},Et={key:0,class:"flex flex-col items-center justify-between gap-4 border-t border-gray-100 px-6 py-4 text-sm text-gray-600 sm:flex-row"},jt={class:"flex items-center gap-2"},Rt=["disabled"],zt=["disabled"],Jt={__name:"Index",setup(It){const $=R();z(()=>$.props.auth?.user?.role==="super-admin");const n=y(!1),r=y([]),i=y(null),k=y([]),x=y(null),a=I({teacher_id:"",status:"",start_date:"",end_date:"",page:1,limit:20}),N=async()=>{try{const o=await U.get("/dashboard/teachers");k.value=o.data}catch(o){console.error("Error loading filters:",o)}},b=async()=>{n.value=!0;try{const{data:o}=await U.get("/salary",{params:a});r.value=o.salaries,i.value=o.pagination;const e=r.value.reduce((d,p)=>d+(parseFloat(p.total_amount)||0),0),s=r.value.reduce((d,p)=>d+(parseFloat(p.base_salary)||0),0),D=r.value.reduce((d,p)=>d+(parseFloat(p.bonus)||0),0),j=r.value.reduce((d,p)=>d+(parseFloat(p.deduction)||0),0);x.value={total_salaries:r.value.length,total_amount:e,total_base:s,total_bonus:D,total_deduction:j,pending:r.value.filter(d=>d.status==="pending").length,processing:r.value.filter(d=>d.status==="processing").length,paid:r.value.filter(d=>d.status==="paid").length}}catch(o){console.error("Error fetching salaries:",o)}finally{n.value=!1}},S=o=>{i.value&&(o<1||o>i.value.totalPages||(a.page=o,b()))},E=()=>{a.teacher_id="",a.status="",a.start_date="",a.end_date="",a.page=1,b()},C=o=>o?new Date(o).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"â€”",u=o=>o?new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(o):"$0.00";return L(async()=>{await N(),await b()}),(o,e)=>(m(),c(w,null,[g(v(q),{title:"Salary Management"}),g(J,null,{header:f(()=>[t("div",K,[e[9]||(e[9]=t("div",null,[t("h2",{class:"text-xl font-semibold leading-tight text-gray-800"}," Salary Management "),t("p",{class:"text-sm text-gray-500"}," Manage teacher salaries and payouts with comprehensive analytics. ")],-1)),g(A,{onClick:b,disabled:n.value},{default:f(()=>[...e[8]||(e[8]=[B(" Refresh ",-1)])]),_:1},8,["disabled"])])]),default:f(()=>[t("div",Q,[t("div",W,[x.value?(m(),c("div",X,[t("div",Y,[t("div",Z,[t("div",tt,[g(v(M),{class:"h-8 w-8 text-green-600"})]),t("div",et,[e[10]||(e[10]=t("p",{class:"text-sm font-medium text-gray-500"}," Total Amount ",-1)),t("p",st,l(u(x.value.total_amount)),1)])])]),t("div",ot,[t("div",at,[t("div",lt,[g(v(V),{class:"h-8 w-8 text-blue-600"})]),t("div",dt,[e[11]||(e[11]=t("p",{class:"text-sm font-medium text-gray-500"},"Total Base Salary",-1)),t("p",rt,l(u(x.value.total_base)),1)])])]),t("div",it,[t("div",nt,[t("div",ut,[g(v(V),{class:"h-8 w-8 text-purple-600"})]),t("div",ct,[e[12]||(e[12]=t("p",{class:"text-sm font-medium text-gray-500"},"Total Bonus",-1)),t("p",gt,l(u(x.value.total_bonus)),1)])])]),t("div",mt,[t("div",pt,[t("div",xt,[g(v(M),{class:"h-8 w-8 text-yellow-600"})]),t("div",vt,[e[13]||(e[13]=t("p",{class:"text-sm font-medium text-gray-500"},"Total Deduction",-1)),t("p",bt,l(u(x.value.total_deduction)),1)])])])])):h("",!0),t("div",yt,[t("form",ft,[t("div",null,[e[15]||(e[15]=t("label",{class:"block text-sm font-medium text-gray-700"}," Teacher ",-1)),_(t("select",{"onUpdate:modelValue":e[0]||(e[0]=s=>a.teacher_id=s),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm"},[e[14]||(e[14]=t("option",{value:""},"All Teachers",-1)),(m(!0),c(w,null,P(k.value,s=>(m(),c("option",{key:s.id,value:s.id},l(s.name),9,_t))),128))],512),[[T,a.teacher_id]])]),t("div",null,[e[17]||(e[17]=t("label",{class:"block text-sm font-medium text-gray-700"}," Status ",-1)),_(t("select",{"onUpdate:modelValue":e[1]||(e[1]=s=>a.status=s),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm"},[...e[16]||(e[16]=[t("option",{value:""},"All Statuses",-1),t("option",{value:"pending"},"Pending",-1),t("option",{value:"processing"},"Processing",-1),t("option",{value:"paid"},"Paid",-1)])],512),[[T,a.status]])]),t("div",null,[e[18]||(e[18]=t("label",{class:"block text-sm font-medium text-gray-700"}," Start Date ",-1)),_(t("input",{"onUpdate:modelValue":e[2]||(e[2]=s=>a.start_date=s),type:"date",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm"},null,512),[[F,a.start_date]])]),t("div",null,[e[19]||(e[19]=t("label",{class:"block text-sm font-medium text-gray-700"}," End Date ",-1)),_(t("input",{"onUpdate:modelValue":e[3]||(e[3]=s=>a.end_date=s),type:"date",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm"},null,512),[[F,a.end_date]])]),t("div",ht,[t("button",{type:"button",onClick:b,class:"flex-1 rounded-md bg-indigo-600 px-4 py-2 text-sm font-semibold text-white shadow-sm hover:bg-indigo-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600",disabled:n.value}," Apply Filters ",8,wt),t("button",{type:"button",onClick:E,class:"flex-1 rounded-md border border-gray-300 px-4 py-2 text-sm font-semibold text-gray-700 hover:bg-gray-50",disabled:n.value}," Reset ",8,kt)])])]),t("div",St,[t("div",Ct,[t("table",Dt,[e[22]||(e[22]=t("thead",{class:"bg-gray-50"},[t("tr",{class:"text-left text-xs font-semibold uppercase tracking-wider text-gray-500"},[t("th",{scope:"col",class:"px-6 py-3"},"Teacher"),t("th",{scope:"col",class:"px-6 py-3"},"Period"),t("th",{scope:"col",class:"px-6 py-3"},"Base Salary"),t("th",{scope:"col",class:"px-6 py-3"},"Bonus"),t("th",{scope:"col",class:"px-6 py-3"},"Deduction"),t("th",{scope:"col",class:"px-6 py-3"},"Total Amount"),t("th",{scope:"col",class:"px-6 py-3"},"Status"),t("th",{scope:"col",class:"px-6 py-3"},"Actions")])],-1)),t("tbody",Pt,[!n.value&&r.value.length===0?(m(),c("tr",Tt,[...e[20]||(e[20]=[t("td",{colspan:"8",class:"px-6 py-4 text-center text-sm text-gray-500"}," No salaries found. ",-1)])])):h("",!0),(m(!0),c(w,null,P(r.value,s=>(m(),c("tr",{key:s.id,class:"text-sm text-gray-700 hover:bg-gray-50"},[t("td",Ft,[t("div",Bt,l(s.teacher?.name??"Unknown"),1)]),t("td",Vt,l(C(s.start_date))+" - "+l(C(s.end_date)),1),t("td",Ut,l(u(s.base_salary)),1),t("td",At,l(u(s.bonus)),1),t("td",Mt,l(u(s.deduction)),1),t("td",$t,l(u(s.total_amount)),1),t("td",Nt,[t("span",{class:O(["px-2 py-1 text-xs font-medium rounded",s.status==="paid"?"bg-green-100 text-green-800":s.status==="processing"?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800"])},l(s.status),3)]),t("td",{class:"px-6 py-4",onClick:e[5]||(e[5]=G(()=>{},["stop"]))},[g(A,{onClick:e[4]||(e[4]=D=>v(H).visit(o.route("salary.index"))),variant:"outline",size:"sm"},{default:f(()=>[...e[21]||(e[21]=[B(" View ",-1)])]),_:1})])]))),128))])])]),i.value?(m(),c("div",Et,[t("div",null," Page "+l(i.value.page)+" of "+l(i.value.totalPages??1),1),t("div",jt,[t("button",{onClick:e[6]||(e[6]=s=>S(i.value.page-1)),class:"rounded-md border border-gray-300 px-3 py-1 hover:bg-gray-50",disabled:n.value||i.value.page===1}," Previous ",8,Rt),t("button",{onClick:e[7]||(e[7]=s=>S(i.value.page+1)),class:"rounded-md border border-gray-300 px-3 py-1 hover:bg-gray-50",disabled:n.value||i.value.page===i.value.totalPages}," Next ",8,zt)])])):h("",!0)])])])]),_:1})],64))}};export{Jt as default};
