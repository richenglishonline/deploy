import{l as g,r as n,m,o as p,c as e,b as u,u as y,h as x,w as k,d as s,f as t,F as h,g as w,t as v}from"./app-0fzbWLMr.js";import{_ as B}from"./AuthenticatedLayout-7O23QDDk.js";import{_ as M}from"./DashboardHeader-DJp4Ro-e.js";import{a as N}from"./api-CjtnGutK.js";const P={class:"space-y-6"},C={key:0,class:"space-y-6"},D={key:1,class:"text-center text-gray-500 py-20 text-xl"},H={key:2,class:"grid gap-6 sm:grid-cols-2 lg:grid-cols-3"},S={class:"text-sm font-medium text-gray-500"},T={class:"mt-2 text-3xl font-semibold text-gray-900"},V={__name:"Dashboard",setup(F){const _=g(),l=n(!1),o=n(null),d=n(!1),i=m(()=>_.props.auth?.user?.role==="admin"),b=m(()=>{if(!o.value||!i.value)return[];const a=o.value.stats??{};return[{label:"Assigned Teachers",value:a.assignedTeachers},{label:"Students",value:a.totalStudents},{label:"Books",value:a.totalBooks},{label:"Classes Created",value:a.totalClasses},{label:"Notifications",value:a.totalNotifications},{label:"Payouts",value:a.totalPayouts},{label:"Hours This Month",value:a.totalHoursMonth},{label:"Hours This Week",value:a.totalHoursWeek},{label:"Estimated Month Payout",value:`â‚±${Number(a.totalPaymentMonth??0).toFixed(2)}`}]}),f=async()=>{if(!(l.value||d.value)){l.value=!0;try{const{data:a}=await N.get("/dashboard/stats");o.value=a,d.value=!0}catch(a){console.error("Dashboard stats error:",a)}finally{l.value=!1}}};return p(()=>{f()}),(a,c)=>(t(),e(h,null,[u(y(x),{title:"Dashboard"}),u(B,null,{default:k(()=>[s("div",P,[u(M),l.value?(t(),e("div",C,[...c[0]||(c[0]=[s("div",{class:"w-full h-96 mb-12 mt-5 bg-gray-200 animate-pulse rounded"},null,-1),s("div",{class:"w-full h-96 bg-gray-200 animate-pulse rounded"},null,-1)])])):i.value?(t(),e("div",H,[(t(!0),e(h,null,w(b.value,r=>(t(),e("div",{key:r.label,class:"rounded-lg border border-gray-200 bg-white p-6 shadow-sm"},[s("dt",S,v(r.label),1),s("dd",T,v(r.value??0),1)]))),128))])):(t(),e("div",D," You do not have access to the admin dashboard. "))])]),_:1})],64))}};export{V as default};
