import{c as a,d as r,g as l,r as m,K as O,j as $,k as u,t as g,I as V,a as D,p as I,b,v as Y,f as p,F as x,q as C,y as F,e as L,x as R,z as ee}from"./app-r5F7AQbe.js";import{n as te}from"./AuthenticatedLayout-CNSH0xWk.js";import{r as se}from"./ArrowDownTrayIcon-DZwgirt0.js";import{r as le,a as ae}from"./ArrowUpIcon-BRIgdKK5.js";import{r as re}from"./TrashIcon-Q9E64JkZ.js";function oe(i,N){return l(),a("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3 7.5 7.5 3m0 0L12 7.5M7.5 3v13.5m13.5 0L16.5 21m0 0L12 16.5m4.5 4.5V7.5"})])}function ne(i,N){return l(),a("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M2.25 13.5h3.86a2.25 2.25 0 0 1 2.012 1.244l.256.512a2.25 2.25 0 0 0 2.013 1.244h3.218a2.25 2.25 0 0 0 2.013-1.244l.256-.512a2.25 2.25 0 0 1 2.013-1.244h3.859m-19.5.338V18a2.25 2.25 0 0 0 2.25 2.25h15A2.25 2.25 0 0 0 21.75 18v-4.162c0-.224-.034-.447-.1-.661L19.24 5.338a2.25 2.25 0 0 0-2.15-1.588H6.911a2.25 2.25 0 0 0-2.15 1.588L2.35 13.177a2.25 2.25 0 0 0-.1.661Z"})])}const ie={class:"rounded-xl bg-white shadow-sm ring-1 ring-gray-200 overflow-hidden"},ue={key:0,class:"border-b border-gray-200 bg-gray-50/50 px-6 py-4"},de={class:"flex flex-col gap-4"},ce={class:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between"},ge={key:0,class:"text-lg font-semibold text-gray-900"},ye={class:"flex flex-1 items-center gap-3 sm:justify-end"},fe={key:0,class:"flex-1 max-w-md"},ve={class:"relative"},he=["placeholder"],me={key:0,class:"flex flex-wrap items-center gap-3"},be=["onUpdate:modelValue"],pe={value:""},xe=["value"],we={key:1,class:"flex items-center justify-between rounded-lg bg-blue-50 px-4 py-3"},ke={class:"text-sm font-medium text-blue-900"},Se={class:"flex items-center gap-2"},$e={class:"overflow-x-auto"},Ce={class:"min-w-full divide-y divide-gray-200"},_e={class:"bg-gray-50"},Pe={key:0,scope:"col",class:"relative w-12 px-6 sm:w-16 sm:px-8"},Ve=["checked"],De=["onClick"],Le={class:"flex items-center gap-2"},Ne={key:0,class:"text-gray-400 hover:text-gray-600"},Be={key:1,scope:"col",class:"relative px-6 py-3 text-right"},je={class:"divide-y divide-gray-200 bg-white"},Ae={key:0,class:"relative w-12 px-6 sm:w-16 sm:px-8"},Ie=["checked","onChange"],Fe={key:1},Ke={key:1,class:"relative whitespace-nowrap px-6 py-4 text-right text-sm font-medium"},Me={key:0},Ue=["colspan"],Ee={class:"flex flex-col items-center gap-2"},Te={key:0,class:"text-xs text-gray-400"},qe={key:1,class:"border-t border-gray-200 bg-gray-50/50 px-6 py-4 sm:flex sm:items-center sm:justify-between"},Oe={class:"mb-4 text-sm text-gray-700 sm:mb-0"},Re={class:"font-medium"},ze={class:"font-medium"},He={class:"font-medium"},Qe={key:0,class:"ml-2 text-blue-600"},Ze={class:"flex items-center gap-2"},Ge=["value"],Je=["disabled"],We={class:"text-sm text-gray-700"},Xe=["disabled"],at={__name:"AdvancedTable",props:{title:{type:String,default:""},columns:{type:Array,required:!0},data:{type:Array,required:!0},searchable:{type:Boolean,default:!1},searchPlaceholder:{type:String,default:"Search..."},paginated:{type:Boolean,default:!1},itemsPerPage:{type:Number,default:10},itemsPerPageOptions:{type:Array,default:()=>[10,25,50,100]},rowKey:{type:[String,Function],default:"id"},selectable:{type:Boolean,default:!1},filters:{type:Array,default:()=>[]},exportable:{type:Boolean,default:!1}},emits:["export","bulk-delete","row-select","row-deselect"],setup(i,{emit:N}){const d=i,w=N,k=m(""),f=m(1),_=m(d.itemsPerPage),v=m(null),h=m("asc"),c=m([]),S=m({});O(()=>d.filters,s=>{s&&s.length>0&&s.forEach(e=>{S.value[e.key]||(S.value[e.key]="")})},{immediate:!0});const P=(s,e)=>typeof d.rowKey=="function"?d.rowKey(s,e):s[d.rowKey]||e,B=(s,e)=>{const t=P(s,e);return c.value.some(o=>P(o,-1)===t)},z=(s,e)=>{const t=P(s,e),o=c.value.findIndex(n=>P(n,-1)===t);o>=0?(c.value.splice(o,1),w("row-deselect",s,e)):(c.value.push(s),w("row-select",s,e))},H=()=>{M.value?(c.value=[],w("row-deselect",null,-1)):(c.value=[...y.value],w("row-select",null,-1))},K=()=>{c.value=[]},M=$(()=>y.value.length===0?!1:y.value.every((s,e)=>B(s,e))),Q=s=>{v.value===s?h.value=h.value==="asc"?"desc":"asc":(v.value=s,h.value="asc")},Z=()=>{f.value=1},G=()=>{w("export",y.value)},J=()=>{w("bulk-delete",c.value),K()},y=$(()=>{let s=[...d.data];if(d.searchable&&k.value){const e=k.value.toLowerCase();s=s.filter(t=>d.columns.some(o=>{const n=t[o.key];return String(n||"").toLowerCase().includes(e)}))}return d.filters&&d.filters.length>0&&d.filters.forEach(e=>{const t=S.value[e.key];t&&t!==""&&(s=s.filter(o=>{const n=o[e.key];return String(n||"")===String(t)}))}),v.value&&s.sort((e,t)=>{const o=e[v.value],n=t[v.value];if(o==null&&n==null)return 0;if(o==null)return 1;if(n==null)return-1;if(typeof o=="number"&&typeof n=="number")return h.value==="asc"?o-n:n-o;const E=String(o).toLowerCase(),T=String(n).toLowerCase(),q=E>T?1:E<T?-1:0;return h.value==="asc"?q:-q}),s}),j=$(()=>d.paginated?Math.ceil(y.value.length/_.value):1),A=$(()=>d.paginated?(f.value-1)*_.value:0),U=$(()=>d.paginated?Math.min(A.value+_.value,y.value.length):y.value.length),W=$(()=>d.paginated?y.value.slice(A.value,U.value):y.value),X=(s,e)=>s==null?"â€”":e.format==="currency"?new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(Number(s)):e.format==="percentage"?`${Number(s).toFixed(1)}%`:e.format==="date"?new Date(s).toLocaleDateString():e.format==="datetime"?new Date(s).toLocaleString():e.format==="time"?new Date(s).toLocaleTimeString():e.format==="number"?new Intl.NumberFormat("en-US").format(Number(s)):s;return O([k,S],()=>{f.value=1},{deep:!0}),(s,e)=>(l(),a("div",ie,[i.title||i.searchable||s.$slots.filters||s.$slots.actions?(l(),a("div",ue,[r("div",de,[r("div",ce,[i.title?(l(),a("h3",ge,g(i.title),1)):u("",!0),r("div",ye,[i.searchable?(l(),a("div",fe,[r("div",ve,[D(b(te),{class:"pointer-events-none absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-gray-400"}),I(r("input",{"onUpdate:modelValue":e[0]||(e[0]=t=>k.value=t),type:"text",placeholder:i.searchPlaceholder,class:"block w-full rounded-lg border-0 bg-white py-2 pl-10 pr-4 text-sm text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-blue-500"},null,8,he),[[Y,k.value]])])])):u("",!0),i.exportable?(l(),a("button",{key:1,onClick:G,class:"inline-flex items-center gap-2 rounded-lg border border-gray-300 bg-white px-4 py-2 text-sm font-medium text-gray-700 shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500"},[D(b(se),{class:"h-4 w-4"}),e[5]||(e[5]=p(" Export ",-1))])):u("",!0),V(s.$slots,"actions")])]),s.$slots.filters||i.filters&&i.filters.length>0?(l(),a("div",me,[V(s.$slots,"filters",{},()=>[(l(!0),a(x,null,C(i.filters,t=>(l(),a(x,{key:t.key},[t.type==="select"?I((l(),a("select",{key:0,"onUpdate:modelValue":o=>S.value[t.key]=o,onChange:Z,class:"rounded-lg border-gray-300 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 focus:ring-2 focus:ring-blue-500"},[r("option",pe,g(t.label),1),(l(!0),a(x,null,C(t.options,o=>(l(),a("option",{key:o.value,value:o.value},g(o.label),9,xe))),128))],40,be)),[[R,S.value[t.key]]]):u("",!0)],64))),128))])])):u("",!0),c.value.length>0?(l(),a("div",we,[r("span",ke,g(c.value.length)+" "+g(c.value.length===1?"item":"items")+" selected ",1),r("div",Se,[V(s.$slots,"bulk-actions",{selectedRows:c.value},()=>[r("button",{onClick:J,class:"inline-flex items-center gap-2 rounded-lg bg-red-600 px-4 py-2 text-sm font-medium text-white hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-500"},[D(b(re),{class:"h-4 w-4"}),e[6]||(e[6]=p(" Delete Selected ",-1))])]),r("button",{onClick:K,class:"text-sm font-medium text-blue-600 hover:text-blue-700"}," Clear ")])])):u("",!0)])])):u("",!0),r("div",$e,[r("table",Ce,[r("thead",_e,[r("tr",null,[i.selectable?(l(),a("th",Pe,[r("input",{type:"checkbox",checked:M.value,onChange:H,class:"absolute left-4 top-1/2 h-4 w-4 rounded border-gray-300 text-blue-600 focus:ring-blue-500 sm:left-6"},null,40,Ve)])):u("",!0),(l(!0),a(x,null,C(i.columns,t=>(l(),a("th",{key:t.key,scope:"col",class:F(["px-6 py-3 text-left text-xs font-semibold uppercase tracking-wider text-gray-700",t.align==="right"?"text-right":"",t.align==="center"?"text-center":"",t.sortable?"cursor-pointer select-none hover:bg-gray-100":""]),onClick:o=>t.sortable&&Q(t.key)},[r("div",Le,[p(g(t.label)+" ",1),t.sortable?(l(),a("button",Ne,[v.value===t.key&&h.value==="asc"?(l(),L(b(le),{key:0,class:"h-4 w-4"})):v.value===t.key&&h.value==="desc"?(l(),L(b(ae),{key:1,class:"h-4 w-4"})):(l(),L(b(oe),{key:2,class:"h-4 w-4"}))])):u("",!0)])],10,De))),128)),s.$slots["row-actions"]?(l(),a("th",Be,[...e[7]||(e[7]=[r("span",{class:"sr-only"},"Actions",-1)])])):u("",!0)])]),r("tbody",je,[(l(!0),a(x,null,C(W.value,(t,o)=>(l(),a("tr",{key:P(t,o),class:F(["transition-colors hover:bg-gray-50",B(t,o)?"bg-blue-50":""])},[i.selectable?(l(),a("td",Ae,[r("input",{type:"checkbox",checked:B(t,o),onChange:n=>z(t,o),class:"absolute left-4 top-1/2 h-4 w-4 rounded border-gray-300 text-blue-600 focus:ring-blue-500 sm:left-6"},null,40,Ie)])):u("",!0),(l(!0),a(x,null,C(i.columns,n=>(l(),a("td",{key:n.key,class:F(["whitespace-nowrap px-6 py-4 text-sm",n.align==="right"?"text-right":"",n.align==="center"?"text-center":"",n.format==="currency"?"text-gray-900 font-medium":"text-gray-900"])},[V(s.$slots,`cell-${n.key}`,{row:t,value:t[n.key],index:o},()=>[n.component?(l(),L(ee(n.component),{key:0,value:t[n.key],row:t},null,8,["value","row"])):(l(),a("span",Fe,g(X(t[n.key],n)),1))])],2))),128)),s.$slots["row-actions"]?(l(),a("td",Ke,[V(s.$slots,"row-actions",{row:t,index:o})])):u("",!0)],2))),128)),y.value.length===0?(l(),a("tr",Me,[r("td",{colspan:i.columns.length+(i.selectable?1:0)+(s.$slots["row-actions"]?1:0),class:"px-6 py-12 text-center text-sm text-gray-500"},[r("div",Ee,[D(b(ne),{class:"h-12 w-12 text-gray-300"}),e[8]||(e[8]=r("p",{class:"font-medium"},"No data available",-1)),k.value?(l(),a("p",Te,"Try adjusting your search or filters")):u("",!0)])],8,Ue)])):u("",!0)])])]),i.paginated&&j.value>1?(l(),a("div",qe,[r("div",Oe,[e[9]||(e[9]=p(" Showing ",-1)),r("span",Re,g(A.value+1),1),e[10]||(e[10]=p(" to ",-1)),r("span",ze,g(U.value),1),e[11]||(e[11]=p(" of ",-1)),r("span",He,g(y.value.length),1),e[12]||(e[12]=p(" results ",-1)),i.selectable&&c.value.length>0?(l(),a("span",Qe," ("+g(c.value.length)+" selected) ",1)):u("",!0)]),r("div",Ze,[i.itemsPerPageOptions&&i.itemsPerPageOptions.length>0?I((l(),a("select",{key:0,"onUpdate:modelValue":e[1]||(e[1]=t=>_.value=t),onChange:e[2]||(e[2]=t=>f.value=1),class:"rounded-lg border-gray-300 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 focus:ring-2 focus:ring-blue-500"},[(l(!0),a(x,null,C(i.itemsPerPageOptions,t=>(l(),a("option",{key:t,value:t},g(t)+" per page ",9,Ge))),128))],544)),[[R,_.value]]):u("",!0),r("button",{onClick:e[3]||(e[3]=t=>f.value--),disabled:f.value===1,class:"rounded-lg border border-gray-300 bg-white px-4 py-2 text-sm font-medium text-gray-700 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed focus:outline-none focus:ring-2 focus:ring-blue-500"}," Previous ",8,Je),r("span",We," Page "+g(f.value)+" of "+g(j.value),1),r("button",{onClick:e[4]||(e[4]=t=>f.value++),disabled:f.value>=j.value,class:"rounded-lg border border-gray-300 bg-white px-4 py-2 text-sm font-medium text-gray-700 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed focus:outline-none focus:ring-2 focus:ring-blue-500"}," Next ",8,Xe)])])):u("",!0)]))}};export{at as _};
