import{u as S,r as b,j as c,o as T,c as d,a as s,b as _,h as A,w as l,d as a,g as n,F as u,q as p,e as D,t as f,n as M}from"./app-BiSPCPuo.js";import{b as W,e as j,d as P,j as N,a as R,i as F,c as H,_ as z}from"./AuthenticatedLayout-57Q77M7z.js";import{_ as E,a as J,b as L}from"./ActivityTimeline-JNzjWFSR.js";import{_ as U}from"./AdvancedTable-5fi55ECo.js";import{_ as h}from"./Card-B0sMFwFC.js";import{_ as V}from"./LineChart-DG23Ig0Z.js";import{_ as q}from"./PieChart-ByZL7xX2.js";import{_ as K}from"./DonutChart-DCI1mqHz.js";import{a as O}from"./api-BtR7IrG5.js";import{r as G}from"./CheckCircleIcon-C_xlp5Nk.js";import{r as I}from"./ArrowTrendingUpIcon-DpSn00Yz.js";import"./ArrowUpIcon-IEJdmouC.js";import"./ArrowDownTrayIcon-DICVMDSG.js";import"./TrashIcon-DlbRnS0G.js";const Q={class:"space-y-6 pb-8"},X={key:0,class:"space-y-6"},Y={class:"grid grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-3"},Z={class:"grid grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-3"},ee={class:"grid grid-cols-1 gap-6 lg:grid-cols-2"},ae={class:"mb-4 flex items-center justify-between"},te={class:"h-64"},se={class:"mb-4 flex items-center justify-between"},oe={class:"h-64"},re={class:"grid grid-cols-1 gap-6 lg:grid-cols-3"},le={class:"lg:col-span-2"},ne={class:"h-64"},ie={class:"flex items-center gap-3"},ce={class:"flex h-10 w-10 items-center justify-center rounded-full bg-gradient-to-br from-blue-500 to-purple-600"},de={class:"text-sm font-semibold text-white"},ue={class:"font-medium text-gray-900"},ge={class:"flex items-center gap-2"},me={class:"font-medium text-gray-900"},be={class:"h-2 flex-1 max-w-[60px] rounded-full bg-gray-200"},De={__name:"Dashboard",setup(_e){const v=S(),i=b(!1),r=b(null),g=b(!1),y=c(()=>v.props.auth?.user?.role??"admin"),m=t=>{const o=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],e={primary:"rgba(59, 130, 246, 0.8)",secondary:"rgba(16, 185, 129, 0.8)"};if(t==="line")return{labels:o,datasets:[{label:"Classes",data:[12,19,15,25,22,18,14],borderColor:e.primary,backgroundColor:e.primary.replace("0.8","0.1"),fill:!0,tension:.4},{label:"Attendance",data:[8,15,12,20,18,14,10],borderColor:e.secondary,backgroundColor:e.secondary.replace("0.8","0.1"),fill:!0,tension:.4}]};if(t==="bar")return{labels:["Week 1","Week 2","Week 3","Week 4"],datasets:[{label:"Hours",data:[20,25,22,28],backgroundColor:e.primary,borderRadius:8}]};if(t==="pie")return{labels:["Completed","Pending","Cancelled"],datasets:[{data:[65,25,10],backgroundColor:[e.secondary,"rgba(251, 191, 36, 0.8)","rgba(239, 68, 68, 0.8)"]}]};if(t==="donut")return{labels:["Active","Inactive"],datasets:[{data:[75,25],backgroundColor:[e.primary,"rgba(156, 163, 175, 0.8)"]}]}},C=c(()=>{if(!r.value||y.value!=="admin")return[];const t=r.value.stats??{};return[{label:"Assigned Teachers",value:t.assignedTeachers??0,icon:W,iconBgColor:"bg-blue-50",iconColor:"text-blue-600",change:5},{label:"Students",value:t.totalStudents??0,icon:j,iconBgColor:"bg-green-50",iconColor:"text-green-600",change:10},{label:"Hours This Month",value:t.totalHoursMonth??0,icon:P,iconBgColor:"bg-purple-50",iconColor:"text-purple-600",format:"number"},{label:"Estimated Payout",value:t.totalPaymentMonth??0,icon:N,iconBgColor:"bg-yellow-50",iconColor:"text-yellow-600",format:"currency"},{label:"Classes This Month",value:t.totalClassesMonth??0,icon:R,iconBgColor:"bg-pink-50",iconColor:"text-pink-600",change:8},{label:"Attendance Rate",value:t.attendanceRate??0,icon:F,iconBgColor:"bg-indigo-50",iconColor:"text-indigo-600",format:"percentage",change:2}]}),x=c(()=>r.value?((r.value.dashboard??{}).activeClass?.slice(0,5)??[]).map(e=>({title:`Class: ${e.student||"Student"}`,description:e.book||"No book assigned",time:`${e.start_time||"N/A"} - ${e.end_time||"N/A"}`,icon:G,iconBg:"bg-green-50",iconColor:"text-green-600"})):[]),$=c(()=>[{key:"teacher",label:"Teacher",sortable:!0},{key:"students",label:"Students",sortable:!0},{key:"classes",label:"Classes This Week",sortable:!0},{key:"attendance_rate",label:"Attendance Rate",sortable:!0,format:"percentage"}]),k=c(()=>r.value?[{teacher:"John Doe",students:15,classes:12,attendance_rate:95},{teacher:"Jane Smith",students:18,classes:14,attendance_rate:92}]:[]),w=async()=>{if(!(i.value||g.value)){i.value=!0;try{const{data:t}=await O.get("/dashboard/stats");r.value=t,g.value=!0}catch(t){console.error("Dashboard stats error:",t),t.response?.status===401&&console.warn("Unauthorized - user may need to re-login")}finally{i.value=!1}}};return T(()=>{!g.value&&!i.value&&w()}),(t,o)=>(n(),d(u,null,[s(_(A),{title:"Admin Dashboard"}),s(z,null,{default:l(()=>[a("div",Q,[s(E),i.value?(n(),d("div",X,[a("div",Y,[(n(),d(u,null,p(6,e=>a("div",{key:e,class:"h-32 rounded-xl bg-gray-200 animate-pulse"})),64))])])):(n(),d(u,{key:1},[a("div",Z,[(n(!0),d(u,null,p(C.value,e=>(n(),D(J,{key:e.label,label:e.label,value:e.value,icon:e.icon,"icon-bg-color":e.iconBgColor,"icon-color":e.iconColor,change:e.change,format:e.format||"number",trend:!0},null,8,["label","value","icon","icon-bg-color","icon-color","change","format"]))),128))]),a("div",ee,[s(h,{class:"p-6"},{default:l(()=>[a("div",ae,[o[0]||(o[0]=a("h3",{class:"text-lg font-semibold text-gray-900"}," Weekly Activity Trends ",-1)),s(_(H),{class:"h-5 w-5 text-gray-400"})]),a("div",te,[s(V,{data:m("line")},null,8,["data"])])]),_:1}),s(h,{class:"p-6"},{default:l(()=>[a("div",se,[o[1]||(o[1]=a("h3",{class:"text-lg font-semibold text-gray-900"}," Class Status Distribution ",-1)),s(_(I),{class:"h-5 w-5 text-gray-400"})]),a("div",oe,[s(q,{data:m("pie")},null,8,["data"])])]),_:1})]),a("div",re,[a("div",le,[s(L,{activities:x.value},null,8,["activities"])]),s(h,{class:"p-6"},{default:l(()=>[o[2]||(o[2]=a("div",{class:"mb-4"},[a("h3",{class:"text-lg font-semibold text-gray-900"}," Teacher Status "),a("p",{class:"mt-1 text-sm text-gray-500"}," Active vs Inactive ")],-1)),a("div",ne,[s(K,{data:m("donut")},null,8,["data"])])]),_:1})]),s(U,{title:"Teacher Performance Overview",columns:$.value,data:k.value,searchable:!0,paginated:!0,"items-per-page":10},{"cell-teacher":l(({row:e})=>[a("div",ie,[a("div",ce,[a("span",de,f(e.teacher.split(" ").map(B=>B[0]).join("").toUpperCase().slice(0,2)),1)]),a("span",ue,f(e.teacher),1)])]),"cell-attendance_rate":l(({row:e})=>[a("div",ge,[a("span",me,f(e.attendance_rate)+"%",1),a("div",be,[a("div",{class:"h-2 rounded-full bg-green-500",style:M({width:`${e.attendance_rate}%`})},null,4)])])]),_:1},8,["columns","data"])],64))])]),_:1})],64))}};export{De as default};
