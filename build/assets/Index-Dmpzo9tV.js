import{r as u,o as w,c as d,a as x,b as k,h as C,w as y,d as e,k as m,g as n,F as _,q as N,y as b,t as l}from"./app-BiSPCPuo.js";import{_ as $}from"./AuthenticatedLayout-57Q77M7z.js";import{a as g}from"./api-BtR7IrG5.js";const P={class:"py-10"},D={class:"mx-auto max-w-5xl space-y-6 px-4 sm:px-6 lg:px-8"},V={class:"overflow-hidden rounded-lg border border-gray-200 bg-white shadow-sm"},j={class:"divide-y divide-gray-100"},B={key:0,class:"px-6 py-8 text-center text-sm text-gray-500"},z={class:"flex items-center gap-2"},F={class:"text-xs text-gray-400"},L={class:"mt-2 text-sm text-gray-800"},M={class:"flex items-center gap-2"},R=["onClick","disabled"],S=["onClick"],q={key:0,class:"flex flex-col items-center justify-between gap-4 border-t border-gray-100 px-6 py-4 text-sm text-gray-600 sm:flex-row"},A={class:"flex items-center gap-2"},E=["disabled"],I=["disabled"],J={__name:"Index",setup(T){const o=u(!1),i=u([]),a=u(null),c=async(r=1)=>{o.value=!0;try{const{data:t}=await g.get("/notification",{params:{page:r}});i.value=t.notifications,a.value=t.pagination}catch(t){console.error(t)}finally{o.value=!1}},p=r=>{a.value&&(r<1||r>a.value.totalPages||c(r))},v=async r=>{if(!r.is_read)try{await g.patch(`/notification/${r.id}`),r.is_read=!0}catch(t){console.error(t)}},f=async r=>{if(confirm("Delete this notification?"))try{await g.delete(`/notification/${r.id}`),await c(a.value?.page??1)}catch(t){console.error(t)}};return w(c),(r,t)=>(n(),d(_,null,[x(k(C),{title:"Notifications"}),x($,null,{header:y(()=>[...t[2]||(t[2]=[e("div",{class:"flex items-center justify-between"},[e("div",null,[e("h2",{class:"text-xl font-semibold leading-tight text-gray-800"}," Notifications "),e("p",{class:"text-sm text-gray-500"}," View system alerts, payout updates, and schedule changes. ")])],-1)])]),default:y(()=>[e("div",P,[e("div",D,[e("div",V,[e("ul",j,[!o.value&&i.value.length===0?(n(),d("li",B," You're all caught up! ")):m("",!0),(n(!0),d(_,null,N(i.value,s=>(n(),d("li",{key:s.id,class:b(["flex flex-col gap-3 px-6 py-5 sm:flex-row sm:items-center sm:justify-between",s.is_read?"bg-white":"bg-indigo-50/50"])},[e("div",null,[e("div",z,[e("span",{class:b(["inline-flex items-center rounded-full px-3 py-1 text-xs font-semibold capitalize",{"bg-indigo-100 text-indigo-700":s.type==="schedule_update","bg-amber-100 text-amber-700":s.type==="offline_alert","bg-emerald-100 text-emerald-700":s.type==="payout_notice","bg-gray-100 text-gray-700":!["schedule_update","offline_alert","payout_notice"].includes(s.type)}])},l(s.type.replace("_"," ")),3),e("span",F,l(new Date(s.created_at).toLocaleString()),1)]),e("p",L,l(s.message),1)]),e("div",M,[e("button",{onClick:h=>v(s),class:"rounded-md border border-gray-300 px-3 py-1 text-xs font-semibold text-gray-700 hover:bg-gray-50",disabled:s.is_read},l(s.is_read?"Read":"Mark as read"),9,R),e("button",{onClick:h=>f(s),class:"rounded-md border border-red-300 px-3 py-1 text-xs font-semibold text-red-600 hover:bg-red-50"}," Delete ",8,S)])],2))),128))]),a.value?(n(),d("div",q,[e("div",null," Page "+l(a.value.page)+" of "+l(a.value.totalPages??1),1),e("div",A,[e("button",{onClick:t[0]||(t[0]=s=>p(a.value.page-1)),class:"rounded-md border border-gray-300 px-3 py-1 hover:bg-gray-50",disabled:o.value||a.value.page===1}," Previous ",8,E),e("button",{onClick:t[1]||(t[1]=s=>p(a.value.page+1)),class:"rounded-md border border-gray-300 px-3 py-1 hover:bg-gray-50",disabled:o.value||a.value.page===a.value.totalPages}," Next ",8,I)])])):m("",!0)])])])]),_:1})],64))}};export{J as default};
