import{r as g,a as S,o as B,c as l,b as C,u as b,h as D,w as V,d as e,k as p,f as d,F as y,g as m,t as a,v as f,q as P,e as u,i as N,n as x,j as F}from"./app-Df2mZBCJ.js";import{_ as M}from"./AuthenticatedLayout-BZV3tvjz.js";import{a as _}from"./api-CaAFynDB.js";const U={class:"flex items-center justify-between"},$=["disabled"],j={class:"py-10"},E={class:"mx-auto max-w-7xl space-y-6 px-4 sm:px-6 lg:px-8"},L={class:"rounded-lg border border-gray-200 bg-white p-6 shadow-sm"},O={class:"grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-4"},q=["value"],I=["value"],J={class:"flex items-end gap-3"},z=["disabled"],G=["disabled"],H={class:"overflow-hidden rounded-lg border border-gray-200 bg-white shadow-sm"},K={class:"overflow-x-auto"},Q={class:"min-w-full divide-y divide-gray-200"},W={class:"divide-y divide-gray-200 bg-white"},X={key:0},Y=["onClick"],Z={class:"px-6 py-4"},ee={class:"font-medium text-gray-900"},te={class:"text-gray-500"},se={class:"text-xs text-gray-400"},oe={class:"px-6 py-4"},le={class:"text-xs text-gray-400"},de={key:0,class:"text-xs text-gray-500"},ae={class:"px-6 py-4"},ie={class:"text-sm"},ne=["href"],re={key:1},ue={class:"text-xs text-gray-500"},ce={class:"px-6 py-4"},ge={class:"space-y-1 text-xs text-gray-500"},pe={key:0},xe={key:1},ye={key:2},ve=["onClick"],be={key:0,class:"flex flex-col items-center justify-between gap-4 border-t border-gray-100 px-6 py-4 text-sm text-gray-600 sm:flex-row"},me={class:"flex items-center gap-2"},fe=["disabled"],_e=["disabled"],Ve={__name:"Index",setup(he){const r=g(!1),v=g([]),n=g(null),h=g([]),k=g([]),o=S({teacher_id:"",student_id:"",type:"",start_date:"",end_date:"",page:1,limit:10}),R=async()=>{const[i,t]=await Promise.all([_.get("/dashboard/teachers"),_.get("/dashboard/students")]);h.value=i.data,k.value=t.data},c=async()=>{r.value=!0;try{const{data:i}=await _.get("/class",{params:o});v.value=i.classes,n.value=i.pagination}catch(i){console.error(i)}finally{r.value=!1}},w=i=>{n.value&&(i<1||i>n.value.totalPages||(o.page=i,c()))},T=()=>{o.teacher_id="",o.student_id="",o.type="",o.start_date="",o.end_date="",o.page=1,c()};return B(async()=>{await R(),await c()}),(i,t)=>(d(),l(y,null,[C(b(D),{title:"Classes"}),C(M,null,{header:V(()=>[e("div",U,[t[8]||(t[8]=e("div",null,[e("h2",{class:"text-xl font-semibold leading-tight text-gray-800"}," Classes "),e("p",{class:"text-sm text-gray-500"}," Review upcoming schedules, recurring lessons, and make-up classes. ")],-1)),e("button",{onClick:c,class:"rounded-md bg-indigo-600 px-4 py-2 text-sm font-semibold text-white shadow-sm hover:bg-indigo-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600",disabled:r.value}," Refresh ",8,$)])]),default:V(()=>[e("div",j,[e("div",E,[e("div",L,[e("form",O,[e("div",null,[t[10]||(t[10]=e("label",{class:"block text-sm font-medium text-gray-700"}," Teacher ",-1)),p(e("select",{"onUpdate:modelValue":t[0]||(t[0]=s=>o.teacher_id=s),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm"},[t[9]||(t[9]=e("option",{value:""},"Any",-1)),(d(!0),l(y,null,m(h.value,s=>(d(),l("option",{key:s.id,value:s.id},a(s.name),9,q))),128))],512),[[f,o.teacher_id]])]),e("div",null,[t[12]||(t[12]=e("label",{class:"block text-sm font-medium text-gray-700"}," Student ",-1)),p(e("select",{"onUpdate:modelValue":t[1]||(t[1]=s=>o.student_id=s),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm"},[t[11]||(t[11]=e("option",{value:""},"Any",-1)),(d(!0),l(y,null,m(k.value,s=>(d(),l("option",{key:s.id,value:s.id},a(s.name),9,I))),128))],512),[[f,o.student_id]])]),e("div",null,[t[14]||(t[14]=e("label",{class:"block text-sm font-medium text-gray-700"}," Type ",-1)),p(e("select",{"onUpdate:modelValue":t[2]||(t[2]=s=>o.type=s),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm"},[...t[13]||(t[13]=[e("option",{value:""},"Any",-1),e("option",{value:"schedule"},"Schedule",-1),e("option",{value:"reoccurring"},"Recurring",-1),e("option",{value:"makeupClass"},"Make-up",-1)])],512),[[f,o.type]])]),e("div",null,[t[15]||(t[15]=e("label",{class:"block text-sm font-medium text-gray-700"}," Start After ",-1)),p(e("input",{"onUpdate:modelValue":t[3]||(t[3]=s=>o.start_date=s),type:"date",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm"},null,512),[[P,o.start_date]])]),e("div",null,[t[16]||(t[16]=e("label",{class:"block text-sm font-medium text-gray-700"}," End Before ",-1)),p(e("input",{"onUpdate:modelValue":t[4]||(t[4]=s=>o.end_date=s),type:"date",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm"},null,512),[[P,o.end_date]])]),e("div",J,[e("button",{type:"button",onClick:c,class:"flex-1 rounded-md bg-indigo-600 px-4 py-2 text-sm font-semibold text-white shadow-sm hover:bg-indigo-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600",disabled:r.value}," Apply Filters ",8,z),e("button",{type:"button",onClick:T,class:"flex-1 rounded-md border border-gray-300 px-4 py-2 text-sm font-semibold text-gray-700 hover:bg-gray-50",disabled:r.value}," Reset ",8,G)])])]),e("div",H,[e("div",K,[e("table",Q,[t[22]||(t[22]=e("thead",{class:"bg-gray-50"},[e("tr",{class:"text-left text-xs font-semibold uppercase tracking-wider text-gray-500"},[e("th",{scope:"col",class:"px-6 py-3"}," Class "),e("th",{scope:"col",class:"px-6 py-3"}," Schedule "),e("th",{scope:"col",class:"px-6 py-3"}," Platform "),e("th",{scope:"col",class:"px-6 py-3"}," Details "),e("th",{scope:"col",class:"px-6 py-3"}," Actions ")])],-1)),e("tbody",W,[!r.value&&v.value.length===0?(d(),l("tr",X,[...t[17]||(t[17]=[e("td",{colspan:"5",class:"px-6 py-4 text-center text-sm text-gray-500"}," No classes found. ",-1)])])):u("",!0),(d(!0),l(y,null,m(v.value,s=>(d(),l("tr",{key:s.id,class:"text-sm text-gray-700 hover:bg-gray-50 cursor-pointer",onClick:A=>b(N).visit(i.route("classes.show",s.id))},[e("td",Z,[e("div",ee,a(s.student?.name??"—"),1),e("div",te," Teacher: "+a(s.teacher?.name??"—"),1),e("div",se," Type: "+a(s.type),1)]),e("td",oe,[e("div",null,[x(a(s.start_date??"—")+" ",1),e("span",le," ("+a(s.start_time)+" - "+a(s.end_time)+") ",1)]),s.type==="reoccurring"?(d(),l("div",de," Days: "+a(s.reoccurring_days?.join(", ")??"—"),1)):u("",!0)]),e("td",ae,[e("div",ie,[t[18]||(t[18]=x(" Link: ",-1)),s.platform_link?(d(),l("a",{key:0,href:s.platform_link,target:"_blank",class:"text-indigo-600 hover:text-indigo-500"}," Join ",8,ne)):(d(),l("span",re,"—"))]),e("div",ue," Duration: "+a(s.duration)+" mins ",1)]),e("td",ce,[e("div",ge,[s.reason?(d(),l("div",pe,[t[19]||(t[19]=e("span",{class:"font-semibold text-gray-600"},"Reason:",-1)),x(" "+a(s.reason),1)])):u("",!0),s.note?(d(),l("div",xe,[t[20]||(t[20]=e("span",{class:"font-semibold text-gray-600"},"Note:",-1)),x(" "+a(s.note),1)])):u("",!0),s.book?(d(),l("div",ye,[t[21]||(t[21]=e("span",{class:"font-semibold text-gray-600"},"Book:",-1)),x(" "+a(s.book.title),1)])):u("",!0)])]),e("td",{class:"px-6 py-4",onClick:t[5]||(t[5]=F(()=>{},["stop"]))},[e("button",{onClick:A=>b(N).visit(i.route("classes.show",s.id)),class:"rounded-md bg-blue-600 px-3 py-1.5 text-xs font-medium text-white hover:bg-blue-700"}," View ",8,ve)])],8,Y))),128))])])]),n.value?(d(),l("div",be,[e("div",null," Page "+a(n.value.page)+" of "+a(n.value.totalPages??1),1),e("div",me,[e("button",{onClick:t[6]||(t[6]=s=>w(n.value.page-1)),class:"rounded-md border border-gray-300 px-3 py-1 hover:bg-gray-50",disabled:r.value||n.value.page===1}," Previous ",8,fe),e("button",{onClick:t[7]||(t[7]=s=>w(n.value.page+1)),class:"rounded-md border border-gray-300 px-3 py-1 hover:bg-gray-50",disabled:r.value||n.value.page===n.value.totalPages}," Next ",8,_e)])])):u("",!0)])])])]),_:1})],64))}};export{Ve as default};
