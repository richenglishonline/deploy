import{u as J,j as V,r as b,o as Q,c as u,a as l,b as p,h as W,w as r,d as t,k,g as n,F as h,t as o,e as $,f as i,q as D,i as w,p as L,x as M}from"./app-Cmmq__Tw.js";import{l as X,a as Y,i as I,r as tt,_ as et}from"./AuthenticatedLayout-B2GbnFPi.js";import{a as S}from"./api-BS-ONIJM.js";import{_ as v}from"./Button-D72KtQR-.js";import{_ as P,a as O,b as j,c as q,d as F}from"./DialogFooter-CigEYc59.js";import{_ as y,a as g}from"./Label-BbEfknmY.js";import{r as st}from"./ArrowLeftIcon-DrKpDvpq.js";import{r as lt}from"./PencilIcon-BCql_y0B.js";import{r as at}from"./TrashIcon-DD0p8Ace.js";import"./utils-C0Cxa5Hn.js";const ot={class:"flex items-center justify-between"},dt={class:"flex items-center gap-4"},rt={class:"text-xl font-semibold leading-tight text-gray-800"},nt={class:"text-sm text-gray-500"},it={key:0,class:"flex items-center gap-3"},ut={class:"py-10"},mt={class:"mx-auto max-w-7xl space-y-6 px-4 sm:px-6 lg:px-8"},pt={key:0,class:"text-center py-12"},xt={class:"rounded-lg border border-gray-200 bg-white shadow-sm"},yt={class:"px-6 py-4"},gt={class:"grid grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-3"},ft={class:"mt-1 text-sm text-gray-900"},vt={class:"mt-1 text-sm text-gray-900"},_t={class:"mt-1 text-sm text-gray-900"},ct={class:"mt-1 text-sm text-gray-900"},bt={key:0,class:"inline-flex items-center rounded-full bg-blue-100 px-2.5 py-0.5 text-xs font-medium text-blue-800"},kt={key:1},ht={class:"mt-1 text-sm text-gray-900"},wt={class:"mt-1 text-sm text-gray-900 flex items-center gap-2"},Vt={class:"mt-1 text-sm text-gray-900"},Ct={class:"mt-1 text-sm text-gray-900"},$t={class:"mt-1 text-sm text-gray-900"},Dt={key:0,class:"inline-flex items-center rounded-full bg-green-100 px-2.5 py-0.5 text-xs font-medium text-green-800"},St={key:1},Et={class:"mt-1 text-sm text-gray-900"},Nt=["href"],Ut={key:1},At={class:"mt-1 text-sm text-gray-900"},Tt={class:"mt-1 text-sm text-gray-900"},Bt={class:"mt-1 text-sm text-gray-900"},Lt={class:"rounded-lg border border-gray-200 bg-white shadow-sm"},Mt={class:"border-b border-gray-200 px-6 py-4"},Pt={class:"flex items-center justify-between"},Ot={class:"text-lg font-semibold text-gray-900 flex items-center gap-2"},jt={class:"px-6 py-4"},qt={key:0,class:"text-center py-8 text-gray-500"},Ft={key:1,class:"overflow-x-auto"},Kt={class:"min-w-full divide-y divide-gray-200"},Rt={class:"divide-y divide-gray-200 bg-white"},Zt=["onClick"],Ht={class:"px-4 py-3 text-sm text-gray-900"},zt={class:"px-4 py-3 text-sm text-gray-900"},Gt={class:"px-4 py-3 text-sm text-gray-900"},Jt={class:"px-4 py-3 text-sm text-gray-900"},Qt={class:"px-4 py-3 text-sm text-gray-900"},Wt={key:0},Xt={key:1},Yt={class:"px-4 py-3 text-sm text-gray-900"},It={class:"rounded-lg border border-gray-200 bg-white shadow-sm"},te={class:"border-b border-gray-200 px-6 py-4"},ee={class:"text-lg font-semibold text-gray-900 flex items-center gap-2"},se={class:"px-6 py-4"},le={key:0,class:"text-center py-8 text-gray-500"},ae={key:1,class:"overflow-x-auto"},oe={class:"min-w-full divide-y divide-gray-200"},de={class:"divide-y divide-gray-200 bg-white"},re=["onClick"],ne={class:"px-4 py-3 text-sm text-gray-900"},ie={class:"px-4 py-3 text-sm text-gray-900"},ue={class:"px-4 py-3 text-sm text-gray-900"},me={class:"px-4 py-3 text-sm text-gray-900"},pe={class:"px-4 py-3 text-sm text-gray-500"},xe={class:"rounded-lg border border-gray-200 bg-white shadow-sm"},ye={class:"border-b border-gray-200 px-6 py-4"},ge={class:"text-lg font-semibold text-gray-900 flex items-center gap-2"},fe={class:"px-6 py-4"},ve={key:0,class:"text-center py-8 text-gray-500"},_e={key:1,class:"overflow-x-auto"},ce={class:"min-w-full divide-y divide-gray-200"},be={class:"divide-y divide-gray-200 bg-white"},ke=["onClick"],he={class:"px-4 py-3 text-sm text-gray-900"},we={class:"px-4 py-3 text-sm text-gray-900"},Ve={class:"px-4 py-3 text-sm text-gray-900"},Ce={class:"px-4 py-3 text-sm text-gray-900"},$e={class:"max-w-2xl max-h-[90vh] overflow-y-auto"},De={class:"grid gap-4 py-4"},Se={class:"grid grid-cols-2 gap-4"},Ee={class:"grid grid-cols-2 gap-4"},Ne={class:"grid grid-cols-2 gap-4"},Fe={__name:"Show",props:{studentId:{type:[String,Number],required:!0}},setup(K){const C=K,R=J(),E=V(()=>R.props.auth?.user?.role??"teacher"),Z=V(()=>E.value==="super-admin"),N=V(()=>["admin","super-admin"].includes(E.value)),U=V(()=>Z.value),x=b(!1),a=b(null),_=b(!1),c=b(!1),m=b({name:"",age:"",nationality:"",manager_type:"",email:"",category_level:"",class_type:"",platform:"",platform_link:"",preferred_book:""}),A=async()=>{x.value=!0;try{const{data:d}=await S.get(`/students/${C.studentId}`);a.value=d,m.value={name:d.name??"",age:d.age??"",nationality:d.nationality??"",manager_type:d.manager_type??"",email:d.email??"",category_level:d.category_level??"",class_type:d.class_type??"",platform:d.platform??"",platform_link:d.platform_link??"",preferred_book:d.preferred_book??""}}catch(d){console.error("Error fetching student:",d)}finally{x.value=!1}},H=()=>{_.value=!0},z=async()=>{try{x.value=!0,await S.patch(`/students/${C.studentId}`,m.value),_.value=!1,await A()}catch(d){console.error("Error updating student:",d)}finally{x.value=!1}},G=async()=>{try{x.value=!0,await S.delete(`/students/${C.studentId}`),w.visit(route("students.index"))}catch(d){console.error("Error deleting student:",d),c.value=!1}finally{x.value=!1}},f=d=>d?new Date(d).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"—",T=d=>d||"—";return Q(A),(d,e)=>(n(),u(h,null,[l(p(W),{title:a.value?`${a.value.name} - Student Details`:"Student Details"},null,8,["title"]),l(et,null,{header:r(()=>[t("div",ot,[t("div",dt,[t("button",{onClick:e[0]||(e[0]=s=>p(w).visit(d.route("students.index"))),class:"rounded-md p-2 text-gray-400 hover:bg-gray-100 hover:text-gray-600"},[l(p(st),{class:"h-5 w-5"})]),t("div",null,[t("h2",rt,o(a.value?.name??"Loading..."),1),t("p",nt," Student ID: "+o(a.value?.student_identification??"—"),1)])]),N.value||U.value?(n(),u("div",it,[N.value?(n(),$(v,{key:0,onClick:H,variant:"outline",disabled:x.value},{default:r(()=>[l(p(lt),{class:"h-4 w-4 mr-2"}),e[16]||(e[16]=i(" Edit ",-1))]),_:1},8,["disabled"])):k("",!0),U.value?(n(),$(v,{key:1,onClick:e[1]||(e[1]=s=>c.value=!0),variant:"destructive",disabled:x.value},{default:r(()=>[l(p(at),{class:"h-4 w-4 mr-2"}),e[17]||(e[17]=i(" Delete ",-1))]),_:1},8,["disabled"])):k("",!0)])):k("",!0)])]),default:r(()=>[t("div",ut,[t("div",mt,[x.value&&!a.value?(n(),u("div",pt,[...e[18]||(e[18]=[t("div",{class:"text-gray-500"},"Loading student information...",-1)])])):a.value?(n(),u(h,{key:1},[t("div",xt,[e[32]||(e[32]=t("div",{class:"border-b border-gray-200 px-6 py-4"},[t("h3",{class:"text-lg font-semibold text-gray-900"},"Student Information")],-1)),t("div",yt,[t("dl",gt,[t("div",null,[e[19]||(e[19]=t("dt",{class:"text-sm font-medium text-gray-500"},"Name",-1)),t("dd",ft,o(a.value.name??"—"),1)]),t("div",null,[e[20]||(e[20]=t("dt",{class:"text-sm font-medium text-gray-500"},"Student ID",-1)),t("dd",vt,o(a.value.student_identification??"—"),1)]),t("div",null,[e[21]||(e[21]=t("dt",{class:"text-sm font-medium text-gray-500"},"Age",-1)),t("dd",_t,o(a.value.age??"—"),1)]),t("div",null,[e[22]||(e[22]=t("dt",{class:"text-sm font-medium text-gray-500"},"Nationality",-1)),t("dd",ct,[a.value.nationality?(n(),u("span",bt,o(a.value.nationality),1)):(n(),u("span",kt,"—"))])]),t("div",null,[e[23]||(e[23]=t("dt",{class:"text-sm font-medium text-gray-500"},"Manager Type",-1)),t("dd",ht,o(a.value.manager_type??"—"),1)]),t("div",null,[e[24]||(e[24]=t("dt",{class:"text-sm font-medium text-gray-500"},"Email",-1)),t("dd",wt,[a.value.email?(n(),$(p(X),{key:0,class:"h-4 w-4 text-gray-400"})):k("",!0),i(" "+o(a.value.email??"—"),1)])]),t("div",null,[e[25]||(e[25]=t("dt",{class:"text-sm font-medium text-gray-500"},"Category Level",-1)),t("dd",Vt,o(a.value.category_level??"—"),1)]),t("div",null,[e[26]||(e[26]=t("dt",{class:"text-sm font-medium text-gray-500"},"Class Type",-1)),t("dd",Ct,o(a.value.class_type??"—"),1)]),t("div",null,[e[27]||(e[27]=t("dt",{class:"text-sm font-medium text-gray-500"},"Platform",-1)),t("dd",$t,[a.value.platform?(n(),u("span",Dt,o(a.value.platform),1)):(n(),u("span",St,"—"))])]),t("div",null,[e[28]||(e[28]=t("dt",{class:"text-sm font-medium text-gray-500"},"Platform Link",-1)),t("dd",Et,[a.value.platform_link?(n(),u("a",{key:0,href:a.value.platform_link,target:"_blank",class:"text-blue-600 hover:text-blue-800"},o(a.value.platform_link),9,Nt)):(n(),u("span",Ut,"—"))])]),t("div",null,[e[29]||(e[29]=t("dt",{class:"text-sm font-medium text-gray-500"},"Preferred Book",-1)),t("dd",At,o(a.value.preferred_book??"—"),1)]),t("div",null,[e[30]||(e[30]=t("dt",{class:"text-sm font-medium text-gray-500"},"Created",-1)),t("dd",Tt,o(f(a.value.created_at)),1)]),t("div",null,[e[31]||(e[31]=t("dt",{class:"text-sm font-medium text-gray-500"},"Last Updated",-1)),t("dd",Bt,o(f(a.value.updated_at)),1)])])])]),t("div",Lt,[t("div",Mt,[t("div",Pt,[t("h3",Ot,[l(p(Y),{class:"h-5 w-5"}),i(" Classes ("+o(a.value.classes?.length??0)+") ",1)])])]),t("div",jt,[!a.value.classes||a.value.classes.length===0?(n(),u("div",qt," No classes assigned ")):(n(),u("div",Ft,[t("table",Kt,[e[33]||(e[33]=t("thead",{class:"bg-gray-50"},[t("tr",null,[t("th",{class:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500"}," Type "),t("th",{class:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500"}," Teacher "),t("th",{class:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500"}," Start Date "),t("th",{class:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500"}," End Date "),t("th",{class:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500"}," Time "),t("th",{class:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500"}," Book ")])],-1)),t("tbody",Rt,[(n(!0),u(h,null,D(a.value.classes,s=>(n(),u("tr",{key:s.id,class:"hover:bg-gray-50 cursor-pointer",onClick:B=>p(w).visit(d.route("classes.show",s.id))},[t("td",Ht,o(s.type??"—"),1),t("td",zt,o(s.teacher?.name??"—"),1),t("td",Gt,o(f(s.start_date)),1),t("td",Jt,o(f(s.end_date)),1),t("td",Qt,[s.start_time&&s.end_time?(n(),u("span",Wt,o(T(s.start_time))+" - "+o(T(s.end_time)),1)):(n(),u("span",Xt,"—"))]),t("td",Yt,o(s.book?.title??"—"),1)],8,Zt))),128))])])]))])]),t("div",It,[t("div",te,[t("h3",ee,[l(p(I),{class:"h-5 w-5"}),i(" Attendance Records ("+o(a.value.attendances?.length??0)+") ",1)])]),t("div",se,[!a.value.attendances||a.value.attendances.length===0?(n(),u("div",le," No attendance records ")):(n(),u("div",ae,[t("table",oe,[e[34]||(e[34]=t("thead",{class:"bg-gray-50"},[t("tr",null,[t("th",{class:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500"}," Date "),t("th",{class:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500"}," Teacher "),t("th",{class:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500"}," Duration "),t("th",{class:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500"}," Minutes Attended "),t("th",{class:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500"}," Notes ")])],-1)),t("tbody",de,[(n(!0),u(h,null,D(a.value.attendances,s=>(n(),u("tr",{key:s.id,class:"hover:bg-gray-50 cursor-pointer",onClick:B=>p(w).visit(d.route("attendance.show",s.id))},[t("td",ne,o(f(s.date)),1),t("td",ie,o(s.teacher?.name??"—"),1),t("td",ue,o(s.duration??"—")+" min ",1),t("td",me,o(s.minutes_attended??"—")+" min ",1),t("td",pe,o(s.notes??"—"),1)],8,re))),128))])])]))])]),t("div",xe,[t("div",ye,[t("h3",ge,[l(p(tt),{class:"h-5 w-5"}),i(" Assigned Books ("+o(a.value.book_assignments?.length??0)+") ",1)])]),t("div",fe,[!a.value.book_assignments||a.value.book_assignments.length===0?(n(),u("div",ve," No books assigned ")):(n(),u("div",_e,[t("table",ce,[e[35]||(e[35]=t("thead",{class:"bg-gray-50"},[t("tr",null,[t("th",{class:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500"}," Book "),t("th",{class:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500"}," Teacher "),t("th",{class:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500"}," Assigned By "),t("th",{class:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500"}," Assigned Date ")])],-1)),t("tbody",be,[(n(!0),u(h,null,D(a.value.book_assignments,s=>(n(),u("tr",{key:s.id,class:"hover:bg-gray-50 cursor-pointer",onClick:B=>p(w).visit(d.route("assignments.show",s.id))},[t("td",he,o(s.book?.title??"—"),1),t("td",we,o(s.teacher?.name??"—"),1),t("td",Ve,o(s.assigned_by?.name??"—"),1),t("td",Ce,o(f(s.created_at)),1)],8,ke))),128))])])]))])])],64)):k("",!0)])]),l(P,{open:_.value,"onUpdate:open":e[13]||(e[13]=s=>_.value=s)},{default:r(()=>[t("div",$e,[l(O,null,{default:r(()=>[l(j,null,{default:r(()=>[...e[36]||(e[36]=[i("Edit Student",-1)])]),_:1}),l(q,null,{default:r(()=>[...e[37]||(e[37]=[i(" Update student information. All fields are optional except name. ",-1)])]),_:1})]),_:1}),t("div",De,[t("div",Se,[t("div",null,[l(y,{for:"name"},{default:r(()=>[...e[38]||(e[38]=[i("Name *",-1)])]),_:1}),l(g,{id:"name",modelValue:m.value.name,"onUpdate:modelValue":e[2]||(e[2]=s=>m.value.name=s),required:""},null,8,["modelValue"])]),t("div",null,[l(y,{for:"age"},{default:r(()=>[...e[39]||(e[39]=[i("Age",-1)])]),_:1}),l(g,{id:"age",modelValue:m.value.age,"onUpdate:modelValue":e[3]||(e[3]=s=>m.value.age=s),type:"number",min:"0",max:"150"},null,8,["modelValue"])])]),t("div",Ee,[t("div",null,[l(y,{for:"nationality"},{default:r(()=>[...e[40]||(e[40]=[i("Nationality",-1)])]),_:1}),L(t("select",{id:"nationality","onUpdate:modelValue":e[4]||(e[4]=s=>m.value.nationality=s),class:"flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-sm shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50"},[...e[41]||(e[41]=[t("option",{value:""},"Select...",-1),t("option",{value:"KOREAN"},"KOREAN",-1),t("option",{value:"CHINESE"},"CHINESE",-1)])],512),[[M,m.value.nationality]])]),t("div",null,[l(y,{for:"manager_type"},{default:r(()=>[...e[42]||(e[42]=[i("Manager Type",-1)])]),_:1}),l(g,{id:"manager_type",modelValue:m.value.manager_type,"onUpdate:modelValue":e[5]||(e[5]=s=>m.value.manager_type=s),placeholder:"KM / CM"},null,8,["modelValue"])])]),t("div",null,[l(y,{for:"email"},{default:r(()=>[...e[43]||(e[43]=[i("Email",-1)])]),_:1}),l(g,{id:"email",modelValue:m.value.email,"onUpdate:modelValue":e[6]||(e[6]=s=>m.value.email=s),type:"email"},null,8,["modelValue"])]),t("div",null,[l(y,{for:"category_level"},{default:r(()=>[...e[44]||(e[44]=[i("Category Level",-1)])]),_:1}),l(g,{id:"category_level",modelValue:m.value.category_level,"onUpdate:modelValue":e[7]||(e[7]=s=>m.value.category_level=s),placeholder:"Beginner, Adult..."},null,8,["modelValue"])]),t("div",Ne,[t("div",null,[l(y,{for:"class_type"},{default:r(()=>[...e[45]||(e[45]=[i("Class Type",-1)])]),_:1}),l(g,{id:"class_type",modelValue:m.value.class_type,"onUpdate:modelValue":e[8]||(e[8]=s=>m.value.class_type=s),placeholder:"Zoom, Voov..."},null,8,["modelValue"])]),t("div",null,[l(y,{for:"platform"},{default:r(()=>[...e[46]||(e[46]=[i("Platform",-1)])]),_:1}),L(t("select",{id:"platform","onUpdate:modelValue":e[9]||(e[9]=s=>m.value.platform=s),class:"flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-sm shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50"},[...e[47]||(e[47]=[t("option",{value:""},"Select...",-1),t("option",{value:"Zoom"},"Zoom",-1),t("option",{value:"Voov"},"Voov",-1)])],512),[[M,m.value.platform]])])]),t("div",null,[l(y,{for:"platform_link"},{default:r(()=>[...e[48]||(e[48]=[i("Platform Link",-1)])]),_:1}),l(g,{id:"platform_link",modelValue:m.value.platform_link,"onUpdate:modelValue":e[10]||(e[10]=s=>m.value.platform_link=s),type:"url"},null,8,["modelValue"])]),t("div",null,[l(y,{for:"preferred_book"},{default:r(()=>[...e[49]||(e[49]=[i("Preferred Book",-1)])]),_:1}),l(g,{id:"preferred_book",modelValue:m.value.preferred_book,"onUpdate:modelValue":e[11]||(e[11]=s=>m.value.preferred_book=s)},null,8,["modelValue"])])]),l(F,null,{default:r(()=>[l(v,{variant:"outline",onClick:e[12]||(e[12]=s=>_.value=!1)},{default:r(()=>[...e[50]||(e[50]=[i("Cancel",-1)])]),_:1}),l(v,{onClick:z,disabled:x.value},{default:r(()=>[...e[51]||(e[51]=[i("Save Changes",-1)])]),_:1},8,["disabled"])]),_:1})])]),_:1},8,["open"]),l(P,{open:c.value,"onUpdate:open":e[15]||(e[15]=s=>c.value=s)},{default:r(()=>[t("div",null,[l(O,null,{default:r(()=>[l(j,null,{default:r(()=>[...e[52]||(e[52]=[i("Delete Student",-1)])]),_:1}),l(q,null,{default:r(()=>[e[53]||(e[53]=i(" Are you sure you want to delete ",-1)),t("strong",null,o(a.value?.name),1),e[54]||(e[54]=i("? This action cannot be undone. ",-1))]),_:1})]),_:1}),l(F,null,{default:r(()=>[l(v,{variant:"outline",onClick:e[14]||(e[14]=s=>c.value=!1)},{default:r(()=>[...e[55]||(e[55]=[i("Cancel",-1)])]),_:1}),l(v,{variant:"destructive",onClick:G,disabled:x.value},{default:r(()=>[...e[56]||(e[56]=[i(" Delete ",-1)])]),_:1},8,["disabled"])]),_:1})])]),_:1},8,["open"])]),_:1})],64))}};export{Fe as default};
