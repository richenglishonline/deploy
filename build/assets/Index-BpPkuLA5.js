import{r as f,a as $,o as V,c as l,b as h,u as m,h as I,w as _,d as e,k as p,q as x,e as u,f as n,F as v,g as w,i as k,t as i,j as A}from"./app-0fzbWLMr.js";import{_ as N}from"./AuthenticatedLayout-7O23QDDk.js";import{a as P}from"./api-CjtnGutK.js";const S={class:"flex items-center justify-between"},T=["disabled"],F={class:"py-10"},M={class:"mx-auto max-w-7xl space-y-6 px-4 sm:px-6 lg:px-8"},U={class:"rounded-lg border border-gray-200 bg-white p-6 shadow-sm"},j={class:"grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-4"},B={class:"flex items-end gap-3"},L=["disabled"],R=["disabled"],E={class:"overflow-hidden rounded-lg border border-gray-200 bg-white shadow-sm"},q={class:"overflow-x-auto"},z={class:"min-w-full divide-y divide-gray-200"},G={class:"divide-y divide-gray-200 bg-white"},H={key:0},J=["onClick"],K={class:"px-6 py-4"},O={class:"font-medium text-gray-900"},Q={class:"text-xs text-gray-500"},W={class:"text-xs text-gray-500"},X={class:"px-6 py-4"},Y={class:"font-medium text-gray-900"},Z={class:"text-xs text-gray-500"},ee={class:"text-xs text-gray-500"},te={class:"px-6 py-4"},se={class:"px-6 py-4"},oe={class:"space-y-1 text-xs text-indigo-600"},de=["href"],ae={key:1,class:"flex flex-wrap gap-2"},le=["href"],ne={key:2,class:"text-gray-500"},ie=["onClick"],re={key:0,class:"flex flex-col items-center justify-between gap-4 border-t border-gray-100 px-6 py-4 text-sm text-gray-600 sm:flex-row"},ce={class:"flex items-center gap-2"},ue=["disabled"],ge=["disabled"],me={__name:"Index",setup(pe){const r=f(!1),b=f([]),a=f(null),o=$({teacher_id:"",student_id:"",class_id:"",date:"",page:1,limit:10}),c=async()=>{r.value=!0;try{const{data:d}=await P.get("/attendance",{params:o});b.value=d.attendances,a.value=d.pagination}catch(d){console.error(d)}finally{r.value=!1}},y=d=>{a.value&&(d<1||d>a.value.totalPages||(o.page=d,c()))},C=()=>{o.teacher_id="",o.student_id="",o.class_id="",o.date="",o.page=1,c()},D=d=>`${d.duration} mins • ${d.hours??0} hrs`;return V(c),(d,t)=>(n(),l(v,null,[h(m(I),{title:"Attendance"}),h(N,null,{header:_(()=>[e("div",S,[t[7]||(t[7]=e("div",null,[e("h2",{class:"text-xl font-semibold leading-tight text-gray-800"}," Attendance "),e("p",{class:"text-sm text-gray-500"}," Track class participation, uploaded evidence, and notes from each session. ")],-1)),e("button",{onClick:c,class:"rounded-md bg-indigo-600 px-4 py-2 text-sm font-semibold text-white shadow-sm hover:bg-indigo-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600",disabled:r.value}," Refresh ",8,T)])]),default:_(()=>[e("div",F,[e("div",M,[e("div",U,[e("form",j,[e("div",null,[t[8]||(t[8]=e("label",{class:"block text-sm font-medium text-gray-700"}," Teacher ID ",-1)),p(e("input",{"onUpdate:modelValue":t[0]||(t[0]=s=>o.teacher_id=s),type:"text",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm",placeholder:"Teacher ID"},null,512),[[x,o.teacher_id]])]),e("div",null,[t[9]||(t[9]=e("label",{class:"block text-sm font-medium text-gray-700"}," Student ID ",-1)),p(e("input",{"onUpdate:modelValue":t[1]||(t[1]=s=>o.student_id=s),type:"text",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm",placeholder:"Student ID"},null,512),[[x,o.student_id]])]),e("div",null,[t[10]||(t[10]=e("label",{class:"block text-sm font-medium text-gray-700"}," Class ID ",-1)),p(e("input",{"onUpdate:modelValue":t[2]||(t[2]=s=>o.class_id=s),type:"text",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm",placeholder:"Class ID"},null,512),[[x,o.class_id]])]),e("div",null,[t[11]||(t[11]=e("label",{class:"block text-sm font-medium text-gray-700"}," Date ",-1)),p(e("input",{"onUpdate:modelValue":t[3]||(t[3]=s=>o.date=s),type:"date",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm"},null,512),[[x,o.date]])]),e("div",B,[e("button",{type:"button",onClick:c,class:"flex-1 rounded-md bg-indigo-600 px-4 py-2 text-sm font-semibold text-white shadow-sm hover:bg-indigo-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600",disabled:r.value}," Apply Filters ",8,L),e("button",{type:"button",onClick:C,class:"flex-1 rounded-md border border-gray-300 px-4 py-2 text-sm font-semibold text-gray-700 hover:bg-gray-50",disabled:r.value}," Reset ",8,R)])])]),e("div",E,[e("div",q,[e("table",z,[t[13]||(t[13]=e("thead",{class:"bg-gray-50"},[e("tr",{class:"text-left text-xs font-semibold uppercase tracking-wider text-gray-500"},[e("th",{scope:"col",class:"px-6 py-3"}," Class "),e("th",{scope:"col",class:"px-6 py-3"}," Attendance "),e("th",{scope:"col",class:"px-6 py-3"}," Notes "),e("th",{scope:"col",class:"px-6 py-3"}," Evidence "),e("th",{scope:"col",class:"px-6 py-3"}," Actions ")])],-1)),e("tbody",G,[!r.value&&b.value.length===0?(n(),l("tr",H,[...t[12]||(t[12]=[e("td",{colspan:"5",class:"px-6 py-4 text-center text-sm text-gray-500"}," No attendance records found. ",-1)])])):u("",!0),(n(!0),l(v,null,w(b.value,s=>(n(),l("tr",{key:s.id,class:"text-sm text-gray-700 hover:bg-gray-50 cursor-pointer",onClick:g=>m(k).visit(d.route("attendance.show",s.id))},[e("td",K,[e("div",O,i(s.class_id),1),e("div",Q," Teacher: "+i(s.teacher?.name??"—"),1),e("div",W," Student: "+i(s.student?.name??"—"),1)]),e("td",X,[e("div",Y,i(new Date(s.date).toLocaleDateString()),1),e("div",Z,i(D(s)),1),e("div",ee," Minutes attended: "+i(s.minutes_attended??"—"),1)]),e("td",te,i(s.notes??"—"),1),e("td",se,[e("div",oe,[s.recording?(n(),l("a",{key:0,href:`/storage/${s.recording.path}`,target:"_blank",class:"hover:underline"}," Recording ",8,de)):u("",!0),s.screenshots?.length?(n(),l("div",ae,[(n(!0),l(v,null,w(s.screenshots,g=>(n(),l("a",{key:g.id,href:`/storage/${g.path}`,target:"_blank",class:"rounded border border-indigo-100 px-2 py-1 hover:underline"}," Screenshot ",8,le))),128))])):u("",!0),!s.recording&&!s.screenshots?.length?(n(),l("span",ne," — ")):u("",!0)])]),e("td",{class:"px-6 py-4",onClick:t[4]||(t[4]=A(()=>{},["stop"]))},[e("button",{onClick:g=>m(k).visit(d.route("attendance.show",s.id)),class:"rounded-md bg-blue-600 px-3 py-1.5 text-xs font-medium text-white hover:bg-blue-700"}," View ",8,ie)])],8,J))),128))])])]),a.value?(n(),l("div",re,[e("div",null," Page "+i(a.value.page)+" of "+i(a.value.totalPages??1),1),e("div",ce,[e("button",{onClick:t[5]||(t[5]=s=>y(a.value.page-1)),class:"rounded-md border border-gray-300 px-3 py-1 hover:bg-gray-50",disabled:r.value||a.value.page===1}," Previous ",8,ue),e("button",{onClick:t[6]||(t[6]=s=>y(a.value.page+1)),class:"rounded-md border border-gray-300 px-3 py-1 hover:bg-gray-50",disabled:r.value||a.value.page===a.value.totalPages}," Next ",8,ge)])])):u("",!0)])])])]),_:1})],64))}};export{me as default};
