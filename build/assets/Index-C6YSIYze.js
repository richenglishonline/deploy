import{l as S,a as $,m as b,r as A,c as g,b as o,u as y,h as F,w as d,d as t,e as M,f as x,F as V,g as T,t as i,s as B,n as p,k as c,q as f,v as j}from"./app-C5n5MEBy.js";import{_ as z}from"./AuthenticatedLayout-CuJFiyfd.js";import{_ as v}from"./Button-Cx1ckUNl.js";import{_ as E,a as L,b as q,c as O}from"./DialogFooter-DZuehxH1.js";import{_ as R}from"./DialogDescription-COX7Ypdm.js";import{u as G}from"./payouts-B3aVVCvZ.js";import"./api-DyaYUT2x.js";const H={class:"flex items-center justify-between"},J={class:"flex gap-2"},K={class:"py-10"},Q={class:"overflow-hidden rounded-lg border border-gray-200 bg-white shadow-sm"},W={class:"overflow-x-auto"},X={class:"min-w-full divide-y divide-gray-200"},Y={class:"divide-y divide-gray-200 bg-white"},Z={key:0},tt={class:"px-6 py-4"},et={class:"px-6 py-4"},st={class:"px-6 py-4"},at={class:"px-6 py-4 font-semibold text-gray-900"},nt={class:"px-6 py-4"},lt={class:"px-6 py-4"},ot={class:"px-6 py-4"},dt={class:"sm:max-w-[600px] max-h-[90vh] overflow-y-auto p-6"},rt={class:"mt-4 grid grid-cols-1 gap-4"},gt={__name:"Index",setup(it){S();const I=$({status:"",start_date:"",end_date:"",page:1,limit:20}),{data:h,isFetching:w,refetch:C}=G(I),r=b(()=>h?.value?.payouts??[]);b(()=>h?.value?.pagination??null),b(()=>{if(!r.value.length)return{total_payouts:0,total_amount:0,total_duration:0,total_classes:0,total_incentives:0,pending:0,processing:0,completed:0};const n=r.value.reduce((l,u)=>l+(parseFloat(u.amount)||0),0),e=r.value.reduce((l,u)=>l+(parseInt(u.duration)||0),0),s=r.value.reduce((l,u)=>l+(parseInt(u.total_class)||0),0),D=r.value.reduce((l,u)=>l+(parseFloat(u.incentives)||0),0);return{total_payouts:r.value.length,total_amount:n,total_duration:e,total_classes:s,total_incentives:D,pending:r.value.filter(l=>l.status==="pending").length,processing:r.value.filter(l=>l.status==="processing").length,completed:r.value.filter(l=>l.status==="completed").length}});const k=n=>n?new Date(n).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"—",U=n=>n?new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(n):"$0.00",m=A(!1),_=A(null),a=$({teacher_name:"",amount:"",duration:"",total_class:"",incentives:"",status:"pending"}),P=(n=null)=>{_.value=n,n?(a.teacher_name=n.teacher_name,a.amount=n.amount,a.duration=n.duration,a.total_class=n.total_class,a.incentives=n.incentives,a.status=n.status):(a.teacher_name="",a.amount="",a.duration="",a.total_class="",a.incentives="",a.status="pending"),m.value=!0},N=()=>{m.value=!1,C()};return(n,e)=>(x(),g(V,null,[o(y(F),{title:"Admin Payouts Management"}),o(z,null,{header:d(()=>[t("div",H,[e[11]||(e[11]=t("div",null,[t("h2",{class:"text-xl font-semibold leading-tight text-gray-800"}," Admin Payouts Management "),t("p",{class:"text-sm text-gray-500"}," Add, edit, and manage payouts. ")],-1)),t("div",J,[o(v,{onClick:y(C),disabled:y(w)},{default:d(()=>[...e[9]||(e[9]=[p("Refresh",-1)])]),_:1},8,["onClick","disabled"]),o(v,{onClick:e[0]||(e[0]=s=>P())},{default:d(()=>[...e[10]||(e[10]=[p("Add Payout",-1)])]),_:1})])])]),default:d(()=>[t("div",K,[t("div",Q,[t("div",W,[t("table",X,[e[14]||(e[14]=t("thead",{class:"bg-gray-50"},[t("tr",{class:"text-left text-xs font-semibold uppercase tracking-wider text-gray-500"},[t("th",{class:"px-6 py-3"},"Period"),t("th",{class:"px-6 py-3"},"Duration"),t("th",{class:"px-6 py-3"},"Classes"),t("th",{class:"px-6 py-3"},"Amount"),t("th",{class:"px-6 py-3"},"Incentives"),t("th",{class:"px-6 py-3"},"Status"),t("th",{class:"px-6 py-3"},"Actions")])],-1)),t("tbody",Y,[!y(w)&&r.value.length===0?(x(),g("tr",Z,[...e[12]||(e[12]=[t("td",{colspan:"7",class:"px-6 py-4 text-center text-sm text-gray-500"}," No payouts found. ",-1)])])):M("",!0),(x(!0),g(V,null,T(r.value,s=>(x(),g("tr",{key:s.id,class:"text-sm text-gray-700 hover:bg-gray-50"},[t("td",tt,i(k(s.start_date))+" - "+i(k(s.end_date)),1),t("td",et,i(s.duration??"—")+" hours ",1),t("td",st,i(s.total_class??"—"),1),t("td",at,i(U(s.amount)),1),t("td",nt,i(U(s.incentives)),1),t("td",lt,[t("span",{class:B(["px-2 py-1 text-xs font-medium rounded",s.status==="completed"?"bg-green-100 text-green-800":s.status==="processing"?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800"])},i(s.status),3)]),t("td",ot,[o(v,{onClick:D=>P(s),variant:"outline",size:"sm"},{default:d(()=>[...e[13]||(e[13]=[p("Edit",-1)])]),_:1},8,["onClick"])])]))),128))])])])]),o(E,{open:m.value,"onUpdate:open":e[8]||(e[8]=s=>m.value=s)},{default:d(()=>[t("div",dt,[o(L,null,{default:d(()=>[o(q,null,{default:d(()=>[p(i(_.value?"Update Payout":"Add Payout"),1)]),_:1}),o(R,null,{default:d(()=>[p(i(_.value?"Update payout details":"Add a new payout"),1)]),_:1})]),_:1}),t("div",rt,[c(t("input",{"onUpdate:modelValue":e[1]||(e[1]=s=>a.teacher_name=s),placeholder:"Teacher Name",class:"w-full rounded border px-3 py-2"},null,512),[[f,a.teacher_name]]),c(t("input",{"onUpdate:modelValue":e[2]||(e[2]=s=>a.amount=s),placeholder:"Amount",type:"number",class:"w-full rounded border px-3 py-2"},null,512),[[f,a.amount]]),c(t("input",{"onUpdate:modelValue":e[3]||(e[3]=s=>a.duration=s),placeholder:"Duration",type:"number",class:"w-full rounded border px-3 py-2"},null,512),[[f,a.duration]]),c(t("input",{"onUpdate:modelValue":e[4]||(e[4]=s=>a.total_class=s),placeholder:"Total Classes",type:"number",class:"w-full rounded border px-3 py-2"},null,512),[[f,a.total_class]]),c(t("input",{"onUpdate:modelValue":e[5]||(e[5]=s=>a.incentives=s),placeholder:"Incentives",type:"number",class:"w-full rounded border px-3 py-2"},null,512),[[f,a.incentives]]),c(t("select",{"onUpdate:modelValue":e[6]||(e[6]=s=>a.status=s),class:"w-full rounded border px-3 py-2"},[...e[15]||(e[15]=[t("option",{value:"pending"},"Pending",-1),t("option",{value:"processing"},"Processing",-1),t("option",{value:"completed"},"Completed",-1)])],512),[[j,a.status]])]),o(O,{class:"mt-4 flex justify-end gap-2"},{default:d(()=>[o(v,{onClick:e[7]||(e[7]=s=>m.value=!1),variant:"outline"},{default:d(()=>[...e[16]||(e[16]=[p("Cancel",-1)])]),_:1}),o(v,{onClick:N},{default:d(()=>[p(i(_.value?"Update":"Save"),1)]),_:1})]),_:1})])]),_:1},8,["open"])])]),_:1})],64))}};export{gt as default};
