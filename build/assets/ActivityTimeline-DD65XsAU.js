import{u as B,j as h,r as w,o as F,c as r,d as e,t as o,k as u,a as $,b as x,F as C,q as N,y as g,s as A,g as t,e as y,f as V,z as f}from"./app-CGuEmW06.js";import{a as k}from"./api-B9gIEsIZ.js";import{m as D,o as I}from"./AuthenticatedLayout-CJGuDV3D.js";import{r as U,a as q}from"./ArrowUpIcon-DLRLa_dE.js";const z={class:"flex items-center justify-between p-4 bg-white shadow-md rounded-lg w-full mb-3"},L={class:"flex items-center gap-4"},M=["title"],P={class:"text-xl font-semibold text-gray-900 truncate"},R={class:"relative"},T={key:0,class:"absolute -top-1 -right-1 rounded-full bg-red-500 text-white w-5 h-5 text-xs flex items-center justify-center"},E={key:0,class:"absolute right-0 mt-2 w-80 max-h-96 overflow-y-auto bg-white rounded-lg shadow-lg border border-gray-200 z-50"},H={class:"p-2"},K=["onClick"],O={class:"flex justify-between items-center"},G={class:"text-sm font-medium text-gray-900"},J=["onClick"],Q={key:0,class:"text-xs text-gray-600 truncate"},W={key:1,class:"text-xs text-gray-700"},X={key:2,class:"text-[10px] text-gray-400"},ve={__name:"DashboardHeader",setup(s){const i=B(),n=h(()=>i.props.auth?.user?.name??"User"),c=h(()=>i.props.auth?.user?.id),d=w([]),b=w(!1),v=h(()=>d.value.filter(l=>!l.is_read).length),p=async()=>{if(c.value){b.value=!0;try{const{data:l}=await k.get("/notification");d.value=Array.isArray(l)?l:[]}catch(l){console.error("Failed to load notifications:",l)}finally{b.value=!1}}},_=async l=>{try{await k.patch(`/notification/${l}`,{is_read:!0});const m=d.value.findIndex(a=>a.id===l);m!==-1&&(d.value[m].is_read=!0)}catch(m){console.error("Failed to mark notification as read:",m)}},j=h(()=>n.value.split(" ").map(l=>l[0]).slice(0,2).join("").toUpperCase());return F(()=>{p()}),(l,m)=>(t(),r("div",z,[e("div",L,[e("div",{class:"flex items-center justify-center w-12 h-12 rounded-full bg-indigo-600 text-white font-semibold text-lg",title:n.value},o(j.value),9,M),e("h1",P,o(n.value),1)]),e("div",R,[e("button",{class:"relative p-2 rounded-full hover:bg-gray-100 transition-colors",onClick:p},[$(x(D),{class:"w-6 h-6 text-gray-700"}),v.value>0?(t(),r("span",T,o(v.value),1)):u("",!0)]),d.value.length>0?(t(),r("div",E,[e("div",H,[m[0]||(m[0]=e("div",{class:"font-semibold px-2 py-1 border-b border-gray-200 mb-2"}," Notifications ",-1)),(t(!0),r(C,null,N(d.value,a=>(t(),r("div",{key:a.id,class:g([{"bg-gray-50":!a.is_read,"bg-white":a.is_read},"flex flex-col gap-1 p-2 rounded-md hover:bg-gray-100 cursor-pointer mb-1"]),onClick:S=>_(a.id)},[e("div",O,[e("span",G,o(a.type),1),e("button",{onClick:A(S=>_(a.id),["stop"]),class:"p-1 hover:bg-gray-200 rounded"},[$(x(I),{class:"w-4 h-4 text-gray-400 hover:text-gray-600"})],8,J)]),a.label?(t(),r("span",Q,o(a.label),1)):u("",!0),a.message?(t(),r("span",W,o(a.message),1)):u("",!0),a.created_at?(t(),r("span",X,o(new Date(a.created_at).toLocaleString()),1)):u("",!0)],10,K))),128))])])):u("",!0)])]))}},Y={class:"group relative overflow-hidden rounded-xl bg-white p-6 shadow-sm ring-1 ring-gray-200 transition-all duration-200 hover:shadow-md hover:ring-gray-300"},Z={class:"flex items-start justify-between"},ee={class:"flex-1"},te={class:"text-sm font-medium text-gray-600"},se={class:"mt-2 text-3xl font-semibold text-gray-900"},re={key:0,class:"mt-3 flex items-center"},ae={class:"ml-2 text-xs text-gray-500"},oe={key:0,class:"absolute bottom-0 left-0 right-0 h-1 bg-gradient-to-r from-transparent via-blue-500 to-transparent opacity-0 transition-opacity duration-200 group-hover:opacity-100"},pe={__name:"KPICard",props:{label:{type:String,required:!0},value:{type:[Number,String],required:!0},icon:{type:Object,required:!0},iconBgColor:{type:String,default:"bg-blue-50"},iconColor:{type:String,default:"text-blue-600"},change:{type:Number,default:null},changeLabel:{type:String,default:"vs last period"},trend:{type:Boolean,default:!1},format:{type:String,default:"number"}},setup(s){const i=s,n=h(()=>i.format==="currency"?new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(Number(i.value)):i.format==="percentage"?`${Number(i.value).toFixed(1)}%`:new Intl.NumberFormat("en-US").format(Number(i.value)));return(c,d)=>(t(),r("div",Y,[e("div",Z,[e("div",ee,[e("p",te,o(s.label),1),e("p",se,o(n.value),1),s.change!==null?(t(),r("div",re,[e("span",{class:g(["inline-flex items-center rounded-full px-2.5 py-0.5 text-xs font-medium",s.change>=0?"bg-green-100 text-green-800":"bg-red-100 text-red-800"])},[(t(),y(f(s.change>=0?x(U):x(q)),{class:"mr-1 h-3 w-3"})),V(" "+o(Math.abs(s.change))+"% ",1)],2),e("span",ae,o(s.changeLabel),1)])):u("",!0)]),e("div",{class:g(["flex h-12 w-12 items-center justify-center rounded-lg",s.iconBgColor])},[(t(),y(f(s.icon),{class:g([s.iconColor,"h-6 w-6"])},null,8,["class"]))],2)]),s.trend?(t(),r("div",oe)):u("",!0)]))}},ne={class:"rounded-xl bg-white p-6 shadow-sm ring-1 ring-gray-200"},le={class:"mb-6 flex items-center justify-between"},ie={class:"space-y-4"},ce={key:0,class:"absolute left-4 top-8 h-full w-0.5 bg-gray-200"},de={class:"flex-1 min-w-0"},ue={class:"text-sm font-medium text-gray-900"},me={class:"mt-1 text-sm text-gray-500"},ge={class:"mt-1 text-xs text-gray-400"},he={key:0,class:"py-8 text-center"},_e={__name:"ActivityTimeline",props:{activities:{type:Array,default:()=>[]}},emits:["view-all"],setup(s){return(i,n)=>(t(),r("div",ne,[e("div",le,[n[1]||(n[1]=e("h3",{class:"text-lg font-semibold text-gray-900"},"Recent Activity",-1)),e("button",{class:"text-sm font-medium text-blue-600 hover:text-blue-700",onClick:n[0]||(n[0]=c=>i.$emit("view-all"))}," View all ")]),e("div",ie,[(t(!0),r(C,null,N(s.activities,(c,d)=>(t(),r("div",{key:d,class:"relative flex gap-4 pb-4 last:pb-0"},[d<s.activities.length-1?(t(),r("div",ce)):u("",!0),e("div",{class:g(["relative z-10 flex h-8 w-8 shrink-0 items-center justify-center rounded-full ring-2 ring-white",c.iconBg])},[(t(),y(f(c.icon),{class:g([c.iconColor,"h-4 w-4"])},null,8,["class"]))],2),e("div",de,[e("p",ue,o(c.title),1),e("p",me,o(c.description),1),e("p",ge,o(c.time),1)])]))),128)),s.activities.length===0?(t(),r("div",he,[...n[2]||(n[2]=[e("p",{class:"text-sm text-gray-500"},"No recent activity",-1)])])):u("",!0)])]))}};export{ve as _,pe as a,_e as b};
