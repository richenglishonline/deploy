import{r as m,W as I,o as F,c as a,b as c,u as d,h as R,w as _,d as t,e as l,k as z,q as L,f as s,F as g,g as C,s as x,p as $,n as D,G as B,t as r,i as M,j as U}from"./app-Df2mZBCJ.js";import{i as y,b as f,j as b,d as k,r as w,_ as A}from"./AuthenticatedLayout-BZV3tvjz.js";import{a as G}from"./api-CaAFynDB.js";import{_ as Q}from"./Button-CHQKV9hm.js";const W={class:"py-10"},H={class:"mx-auto max-w-7xl space-y-6 px-4 sm:px-6 lg:px-8"},J={class:"rounded-lg border border-gray-200 bg-white p-6 shadow-sm"},K={class:"space-y-4"},O={class:"relative"},P={class:"absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none"},X={class:"flex flex-wrap gap-2"},Y=["onClick"],Z={key:0,class:"text-center py-12"},ee={key:1,class:"rounded-lg border border-gray-200 bg-white p-6 shadow-sm"},te={class:"flex flex-wrap gap-4 text-sm"},se={class:"flex items-center gap-2"},ae={class:"text-gray-900"},oe={key:0,class:"flex items-center gap-2"},ne={class:"text-gray-700"},le={key:1,class:"flex items-center gap-2"},re={class:"text-gray-700"},ie={key:2,class:"flex items-center gap-2"},ce={class:"text-gray-700"},de={key:3,class:"flex items-center gap-2"},ue={class:"text-gray-700"},me={key:2,class:"space-y-4"},ye=["onClick"],pe={class:"flex items-start gap-4"},he={class:"flex-1 min-w-0"},ve={class:"flex items-center gap-2 mb-1"},_e={class:"text-lg font-semibold text-gray-900"},ge={class:"text-sm text-gray-600 space-y-1"},xe={key:0},fe={key:0},be={key:1},ke={key:2},we={key:1},Se={key:0},Te={key:1},Ce={key:2},$e={key:0},De={key:1},Be={key:2},Me={key:3},Ne={key:3},Ve={key:0},qe={key:3,class:"text-center py-12"},Ee={key:4,class:"text-center py-12"},Le={__name:"Index",setup(je){const h=m(!1),u=m(""),p=m("all"),o=m(null),v=m(null),N=[{value:"all",label:"All",icon:y},{value:"students",label:"Students",icon:f},{value:"teachers",label:"Teachers",icon:b},{value:"classes",label:"Classes",icon:k},{value:"books",label:"Books",icon:w}],V=async()=>{if(!u.value.trim()){o.value=null;return}h.value=!0;try{const{data:i}=await G.get("/search",{params:{q:u.value,type:p.value}});o.value=i}catch(i){console.error("Error searching:",i)}finally{h.value=!1}},q=()=>{v.value&&clearTimeout(v.value),v.value=setTimeout(()=>{V()},300)};I([u,p],()=>{q()});const E=i=>i?new Date(i).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"â€”",j=i=>({student:f,teacher:b,class:k,book:w})[i]||y,S=i=>({student:"bg-blue-100 text-blue-800",teacher:"bg-purple-100 text-purple-800",class:"bg-green-100 text-green-800",book:"bg-yellow-100 text-yellow-800"})[i]||"bg-gray-100 text-gray-800";return F(()=>{const i=document.querySelector('input[type="text"]');i&&i.focus()}),(i,n)=>(s(),a(g,null,[c(d(R),{title:"Search"}),c(A,null,{header:_(()=>[...n[1]||(n[1]=[t("div",{class:"flex items-center justify-between"},[t("div",null,[t("h2",{class:"text-xl font-semibold leading-tight text-gray-800"}," Search "),t("p",{class:"text-sm text-gray-500"}," Search across students, teachers, classes, and books. ")])],-1)])]),default:_(()=>[t("div",W,[t("div",H,[t("div",J,[t("div",K,[t("div",O,[t("div",P,[c(d(y),{class:"h-5 w-5 text-gray-400"})]),z(t("input",{"onUpdate:modelValue":n[0]||(n[0]=e=>u.value=e),type:"text",placeholder:"Search students, teachers, classes, books...",class:"block w-full pl-10 pr-3 py-3 border border-gray-300 rounded-md leading-5 bg-white placeholder-gray-500 focus:outline-none focus:placeholder-gray-400 focus:ring-1 focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"},null,512),[[L,u.value]])]),t("div",X,[(s(),a(g,null,C(N,e=>t("button",{key:e.value,onClick:T=>p.value=e.value,class:x(["flex items-center gap-2 px-4 py-2 rounded-md text-sm font-medium transition-colors",p.value===e.value?"bg-indigo-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"])},[(s(),$(B(e.icon),{class:"h-4 w-4"})),D(" "+r(e.label),1)],10,Y)),64))])])]),h.value?(s(),a("div",Z,[...n[2]||(n[2]=[t("p",{class:"text-gray-500"},"Searching...",-1)])])):l("",!0),o.value&&o.value.summary&&o.value.summary.total>0?(s(),a("div",ee,[n[4]||(n[4]=t("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Search Results",-1)),t("div",te,[t("div",se,[n[3]||(n[3]=t("span",{class:"font-medium text-gray-700"},"Total:",-1)),t("span",ae,r(o.value.summary.total),1)]),o.value.summary.students>0?(s(),a("div",oe,[c(d(f),{class:"h-4 w-4 text-blue-500"}),t("span",ne,r(o.value.summary.students)+" Students",1)])):l("",!0),o.value.summary.teachers>0?(s(),a("div",le,[c(d(b),{class:"h-4 w-4 text-purple-500"}),t("span",re,r(o.value.summary.teachers)+" Teachers",1)])):l("",!0),o.value.summary.classes>0?(s(),a("div",ie,[c(d(k),{class:"h-4 w-4 text-green-500"}),t("span",ce,r(o.value.summary.classes)+" Classes",1)])):l("",!0),o.value.summary.books>0?(s(),a("div",de,[c(d(w),{class:"h-4 w-4 text-yellow-500"}),t("span",ue,r(o.value.summary.books)+" Books",1)])):l("",!0)])])):l("",!0),o.value&&o.value.results&&o.value.results.length>0?(s(),a("div",me,[(s(!0),a(g,null,C(o.value.results,e=>(s(),a("div",{key:`${e.type}-${e.id}`,class:"rounded-lg border border-gray-200 bg-white p-4 shadow-sm hover:shadow-md transition-shadow cursor-pointer",onClick:T=>d(M).visit(e.url)},[t("div",pe,[t("div",{class:x(["p-2 rounded-md",S(e.type)])},[(s(),$(B(j(e.type)),{class:"h-5 w-5"}))],2),t("div",he,[t("div",ve,[t("h4",_e,r(e.name||e.title||`${e.teacher} - ${e.student}`),1),t("span",{class:x(["px-2 py-1 text-xs font-medium rounded",S(e.type)])},r(e.type),3)]),t("div",ge,[e.type==="student"?(s(),a("div",xe,[e.email?(s(),a("p",fe,"Email: "+r(e.email),1)):l("",!0),e.identifier?(s(),a("p",be,"ID: "+r(e.identifier),1)):l("",!0),e.nationality?(s(),a("p",ke,"Nationality: "+r(e.nationality),1)):l("",!0)])):e.type==="teacher"?(s(),a("div",we,[e.email?(s(),a("p",Se,"Email: "+r(e.email),1)):l("",!0),e.role?(s(),a("p",Te,"Role: "+r(e.role),1)):l("",!0)])):e.type==="class"?(s(),a("div",Ce,[e.teacher?(s(),a("p",$e,"Teacher: "+r(e.teacher),1)):l("",!0),e.student?(s(),a("p",De,"Student: "+r(e.student),1)):l("",!0),e.book?(s(),a("p",Be,"Book: "+r(e.book),1)):l("",!0),e.date?(s(),a("p",Me,"Date: "+r(E(e.date))+" "+r(e.time),1)):l("",!0)])):e.type==="book"?(s(),a("div",Ne,[e.filename?(s(),a("p",Ve,"Filename: "+r(e.filename),1)):l("",!0)])):l("",!0)])]),c(Q,{onClick:U(T=>d(M).visit(e.url),["stop"]),variant:"outline",size:"sm"},{default:_(()=>[...n[5]||(n[5]=[D(" View ",-1)])]),_:1},8,["onClick"])])],8,ye))),128))])):l("",!0),o.value&&o.value.results&&o.value.results.length===0?(s(),a("div",qe,[c(d(y),{class:"mx-auto h-12 w-12 text-gray-400"}),n[6]||(n[6]=t("h3",{class:"mt-2 text-sm font-medium text-gray-900"},"No results found",-1)),n[7]||(n[7]=t("p",{class:"mt-1 text-sm text-gray-500"},"Try adjusting your search query.",-1))])):l("",!0),!u.value&&!o.value?(s(),a("div",Ee,[c(d(y),{class:"mx-auto h-12 w-12 text-gray-400"}),n[8]||(n[8]=t("h3",{class:"mt-2 text-sm font-medium text-gray-900"},"Start searching",-1)),n[9]||(n[9]=t("p",{class:"mt-1 text-sm text-gray-500"},"Enter a search query to find students, teachers, classes, or books.",-1))])):l("",!0)])])]),_:1})],64))}};export{Le as default};
